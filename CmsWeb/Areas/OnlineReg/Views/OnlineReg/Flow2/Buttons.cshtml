@using RestSharp.Extensions
@model CmsWeb.Models.OnlineRegModel
@{ var sendlinkmsg = "";}
<div class="form-group">
    <div class="col-sm-offset-3 col-sm-9">
        <span class="pull-right">
            @if (!Model.OnlyOneAllowed())
            {
                <a href="/OnlineReg/AddAnotherPerson/" class="submitbutton ajax btn btn-primary">
                    Register Someone Else 
                </a>
                @:or
        }
            @if (Model.ManagingSubscriptions())
            {
                @Helper.OnlineRegSubmitButton("Manage Subscriptions")
            }
            else if (Model.OnlinePledge())
            {
                @Helper.OnlineRegSubmitButton("Email me a link to manage my pledge")
                sendlinkmsg = "This link will be sent to " + UtilityExtensions.Util.ObscureEmail(Model.last.person.EmailAddress);
            }
            else if (Model.IsCreateAccount())
            {
                @Helper.OnlineRegSubmitButton("Create Account")
            }
            else if (Model.ChoosingSlots() || Model.OnlineGiving() || Model.SupportMissionTrip)
            {
                @Helper.OnlineRegSubmitButton("Processing, Please Wait", onlyoneallowed: true)
            }
            else
            {
                @Helper.OnlineRegSubmitButton("Complete Registration")
            }
        </span>
        @if (sendlinkmsg.HasValue())
        {
            <div class="alert alert-info">@sendlinkmsg</div>
        }
    </div>
</div>
