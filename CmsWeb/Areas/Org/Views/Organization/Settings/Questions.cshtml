@using CmsData
@model CmsData.Registration.Settings
@{
  ViewBag.ShowHelp = DbUtil.Db.UserPreference("ShowQuestionsHelp") == "true";
}
<form class="form form-horizontal non-modal ajax span12" data-init="movequestions" data-init2="updateQuestionList">
  <br />
  @FormAction()
  <div id="QuestionList" class="movable-list noedit">
    @foreach (var ask in Model.AskItems)
    {
      ask.Name = Html.NameFor2(m => m.AskItems);
      switch (ask.Type)
      {
        case "AskSMS":
        case "AskParents":
        case "AskGradeOptions":
        case "AskDoctor":
        case "AskInsurance":
        case "AskEmContact":
        case "AskAllergies":
        case "AskChurch":
        case "AskTylenolEtc":
        case "AskCoaching":
        case "AnswersNotRequired":
          @Html.DisplayFor(m => ask, ask.Type)
          break;
        default:
        @Html.DisplayFor(m => ask)
          break;
      }
    }
  </div>
  @FormAction()
</form>
@helper FormAction()
{
  <div class="pull-right">
    <a href="/Organization/QuestionsHelpToggle/@Model.OrgId" class="btn ajax">Toggle Help</a>
    @if (User.IsInRole("Edit"))
    {
      <a href="/Organization/QuestionsEdit/@Model.OrgId" class="btn btn-primary edit ajax">Edit</a>
    }
  </div>
  <div class="formerror">@Html.ValidationMessage("Form")</div>
}