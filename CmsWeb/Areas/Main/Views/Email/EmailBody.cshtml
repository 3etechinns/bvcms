@{
    int tid = ViewBag.TemplateID;
    var c = ViewExtensions2.GetContent(tid);
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, maximum-scale=1.0">
    <title></title>
    @ViewExtensions2.FontAwesome()
    @Fingerprint.Css("/Content/touchpoint/lib/froala-editor/css/froala_editor.min.css")
    @Fingerprint.Css("/Content/touchpoint/lib/froala-editor/css/froala_style.min.css")
    @Fingerprint.Css("/Content/touchpoint/lib/froala-editor/css/custom-theme.css")
    @Fingerprint.Css("/Content/touchpoint/css/editor.css")
</head>
    <body>
        <div id="tempateBody">
            @if (c.Body == "<div bvedit=\"\" style=\"max-width:600px;\">Click here to edit content</div>\r\n")
            {
                <font face="Arial">@Html.Raw(c.Body)</font>
            }
            else
            {
                @Html.Raw(c.Body)
            }
        </div>
        @ViewExtensions2.jQuery()
        @Fingerprint.Script("/Content/touchpoint/lib/froala-editor/js/froala_editor.min.js")
        @Fingerprint.Script("/Content/touchpoint/lib/froala-editor/js/plugins/font_family.min.js")
        @Fingerprint.Script("/Content/touchpoint/lib/froala-editor/js/plugins/fullscreen.min.js")
        @Fingerprint.Script("/Content/touchpoint/lib/froala-editor/js/plugins/lists.min.js")
        @Fingerprint.Script("/Content/touchpoint/lib/froala-editor/js/plugins/tables.min.js")
        @Fingerprint.Script("/Content/touchpoint/lib/froala-editor/js/plugins/urls.min.js")
        @Fingerprint.Script("/Content/touchpoint/lib/froala-editor/js/plugins/special_links.js")
        <script type="text/javascript">
            $(function () {              
                $.hClick = function (e) {
                    $.removeButtons();
                    var div = this;
                
                    if (!$(div).data('fa.editable')) {
                        $(div).editable({
                            inlineMode: false,
                            theme: 'custom',
                            buttons: ['bold', 'italic', 'underline', 'fontFamily', 'sep', 'formatBlock', 'align', 'insertOrderedList', 'insertUnorderedList', 'outdent', 'indent', 'sep', 'createLink', 'specialLink', 'sep', 'insertImage', 'table', 'html', 'fullscreen'],
                            imageUploadURL: '/Account/FroalaUpload'
                        });

                        var html = $(div).editable('getHTML');
                        if (html == "Click here to edit content") {
                            $(div).editable('setHTML', '');
                        }
                    }
                };

                $('div[bvedit],div.bvedit').bind('click', $.hClick).addClass("ti");
                $('td[bvrepeat]').mouseenter($.hHoverIn).mouseleave($.hHoverOut);

                $.hHoverIn = function (ev) {
                    currentHover = this;
                    $(this).css("border", "solid 1px #ff0000");
                    $(this).append("<div id='controlButtons' class='tiAdd'><input id='addButton' type='button' value='Copy Section' /></div>");
                    $("#controlButtons").css("top", $(this).offset().top + 5).css("left", $(this).offset().left + 5);
                    $("#addButton").bind("click", $.hClickAdd);
                    ev.stopPropagation();
                };

                $.hHoverOut = function (ev) {
                    currentHover = null;
                    $(this).css("border", "");
                    $.removeButtons();
                    ev.stopPropagation();
                };

                $.removeButtons = function () {
                    $("#controlButtons").remove();
                };

                $.hClickAdd = function (e) {
                    $.removeButtons();
                    parentTR = $(currentHover).parent();
                    var dup = $(currentHover).clone();
                    $(parentTR).after($(dup));
                    dup.wrap("<tr></tr>");
                    dup.attr("bvrepeatadd", "");
                    dup.removeAttr("bvrepeat");
                    dup.mouseenter($.hAddHoverIn).mouseleave($.hHoverOut);
                    $('div[bvedit],div.bvedit').bind('click', $.hClick).addClass("ti");
                };

                $.hAddHoverIn = function (ev) {
                    currentHover = this;
                    $(this).css("border", "solid 1px #ff0000");
                    $(this).append("<div id='controlButtons' class='tiAdd'><input id='removeButton' type='button' value='Remove' /></div>");
                    $("#controlButtons").css("top", $(this).offset().top + 5).css("left", $(this).offset().left + 5);
                    $("#removeButton").bind('click', $.removeSection);
                };

                $.removeSection = function (ev) {
                    $(currentHover).parent().remove();
                    ev.stopPropagation();
                };

                $.clearTemplateClass = function () {
                    $.removeButtons();
                    $("div[bvedit],div.bvedit").removeClass("ti");
                    $("div[bveditadd],div.bveditadd").removeClass("ti");
                };

                $.addTemplateClass = function () {
                    $("div[bveditadd],div.bveditadd").addClass("ti");
                    $("div[bvedit],div.bvedit").addClass("ti");
                };

                $.addRowAfter = function (ev) {
                    $(this).parent().parent().after("<tr bvrepeatadd=''>" + $(this).html() + "</tr>");
                    $("div[bvrepeatadd]").hover($.hAddHoverIn, $.hHoverOut);
                    ev.stopPropagation();
                };

                $.distroyEditor = function () {
                    $("div[bvedit],div.bvedit").each(function (index) {
                        var div = this;
                        if ($(div).data('fa.editable')) {
                            $(div).editable('destroy');
                        }
                    });
                };

                window.parent.$.clearFunction = $.clearTemplateClass;
                window.parent.$.addFunction = $.addTemplateClass;
                window.parent.$.distroyHtmlEditor = $.distroyEditor;
            });
        </script>
    </body>
</html>