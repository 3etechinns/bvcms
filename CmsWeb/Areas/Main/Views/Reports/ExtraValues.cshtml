@model IEnumerable<CmsWeb.Areas.Main.Controllers.ReportsController.ExtraInfo>
@{
    ViewBag.Title = "ExtraValues";
    Layout = "~/Views/Shared/SiteLayout.cshtml";
}

<h2>ExtraValues</h2>
@section scripts
{
    <script type="text/javascript">
        $(function () {
            $('table.grid tbody tr:even').addClass('alt');
            $("a.delete").click(function (ev) {
                ev.preventDefault();
                var d = $(this);
                if(confirm("are you sure?"))
                    $.post(d.attr("href"), null, function () {
                        d.closest("tr").remove();
                        $('table.grid tbody tr').removeClass('alt');
                        $('table.grid tbody tr:even').addClass('alt');
                    });
            });
        });
    </script>
}

<table class="grid">
@foreach (var e in Model)
{
	<tr><td>@e.Field</td>
        <td><a href="/Reports/ExtraValueQuery?field=@e.Field&val=@e.Value">@e.Value</a></td>
		<td>@e.Count</td>
        @if(User.IsInRole("Admin"))
		{
            <td><a class="delete" href="/Manage/ExtraValues/DeleteAll?field=@e.Field&val=@e.Value"><img src="/images/delete.gif" /></a></td>
		}
    </tr>
}
</table>