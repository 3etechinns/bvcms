@model CmsWeb.Models.UpdateFieldsModel
@{
    ViewBag.Title = "Update Fields from a Tag / Query";
    Layout = ViewExtensions2.TouchPointLayout();
}
@section scripts
{
    @Fingerprint.Script("/Scripts/Admin/UpdateFields.js")
}
<h2>Update Fields from a Tag / Query</h2>
@if (ViewBag.success != null)
{
    <div class="alert alert-warning">
        <strong>Warning!</strong>&nbsp;&nbsp;@Model.Count records will be updated.
    </div>
}
@if (Model.Count.HasValue)
{
    <div class="alert alert-success alert-dismissible">
        <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <strong>Success!</strong>&nbsp;&nbsp;@ViewBag.success
    </div>
}
<div class="row">
    <div class="col-sm-4">
        <form id="uform" method="post" action="/Batch/UpdateFieldsRun">
            @Html.HiddenFor(m => m.Count)
            <div class="form-group">
                <label for="Tag">Tag</label>
                @Html.DropDownListFor(m => m.Tag, Model.Tags(), new { @class = "form-control" })
            </div>
            <div class="form-group">
                <label for="Field">Field</label>
                @Html.DropDownListFor(m => m.Field, Model.Fields(), new { @class = "form-control" })
            </div>
            <div class="form-group">
                <label for="NewValue">New Value</label>
                @Html.TextBoxFor(m => m.NewValue, new { @class = "form-control" })
            </div>
            <input type="submit" class="btn btn-primary" value="Run Update" />
        </form>
    </div>
</div>
<br/>
<div class="row">
    @foreach (var ti in Model.FetchTitleItems())
    {
        <div class="col-sm-6 col-md-4 col-lg-3">
            @Html.Partial("LookupTable", ti)
        </div>
        
    }
</div>