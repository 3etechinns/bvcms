@model CmsWeb.Models.TransactionsModel
@using CmsWeb
@using UtilityExtensions
@{
    var tt = Model.TotalTransactions();
}
    @if (tt == null)
    {
        <tr><td colspan="3">Nothing to report</td></tr>
    }
    else
    {
	<thead>
		<tr><td class="right" colspan="4">Total:</td>
			<td class="right">@tt.Amt.ToString("N2")</td>
		</tr>
        <tr><td colspan="5"><hr/></td></tr>
		<tr><td>BatchRef</td>
			<td>Settled</td>
			<td>Type</td>
			<td>Description</td>
            <td class="right">Count</td>
			<td class="right">Total</td>
        </tr>
	</thead>
   <tbody>
		@foreach (var r in Model.FetchTransactionsByBatchDescription())
		{
			<tr>
				<td><a href="#" class="filterbatch">@r.BatchRef</a></td>
				<td>@r.batchdate.FormatDate()</td>
			    <td>@r.BatchType</td>
                <td>@r.Description</td>
				<td class="right">@r.count</td>
				<td class="right">@r.Total.ToString("N2")</td>
			</tr>
		}
	</tbody>
    }
