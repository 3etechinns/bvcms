@using CmsWeb;
@using CmsData;
@model CmsWeb.Models.CheckinTimeModel
@{
IQueryable<CheckInTime> iqResults = Model.Times();
}
<input type="hidden" id="Person" name="Person" value="0" />
<div class="roundbox floatleft">
	<h2>
		Check-in Activity</h2>
	<table cellspacing="7">
		<tr>
			<td align="right">Start Date: </td>
			<td>@Html.DatePicker("dateStart")</td>
			<td align="right">@Html.CheckBox("withGuest")</td>
			<td>Show Only With Guest</td>
		</tr>
		<tr>
			<td align="right">End Date: </td>
			<td>@Html.DatePicker("dateEnd")</td>
			<td align="right">&nbsp;</td>
			<td>Filter Total: @Model.Pager.GetCount()</td>
		</tr>
		<tr>
			<td align="right">Activity: </td>
			<td>@Html.DropDownList( "Activity", new SelectList( Model.Activities(), "Activity", "Activity", Model.Activity ) )</td>
			<td colspan="2">&nbsp;</td>
		</tr>
		<tr>
			<td align="right" colspan="4"><a id="filter" href="#" class="submitbutton bt">Filter</a> <a id="clear" href="#" class="submitbutton bt">Clear</a></td>
		</tr>
	</table>
</div>
<div class="floatclear">
</div>
<table id="Checkins" class="grid" cellpadding="4">
	<thead>
		<tr><td colspan="10"><hr /></td></tr>
		<tr>
			<th><a href="#" class="sortable" id="0">ID</a></th>
			<th><a href="#" class="sortable" id="1">Person</a></th>
			<th><a href="#" class="sortable" id="2">Date/Time</a></th>
			<th><a href="#" class="sortable" id="3">Location</a></th>
			<th><a href="#" class="sortable" id="4">Activity</a></th>
			<th><a href="#" class="sortable" id="5">Guest Of</a></th>
		</tr>
	</thead>
	<tbody>

@foreach (var t in iqResults ) {
<tr>
	<td valign="top">@t.Id</td>
	<td valign="top"><a href="#" class="person" id="@t.PeopleId">@t.Person.Name</a></td>
	<td valign="top">@t.CheckInTimeX</td>
	<td valign="top">@t.Location</td>
	<td valign="top">
		@foreach (var y in t.CheckInActivities)
  {
	  @y.Activity<br />
  }
	</td>
	<td valign="top">@( t.GuestOfId != null ? t.GuestOf.Name : "" )</td>
	</tr>
}
	</tbody>
</table>
@{Html.RenderPartial("Pager2", Model.Pager);}