@using UtilityExtensions
@model CmsWeb.Areas.People.Models.ChangesModel
<form class="non-modal ajax" method="post">
    <a href="#" class="ajax-refresh pull-right"><i class="icon-refresh"></i></a>
    <div class="pagination pagination-mini">
        @Html.Partial("Pager3", Model.Pager)
    </div>
    <table class="table table-striped table-condensed">
        <thead>
            <tr>
                <th>@Model.Pager.SortLink("Time")</th>
                <th>User</th>
                <th>Field</th>
                <th>Before</th>
                <th>After</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
        @foreach (var c in Model.ViewList())
        { 
            <tr>
                <td title="@c.FieldSet">@c.Time.ToString2("g")</td>
                <td>@c.User</td>
                <td>@c.Field</td>
                <td>@c.Before</td>
                <td>@c.After</td>
                @if (c.Reversable)
                {
                    <td><a class="ajax" data-confirm="Are you sure?" href="/Person2/Reverse/@Model.person.PeopleId/@c.pf/@c.Field?value=@c.Before">reverse</a></td>
                }
                else
                {
                    <td></td>
                }
            </tr>
        }
        </tbody>
    </table>
    <div class="pagination pagination-mini">
        @Html.Partial("Pager3", Model.Pager)
    </div>
</form>
