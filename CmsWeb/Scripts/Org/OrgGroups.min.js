$(function(){function r(n){var i=$(this).attr("peopleID");$("#"+i).attr("score",n);t()}function t(){var t,r,u;if($("#scoreTracker")!==undefined)if(t=$("input[name='list']:checked"),t.length>0){for(t.length==2?$("#swapPlayers").show():$("#swapPlayers").hide(),r=0,u=0;u<t.length;u++)r+=Number($(t[u]).attr("score"));$("#playerCount").html(t.length);$("#lastScore").html($(n).attr("score"));$("#avgScore").html(Number(r/t.length).toFixed(1));$("#totalScore").html(r);i||(i=!0,$("#scoreTracker").slideDown(200))}else i=!1,$("#scoreTracker").slideUp(200)}var n,i;$.fmtTable=function(){$("table.grid td.tip").tooltip({showBody:"|"});$("table.grid > tbody > tr:even").addClass("alt");$(".bt").button();$(".clickEdit").editable("/OrgGroups/UpdateScore",{indicator:"<img src='/images/loading.gif'>",width:40,height:22,tooltip:"Click to edit...",select:!0,callback:r});t()};$.fmtTable();$(".helptip").tooltip({showBody:"|"});$.loadTable=function(){$.block();$.getTable($("#groupsform"));$.unblock()};$("body").on("click","#filter",function(n){n.preventDefault();$.loadTable()});$("body").on("click","a.sortable",function(n){n.preventDefault();$("#sort").val($(this).text());$.loadTable()});$("#groupsform").delegate("#memtype","change",$.loadTable);$("#SelectAll").click(function(){$(this).attr("checked")?$("table.grid input[name='list']").attr("checked",!0):$("table.grid input[name='list']").removeAttr("checked")});$("#ingroup, #notgroup").keypress(function(n){n.keyCode=="13"&&(n.preventDefault(),$.loadTable())});$("#groupsform").delegate("#groupid","change",$.loadTable);$.getTable=function(n){var t=n.serialize();return $.post("/OrgGroups/Filter",t,function(n){$("table.grid > tbody").html(n).ready($.fmtTable)}),!1};$(".datepicker").datepicker();$("body").on("click","#SelectAll",function(){$("input[name='list']").attr("checked",$(this).attr("checked"));t()});$("body").on("click","a.display",function(n){n.preventDefault();var t=$(this).closest("form");return $.post(this.href,q,function(n){$(t).html(n).ready(function(){return $.fmtTable(),!1})}),!1});$("body").on("click","a.groupmanager",function(n){if(n.preventDefault(),confirm("are you sure?")){var t=$(this).closest("form"),i=t.serialize();$.block();$.post($(this).attr("href"),i,function(n){n.substring(0,5)!="error"&&t.html(n).ready(function(){$("#newgid").val()&&$("#groupid").val($("#newgid").val());$("#GroupName").val("");$.fmtTable()});$.unblock()})}});$("form").submit(function(n){return n.preventDefault(),!1});$.performAction=function(n){if($("#groupid").val()<=0)return $.growlUI("error","select target group first"),!1;$.block();var t=$("form").serialize();return $.post(n,t,function(n){$("table.grid > tbody").html(n).ready($.fmtTable);$.unblock()}),!1};$("body").on("click","#AssignSelectedToTargetGroup",function(){$.performAction("/OrgGroups/AssignSelectedToTargetGroup")});$("body").on("click","#RemoveSelectedFromTargetGroup",function(){$.performAction("/OrgGroups/RemoveSelectedFromTargetGroup")});n=null;$("body").on("click","input[name = 'list']",function(i){if(!n){n=this;t();return}if(i.shiftKey){var r=$("input[name = 'list']").index(this),u=$("input[name = 'list']").index(n);$("input[name = 'list']").slice(Math.min(r,u),Math.max(r,u)+1).attr("checked",n.checked)}n=this;t()});i=!1;$("#scoreTracker")!==undefined&&$("#scoreTracker").draggable({axis:"x"});$("body").on("click","#swapPlayers",function(){var n,t,i;$(this).hide();n=$("input[name='list']:checked");n.length==2&&(t=$(n[0]).attr("swap"),i=$(n[1]).attr("swap"),$.ajax({type:"POST",url:"/OrgGroups/SwapPlayers",data:{pOne:t,pTwo:i},success:$.loadTable}))});$("body").on("click","#createTeams",function(){var t=confirm("Are you sure you want to create all teams?"),n;t&&(n=$(this).attr("orgid"),$.block(),$.ajax({type:"POST",url:"/OrgGroups/CreateTeams",data:{id:n},success:function(){location.reload()}}))});$("body").on("click","#scoreUploadButton",function(){$("#scoreUploadDialog").dialog({width:"auto",title:"Upload Player Scores",modal:!0,close:function(){$("#scoreUploadData").val("")}})});$("body").on("click","#scoreUploadSubmit",function(){var n=$("#scoreUploadForm").serialize();$.ajax({type:"POST",url:"/OrgGroups/UploadScores",data:n,success:$.loadTable});$("#scoreUploadDialog").dialog("close")});$("body").on("click","#scoreUploadDismiss",function(){$("#scoreUploadDialog").dialog("close")})});
/*
//# sourceMappingURL=OrgGroups.min.js.map
*/