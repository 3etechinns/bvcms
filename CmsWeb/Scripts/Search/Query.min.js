function RefreshList(n){$.block(),$.ajax({type:"POST",url:"/Query/Results/",data:n,timeout:12e5,success:function(n){$("#toolbar").show(),$("#results").html(n),$("#people tbody tr:even").addClass("alt"),$("a.taguntag").click(function(n){return $.post("/Query/ToggleTag/"+$(this).attr("value"),null,function(t){t.error?alert(t.error):$(n.target).text(t.HasTag?"Remove":"Add")}),!1}),$("#people thead a.sortable").click(function(){var n=$(this).text(),i=$("#Sort").val(),t;return $("#Sort").val(n),t=$("#Direction").val(),i==n&&t=="asc"?$("#Direction").val("desc"):$("#Direction").val("asc"),RefreshList(),!1}),$.unblock()},error:function(n,t,i){$.unblock(),alert(i)}})}function ShowErrors(j){$(".validate").each(function(){$(this).next(".error").remove()});var e=eval("("+j+")");return e.count==0?!1:($(".validate").each(function(){e[this.id]&&$(this).after("<span class='error'> "+e[this.id]+"<\/span>")}),!0)}$(function(){var i=0,t=$('<div class="modal-backdrop hide" />').appendTo("body"),n;$("#conditions a.editconditionlink").live("click",function(){var t=$(this).closest("tr").attr("qid");return n(t),!1}),n=function(n){if(i=$(this).parent().height(),$("#editcondition").is(":visible")){var t=$("#editcondition").attr("orginalheight");$("#editconditionplaceholder").animate({height:t},150),$.HideEditCondition()}$.post("/Query/EditCondition/"+n,null,function(n){$("#conditions").html(n).ready($.AdjustEditCondition)})},$.AdjustEditCondition=function(){var i,n,r;$("#CodeValues").multiselect({includeSelectAllOption:!0,enableFiltering:!0,enableCaseInsensitiveFiltering:!0}),i=$("#editcondition").outerHeight(),$("#editcondition").attr("orginalheight",$("#editconditionplaceholder").height()),$("#editconditionplaceholder").animate({height:i},200),n=$("#editconditionplaceholder").closest("td").position(),r=$("#editconditionplaceholder").closest("td").width(),$("#editcondition").css({left:n.left,top:n.top+2,"min-width":r,"z-index":1050}),t.removeClass("hide"),$("#editcondition").slideDown(200)},$.HideEditCondition=function(){t.addClass("hide");var n=$("#editcondition").attr("orginalheight");$("#editconditionplaceholder").animate({height:n},500)},$("#conditions a.addnewclause").live("click",function(){var n=$(this).closest("tr").attr("qid");return $.post("/Query/AddNewCondition/"+n,{},function(n){$("#conditions").html(n).ready($.AdjustEditCondition),$("#QueryConditionSelect").modal("show")}),!1}),$("#conditions a.duplicateclause").live("click",function(){var n=$(this).closest("tr").attr("qid");return $.post("/Query/DuplicateCondition/"+n,{},function(n){$("#conditions").html(n).ready($.AdjustEditCondition)}),!1}),$("#conditions a.insgroupabove").live("click",function(){var n=$(this).closest("tr").attr("qid");return $.post("/Query/InsGroupAbove/"+n,{},function(n){$("#conditions").html(n).ready($.AdjustEditCondition)}),!1}),$("#conditions a.movetoprevgroup").live("click",function(){var n=$(this).closest("tr").attr("qid");return $.post("/Query/MoveToPreviousGroup/"+n,{},function(n){$("#conditions").html(n).ready($.AdjustEditCondition)}),!1}),$("#SaveCondition").live("click",function(){var n=$("#editForm").serialize();return $.post("/Query/SaveCondition/",n,function(n){$("#conditions").html(n).ready(function(){$.HideEditCondition(),$("#Run").click()})}),!1}),$("#CancelChange").live("click",function(){return $.HideEditCondition(),$.post("/Query/Reload/",null,function(n){$("#conditions").html(n)}),!1}),$("#DeleteCondition").live("click",function(){return bootbox.confirm("Are you sure you want to delete?",function(n){if(n===!0){var t=$("#SelectedId").val();$.post("/Query/RemoveCondition/"+t,null,function(n){$.HideEditCondition(),$("#conditions").html(n)})}}),!1}),$("#Comparison").live("change",function(){if($("#CodesDiv").length>0){var n=$("#editForm").serialize();$.post("/Query/CodesDropdown",n,function(n){$("#CodesDiv").replaceWith(n).ready(function(){$("#CodeValues").multiselect()})})}}),$("a.help").live("click",function(n){n.preventDefault();var t=$("#QueryConditionHelp");this.href.endsWith("-")?$("iframe",t).attr("src",this.href+$("#ConditionName").val()):$("iframe",t).attr("src",this.href),t.dialog("open")}),$("#Tags").click(function(){$("#TagsPopup").show()}),$(".datepicker").datepicker(),$(".bt").button(),$("#Program").live("change",function(){$.post("/Query/Divisions/"+$(this).val(),null,function(n){$("#Division").replaceWith(n),$("#Organization").replaceWith("<select id='Organization' name='Organization'><option value='0'>(not specified)<\/option><\/select>")})}),$("#Division").live("change",function(){$.post("/Query/Organizations/"+$(this).val(),null,function(n){$("#Organization").replaceWith(n)})}),$("#Run").live("click",function(){return RefreshList(),!1}),$("#Export").click(function(){window.location="/Query/Export/"+$("#QueryId").val()}),$("#NewSearchId").val()?(n($("#NewSearchId").val()),$("#QueryConditionSelect").modal("show")):$("#AutoRun").val()==="true"&&$("#Run").click(),$("#SelectCondition").live("click",function(n){return n.preventDefault(),$("#QueryConditionSelect").modal("show"),!1}),$("div.FieldLink a").click(function(n){n.preventDefault();var t=$("#SelectedId").val();return $.post("/Query/SelectCondition/"+t,{conditionName:n.target.id},function(n){$("#QueryConditionSelect").modal("hide"),$("#conditions").html(n).ready($.AdjustEditCondition)}),!1}),$("a.closeit").click(function(){$.unblock()}),$.navigate=function(n,t){n+=(n.match(/\?/)?"&":"?")+t,window.location=n},$.fn.enabled=function(n){return n?$(this).attr("href","#").removeClass("disabled"):$(this).removeAttr("href").addClass("disabled"),this},$("#Run").click()});
//@ sourceMappingURL=Query.min.js.map