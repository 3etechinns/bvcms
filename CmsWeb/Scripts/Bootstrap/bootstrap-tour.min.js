(function(n,t){var r,i;return i=t.document,r=function(){function r(i){this._options=n.extend({name:"tour",container:"body",keyboard:!0,storage:t.localStorage,debug:!1,backdrop:!1,redirect:!0,orphan:!1,duration:!1,basePath:"",template:"<div class='popover'>          <div class='arrow'><\/div>          <h3 class='popover-title'><\/h3>          <div class='popover-content'><\/div>          <div class='popover-navigation'>            <div class='btn-group'>              <button class='btn btn-sm btn-default' data-role='prev'>&laquo; Prev<\/button>              <button class='btn btn-sm btn-default' data-role='next'>Next &raquo;<\/button>              <button class='btn btn-sm btn-default' data-role='pause-resume'                data-pause-text='Pause'                data-resume-text='Resume'              >Pause<\/button>            <\/div>            <button class='btn btn-sm btn-default' data-role='end'>End tour<\/button>          <\/div>        <\/div>",afterSetState:function(){},afterGetState:function(){},afterRemoveState:function(){},onStart:function(){},onEnd:function(){},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNext:function(){},onPrev:function(){},onPause:function(){},onResume:function(){}},i);this._force=!1;this._inited=!1;this._steps=[];this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return r.prototype.setState=function(n,t){var r,i;if(this._options.storage){i=""+this._options.name+"_"+n;try{this._options.storage.setItem(i,t)}catch(u){r=u;r.code===DOMException.QUOTA_EXCEEDED_ERR&&this.debug("LocalStorage quota exceeded. setState failed.")}return this._options.afterSetState(i,t)}return this._state==null&&(this._state={}),this._state[n]=t},r.prototype.removeState=function(n){var t;return this._options.storage?(t=""+this._options.name+"_"+n,this._options.storage.removeItem(t),this._options.afterRemoveState(t)):this._state!=null?delete this._state[n]:void 0},r.prototype.getState=function(n){var i,t;return this._options.storage?(i=""+this._options.name+"_"+n,t=this._options.storage.getItem(i)):this._state!=null&&(t=this._state[n]),(t===void 0||t==="null")&&(t=null),this._options.afterGetState(n,t),t},r.prototype.addSteps=function(n){var r,t,u,i;for(i=[],t=0,u=n.length;t<u;t++)r=n[t],i.push(this.addStep(r));return i},r.prototype.addStep=function(n){return this._steps.push(n)},r.prototype.getStep=function(t){if(this._steps[t]!=null)return n.extend({id:"step-"+t,path:"",placement:"right",title:"",content:"<p><\/p>",next:t===this._steps.length-1?-1:t+1,prev:t-1,animation:!0,container:this._options.container,backdrop:this._options.backdrop,redirect:this._options.redirect,orphan:this._options.orphan,duration:this._options.duration,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume},this._steps[t])},r.prototype.init=function(n){var t=this;return(this._force=n,this.ended())?this._debug("Tour ended, init prevented."):(this.setCurrentStep(),this._setupMouseNavigation(),this._setupKeyboardNavigation(),this._onResize(function(){return t.showStep(t._current)}),this._current!==null&&this.showStep(this._current),this._inited=!0,this)},r.prototype.start=function(n){var t;return n==null&&(n=!1),this._inited||this.init(n),this._current===null?(t=this._makePromise(this._options.onStart!=null?this._options.onStart(this):void 0),this._callOnPromiseDone(t,this.showStep,0)):void 0},r.prototype.next=function(){var n;return this.ended()?this._debug("Tour ended, next prevented."):(n=this.hideStep(this._current),this._callOnPromiseDone(n,this._showNextStep))},r.prototype.prev=function(){var n;return this.ended()?this._debug("Tour ended, prev prevented."):(n=this.hideStep(this._current),this._callOnPromiseDone(n,this._showPrevStep))},r.prototype.goTo=function(n){var t;return this.ended()?this._debug("Tour ended, goTo prevented."):(t=this.hideStep(this._current),this._callOnPromiseDone(t,this.showStep,n))},r.prototype.end=function(){var u,f,r=this;return u=function(){if(n(i).off("click.tour-"+r._options.name),n(i).off("keyup.tour-"+r._options.name),n(t).off("resize.tour-"+r._options.name),r.setState("end","yes"),r._inited=!1,r._force=!1,r._clearTimer(),r._options.onEnd!=null)return r._options.onEnd(r)},f=this.hideStep(this._current),this._callOnPromiseDone(f,u)},r.prototype.ended=function(){return!this._force&&!!this.getState("end")},r.prototype.restart=function(){return this.removeState("current_step"),this.removeState("end"),this.setCurrentStep(0),this.start()},r.prototype.pause=function(){var n;if((n=this.getStep(this._current),n&&n.duration)&&(this._paused=!0,this._duration-=(new Date).getTime()-this._start,t.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),n.onPause!=null))return n.onPause(this,this._duration)},r.prototype.resume=function(){var n,i=this;if((n=this.getStep(this._current),n&&n.duration)&&(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||n.duration,this._timer=t.setTimeout(function(){return i._isLast()?i.next():i.end()},this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),n.onResume!=null&&this._duration!==n.duration))return n.onResume(this,this._duration)},r.prototype.hideStep=function(t){var f,r,i,u=this;if(i=this.getStep(t),i)return this._clearTimer(),r=this._makePromise(i.onHide!=null?i.onHide(this,t):void 0),f=function(){var t;if(t=n(i.element),t.data("bs.popover")||t.data("popover")||(t=n("body")),t.popover("destroy"),i.reflex&&t.css("cursor","").off("click.tour-"+u._options.name),i.backdrop&&u._hideBackdrop(),i.onHidden!=null)return i.onHidden(u)},this._callOnPromiseDone(r,f),r},r.prototype.showStep=function(t){var f,e,o,r,u=this;if(r=this.getStep(t),r)return o=t<this._current,f=this._makePromise(r.onShow!=null?r.onShow(this,t):void 0),e=function(){var e,f;if(u.setCurrentStep(t),f=n.isFunction(r.path)?r.path.call():u._options.basePath+r.path,e=[i.location.pathname,i.location.hash].join(""),u._isRedirect(f,e)){u._redirect(r,f);return}if(u._isOrphan(r)){if(!r.orphan){u._debug("Skip the orphan step "+(u._current+1)+". Orphan option is false and the element doesn't exist or is hidden.");o?u._showPrevStep():u._showNextStep();return}u._debug("Show the orphan step "+(u._current+1)+". Orphans option is true.")}return r.backdrop&&u._showBackdrop(u._isOrphan(r)?void 0:r.element),u._scrollIntoView(r.element,function(){if(r.element!=null&&r.backdrop&&u._showOverlayElement(r.element),u._showPopover(r,t),r.onShown!=null)r.onShown(u);return u._debug("Step "+(u._current+1)+" of "+u._steps.length)}),r.duration?u.resume():void 0},this._callOnPromiseDone(f,e),f},r.prototype.setCurrentStep=function(n){return n!=null?(this._current=n,this.setState("current_step",n)):(this._current=this.getState("current_step"),this._current=this._current===null?null:parseInt(this._current,10)),this},r.prototype._showNextStep=function(){var t,i,n,r=this;return n=this.getStep(this._current),i=function(){return r.showStep(n.next)},t=this._makePromise(n.onNext!=null?n.onNext(this):void 0),this._callOnPromiseDone(t,i)},r.prototype._showPrevStep=function(){var t,i,n,r=this;return n=this.getStep(this._current),i=function(){return r.showStep(n.prev)},t=this._makePromise(n.onPrev!=null?n.onPrev(this):void 0),this._callOnPromiseDone(t,i)},r.prototype._debug=function(n){if(this._options.debug)return t.console.log("Bootstrap Tour '"+this._options.name+"' | "+n)},r.prototype._isRedirect=function(n,t){return n!=null&&n!==""&&n.replace(/\?.*$/,"").replace(/\/?$/,"")!==t.replace(/\/?$/,"")},r.prototype._redirect=function(t,r){return n.isFunction(t.redirect)?t.redirect.call(this,r):t.redirect===!0?(this._debug("Redirect to "+r),i.location.href=r):void 0},r.prototype._isOrphan=function(t){return t.element==null||!n(t.element).length||n(t.element).is(":hidden")&&n(t.element)[0].namespaceURI!=="http://www.w3.org/2000/svg"},r.prototype._isLast=function(){return this._current<this._steps.length-1},r.prototype._showPopover=function(t,i){var r,f,u,e,o,h,s=this;if(h=n.extend({},this._options),u=n.isFunction(t.template)?n(t.template(i,t)):n(t.template),f=u.find(".popover-navigation"),o=this._isOrphan(t),o&&(t.element="body",t.placement="top",u=u.addClass("orphan")),r=n(t.element),u.addClass("tour-"+this._options.name),t.options&&n.extend(h,t.options),t.reflex)r.css("cursor","pointer").on("click.tour-"+this._options.name,function(){return s._isLast()?s.next():s.end()});return t.prev<0&&f.find("*[data-role=prev]").addClass("disabled"),t.next<0&&f.find("*[data-role=next]").addClass("disabled"),t.duration||f.find("*[data-role='pause-resume']").remove(),t.template=u.clone().wrap("<div>").parent().html(),r.popover({placement:t.placement,trigger:"manual",title:t.title,content:t.content,html:!0,animation:t.animation,container:t.container,template:t.template,selector:t.element}).popover("show"),e=r.data("bs.popover")?r.data("bs.popover").tip():r.data("popover").tip(),e.attr("id",t.id),this._reposition(e,t),o?this._center(e):void 0},r.prototype._reposition=function(t,r){var f,h,e,c,o,s,u;if(c=t[0].offsetWidth,h=t[0].offsetHeight,u=t.offset(),o=u.left,s=u.top,f=n(i).outerHeight()-u.top-t.outerHeight(),f<0&&(u.top=u.top+f),e=n("html").outerWidth()-u.left-t.outerWidth(),e<0&&(u.left=u.left+e),u.top<0&&(u.top=0),u.left<0&&(u.left=0),t.offset(u),r.placement==="bottom"||r.placement==="top"){if(o!==u.left)return this._replaceArrow(t,(u.left-o)*2,c,"left")}else if(s!==u.top)return this._replaceArrow(t,(u.top-s)*2,h,"top")},r.prototype._center=function(i){return i.css("top",n(t).outerHeight()/2-i.outerHeight()/2)},r.prototype._replaceArrow=function(n,t,i,r){return n.find(".arrow").css(r,t?50*(1-t/i)+"%":"")},r.prototype._scrollIntoView=function(i,r){var u,f,e,o,s,h=this;return i?(u=n(i),f=n(t),e=u.offset().top,s=f.height(),o=Math.max(0,e-s/2),this._debug("Scroll into view. ScrollTop: "+o+". Element offset: "+e+". Window height: "+s+"."),n("body").stop().animate({scrollTop:Math.ceil(o)},function(){return r(),h._debug("Scroll into view. Animation end element offset: "+u.offset().top+". Window height: "+f.height()+".")})):r()},r.prototype._onResize=function(i,r){return n(t).on("resize.tour-"+this._options.name,function(){return clearTimeout(r),r=setTimeout(i,100)})},r.prototype._setupMouseNavigation=function(){var t=this;t=this;n(i).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=next]:not(.disabled)").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=next]:not(.disabled)",function(n){return n.preventDefault(),t.next()});n(i).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=prev]:not(.disabled)").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=prev]:not(.disabled)",function(n){return n.preventDefault(),t.prev()});n(i).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=end]").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=end]",function(n){return n.preventDefault(),t.end()});return n(i).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=pause-resume]").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role=pause-resume]",function(i){var r;return i.preventDefault(),r=n(this),r.text(t._paused?r.data("pause-text"):r.data("resume-text")),t._paused?t.resume():t.pause()})},r.prototype._setupKeyboardNavigation=function(){var t=this;if(this._options.keyboard)return n(i).on("keyup.tour-"+this._options.name,function(n){if(n.which)switch(n.which){case 39:return n.preventDefault(),t._isLast()?t.next():t.end();case 37:if(n.preventDefault(),t._current>0)return t.prev();break;case 27:return n.preventDefault(),t.end()}})},r.prototype._makePromise=function(t){return t&&n.isFunction(t.then)?t:null},r.prototype._callOnPromiseDone=function(n,t,i){var r=this;return n?n.then(function(){return t.call(r,i)}):t.call(this,i)},r.prototype._showBackdrop=function(){if(!this.backdrop.backgroundShown)return this.backdrop=n("<div/>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,n("body").append(this.backdrop)},r.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},r.prototype._hideBackground=function(){return this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1},r.prototype._showOverlayElement=function(t){var u,i,r;if(!this.backdrop.overlayElementShown)return this.backdrop.overlayElementShown=!0,i=n(t),u=n("<div/>"),r=i.offset(),r.top=r.top,r.left=r.left,u.width(i.innerWidth()).height(i.innerHeight()).addClass("tour-step-background").offset(r),i.addClass("tour-step-backdrop"),n("body").append(u),this.backdrop.$element=i,this.backdrop.$background=u},r.prototype._hideOverlayElement=function(){if(this.backdrop.overlayElementShown)return this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1},r.prototype._clearTimer=function(){return t.clearTimeout(this._timer),this._timer=null,this._duration=null},r}(),t.Tour=r})(jQuery,window);
/*
//# sourceMappingURL=bootstrap-tour.min.js.map
*/