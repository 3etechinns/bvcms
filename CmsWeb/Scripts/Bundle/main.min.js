function hideDropdowns(n){var t=n?$(n.target).parents().andSelf():null;t&&t.is(".dropdown2-menu")&&!t.is("A")||($("div.dropdown2-menu").hide(),$(".trigger-dropdown").removeClass("dropdown-open"),$("li.hideAlt").hide())}function dimOff(){$("#darkLayer").hide()}function dimOn(){$("#darkLayer").show()}function CloseAddDialog(){$("#AddDialog").dialog("close");window.location="/Person/Current"}function CloseAddOrgDialog(n){$("#AddDialog").dialog("close");window.location="/Organization/Index/"+n}function searchRequested(n){n.keyCode==13&&searchDone(n)}function searchDone(){mustSearch--;mustSearch<=0&&$("#showSupportForm").button("option","disabled",!1)}function supportShowForm(){$("#reqBody").val("");$("#supportInstructions").css("display","none");$("#supportForm").css("display","block")}function supportOpen(){mustSearch=1;$("#showSupportForm").button("option","disabled",!0);$("#supportInstructions").css("display","block");$("#supportForm").css("display","none");$("#supportDialog").dialog("open")}function supportClose(){$("#supportDialog").dialog("close")}function supportSend(){if($("#supportUrgency")[0].selectedIndex==0){alert("Please select an urgency before submitting your support request");return}$("#supportLastSearch").val($("#gsc-i-id1").val());var n=$(this).closest("form").serialize();$.ajax("/Support/SendSupportRequest",{data:n,type:"POST",success:supportSentComplete})}function supportSentComplete(n){n=="OK"?(alert("Your request has been submitted!"),$("#supportDialog").dialog("close")):alert("There was an error submitting your support request, please try again.")}function supportHelpOpen(){var n=$(this).attr("contentID");$("#supportHelp").html($("#"+n).html());$("#supportHelp").dialog("open")}function supportHelpClose(){$("#supportHelp").dialog("close")}(function(n,t,i){function r(i){e[i]||(e[i]=!0,n.migrateWarnings.push(i),t.console&&console.warn&&!n.migrateMute&&(console.warn("JQMIGRATE: "+i),n.migrateTrace&&console.trace&&console.trace()))}function o(t,i,u,f){if(Object.defineProperty)try{Object.defineProperty(t,i,{configurable:!0,enumerable:!0,get:function(){return r(f),u},set:function(n){r(f);u=n}});return}catch(e){}n._definePropertyBroken=!0;t[i]=u}var e={},l,a,v;n.migrateWarnings=[];!n.migrateMute&&t.console&&console.log&&console.log("JQMIGRATE: Logging is active");n.migrateTrace===i&&(n.migrateTrace=!0);n.migrateReset=function(){e={};n.migrateWarnings.length=0};document.compatMode==="BackCompat"&&r("jQuery is not compatible with Quirks Mode");var s=n("<input/>",{size:1}).attr("size")&&n.attrFn,h=n.attr,g=n.attrHooks.value&&n.attrHooks.value.get||function(){return null},nt=n.attrHooks.value&&n.attrHooks.value.set||function(){return i},tt=/^(?:input|button)$/i,it=/^[238]$/,rt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ut=/^(?:checked|selected)$/i;o(n,"attrFn",s||{},"jQuery.attrFn is deprecated");n.attr=function(t,u,f,e){var o=u.toLowerCase(),c=t&&t.nodeType;return e&&(h.length<4&&r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!it.test(c)&&(s?u in s:n.isFunction(n.fn[u])))?n(t)[u](f):(u==="type"&&f!==i&&tt.test(t.nodeName)&&t.parentNode&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!n.attrHooks[o]&&rt.test(o)&&(n.attrHooks[o]={get:function(t,r){var u,f=n.prop(t,r);return f===!0||typeof f!="boolean"&&(u=t.getAttributeNode(r))&&u.nodeValue!==!1?r.toLowerCase():i},set:function(t,i,r){var u;return i===!1?n.removeAttr(t,r):(u=n.propFix[r]||r,u in t&&(t[u]=!0),t.setAttribute(r,r.toLowerCase())),r}},ut.test(o)&&r("jQuery.fn.attr('"+o+"') may use property instead of attribute")),h.call(n,t,u,f))};n.attrHooks.value={get:function(n,t){var i=(n.nodeName||"").toLowerCase();return i==="button"?g.apply(this,arguments):(i!=="input"&&i!=="option"&&r("jQuery.fn.attr('value') no longer gets properties"),t in n?n.value:null)},set:function(n,t){var i=(n.nodeName||"").toLowerCase();if(i==="button")return nt.apply(this,arguments);i!=="input"&&i!=="option"&&r("jQuery.fn.attr('value', val) no longer sets properties");n.value=t}};var f,u,c=n.fn.init,ft=n.parseJSON,et=/^(?:[^<]*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;n.fn.init=function(t,i,u){var f;return t&&typeof t=="string"&&!n.isPlainObject(i)&&(f=et.exec(t))&&f[1]&&(t.charAt(0)!=="<"&&r("$(html) HTML strings must start with '<' character"),i&&i.context&&(i=i.context),n.parseHTML)?c.call(this,n.parseHTML(n.trim(t),i,!0),i,u):c.apply(this,arguments)};n.fn.init.prototype=n.fn;n.parseJSON=function(n){return!n&&n!==null?(r("jQuery.parseJSON requires a valid JSON string"),null):ft.apply(this,arguments)};n.uaMatch=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}};n.browser||(f=n.uaMatch(navigator.userAgent),u={},f.browser&&(u[f.browser]=!0,u.version=f.version),u.chrome?u.webkit=!0:u.webkit&&(u.safari=!0),n.browser=u);o(n,"browser",n.browser,"jQuery.browser is deprecated");n.sub=function(){function t(n,i){return new t.fn.init(n,i)}n.extend(!0,t,this);t.superclass=this;t.fn=t.prototype=this();t.fn.constructor=t;t.sub=this.sub;t.fn.init=function(r,u){return u&&u instanceof n&&!(u instanceof t)&&(u=t(u)),n.fn.init.call(this,r,u,i)};t.fn.init.prototype=t.fn;var i=t(document);return r("jQuery.sub() is deprecated"),t};n.ajaxSetup({converters:{"text json":n.parseJSON}});l=n.fn.data;n.fn.data=function(t){var f,u,e=this[0];return e&&t==="events"&&arguments.length===1&&(f=n.data(e,t),u=n._data(e,t),(f===i||f===u)&&u!==i)?(r("Use of jQuery.fn.data('events') is deprecated"),u):l.apply(this,arguments)};a=/\/(java|ecma)script/i;v=n.fn.andSelf||n.fn.addBack;n.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),v.apply(this,arguments)};n.clean||(n.clean=function(t,i,u,f){i=i||document;i=!i.nodeType&&i[0]||i;i=i.ownerDocument||i;r("jQuery.clean() is deprecated");var o,e,h,c,s=[];if(n.merge(s,n.buildFragment(t,i).childNodes),u)for(h=function(n){if(!n.type||a.test(n.type))return f?f.push(n.parentNode?n.parentNode.removeChild(n):n):u.appendChild(n)},o=0;(e=s[o])!=null;o++)n.nodeName(e,"script")&&h(e)||(u.appendChild(e),typeof e.getElementsByTagName!="undefined"&&(c=n.grep(n.merge([],e.getElementsByTagName("script")),h),s.splice.apply(s,[o+1,0].concat(c)),o+=c.length));return s});var ot=n.event.add,st=n.event.remove,ht=n.event.trigger,ct=n.fn.toggle,y=n.fn.live,p=n.fn.die,w="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",b=new RegExp("\\b(?:"+w+")\\b"),k=/(?:^|\s)hover(\.\S+|)\b/,d=function(t){return typeof t!="string"||n.event.special.hover?t:(k.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(k,"mouseenter$1 mouseleave$1"))};n.event.props&&n.event.props[0]!=="attrChange"&&n.event.props.unshift("attrChange","attrName","relatedNode","srcElement");n.event.dispatch&&o(n.event,"handle",n.event.dispatch,"jQuery.event.handle is undocumented and deprecated");n.event.add=function(n,t,i,u,f){n!==document&&b.test(t)&&r("AJAX events should be attached to document: "+t);ot.call(this,n,d(t||""),i,u,f)};n.event.remove=function(n,t,i,r,u){st.call(this,n,d(t)||"",i,r,u)};n.fn.error=function(){var n=Array.prototype.slice.call(arguments,0);return(r("jQuery.fn.error() is deprecated"),n.splice(0,0,"error"),arguments.length)?this.bind.apply(this,n):(this.triggerHandler.apply(this,n),this)};n.fn.toggle=function(t,i){if(!n.isFunction(t)||!n.isFunction(i))return ct.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var u=arguments,e=t.guid||n.guid++,f=0,o=function(i){var r=(n._data(this,"lastToggle"+t.guid)||0)%f;return n._data(this,"lastToggle"+t.guid,r+1),i.preventDefault(),u[r].apply(this,arguments)||!1};for(o.guid=e;f<u.length;)u[f++].guid=e;return this.click(o)};n.fn.live=function(t,i,u){if(r("jQuery.fn.live() is deprecated"),y)return y.apply(this,arguments);n(this.context).on(t,this.selector,i,u);return this};n.fn.die=function(t,i){return(r("jQuery.fn.die() is deprecated"),p)?p.apply(this,arguments):(n(this.context).off(t,this.selector||"**",i),this)};n.event.trigger=function(n,t,i,u){return i||b.test(n)||r("Global events are undocumented and deprecated"),ht.call(this,n,t,i||document,u)};n.each(w.split("|"),function(t,i){n.event.special[i]={setup:function(){var t=this;return t!==document&&(n.event.add(document,i+"."+n.guid,function(){n.event.trigger(i,null,t,!0)}),n._data(this,i,n.guid++)),!1},teardown:function(){return this!==document&&n.event.remove(document,i+"."+n._data(this,i)),!1}}})})(jQuery,window);jQuery.cookie=function(n,t,i){var u,r,f,e;return arguments.length>1&&String(t)!=="[object Object]"?(i=jQuery.extend({},i),(t===null||t===undefined)&&(i.expires=-1),typeof i.expires=="number"&&(u=i.expires,r=i.expires=new Date,r.setDate(r.getDate()+u)),t=String(t),document.cookie=[encodeURIComponent(n),"=",i.raw?t:encodeURIComponent(t),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")):(i=t||{},e=i.raw?function(n){return n}:decodeURIComponent,(f=new RegExp("(?:^|; )"+encodeURIComponent(n)+"=([^;]*)").exec(document.cookie))?e(f[1]):null)},function(){"use strict";function n(n){function s(s,h){var rt,ut,p=s==window,l=h&&h.message!==undefined?h.message:undefined,g,k,d,tt,nt,w,b,it,ft,et,at;if(h=n.extend({},n.blockUI.defaults,h||{}),!h.ignoreIfBlocked||!n(s).data("blockUI.isBlocked")){if(h.overlayCSS=n.extend({},n.blockUI.defaults.overlayCSS,h.overlayCSS||{}),rt=n.extend({},n.blockUI.defaults.css,h.css||{}),h.onOverlayClick&&(h.overlayCSS.cursor="pointer"),ut=n.extend({},n.blockUI.defaults.themedCSS,h.themedCSS||{}),l=l===undefined?h.message:l,p&&t&&e(window,{fadeOut:0}),l&&typeof l!="string"&&(l.parentNode||l.jquery)&&(g=l.jquery?l[0]:l,k={},n(s).data("blockUI.history",k),k.el=g,k.parent=g.parentNode,k.display=g.style.display,k.position=g.style.position,k.parent&&k.parent.removeChild(g)),n(s).data("blockUI.onUnblock",h.onUnblock),d=h.baseZ,tt=f||h.forceIframe?n('<iframe class="blockUI" style="z-index:'+d+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+h.iframeSrc+'"><\/iframe>'):n('<div class="blockUI" style="display:none"><\/div>'),nt=h.theme?n('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+d+++';display:none"><\/div>'):n('<div class="blockUI blockOverlay" style="z-index:'+d+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"><\/div>'),h.theme&&p?(b='<div class="blockUI '+h.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(d+10)+';display:none;position:fixed">',h.title&&(b+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(h.title||"&nbsp;")+"<\/div>"),b+='<div class="ui-widget-content ui-dialog-content"><\/div>',b+="<\/div>"):h.theme?(b='<div class="blockUI '+h.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(d+10)+';display:none;position:absolute">',h.title&&(b+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(h.title||"&nbsp;")+"<\/div>"),b+='<div class="ui-widget-content ui-dialog-content"><\/div>',b+="<\/div>"):b=p?'<div class="blockUI '+h.blockMsgClass+' blockPage" style="z-index:'+(d+10)+';display:none;position:fixed"><\/div>':'<div class="blockUI '+h.blockMsgClass+' blockElement" style="z-index:'+(d+10)+';display:none;position:absolute"><\/div>',w=n(b),l&&(h.theme?(w.css(ut),w.addClass("ui-widget-content")):w.css(rt)),h.theme||nt.css(h.overlayCSS),nt.css("position",p?"fixed":"absolute"),(f||h.forceIframe)&&tt.css("opacity",0),it=[tt,nt,w],ft=p?n("body"):n(s),n.each(it,function(){this.appendTo(ft)}),h.theme&&h.draggable&&n.fn.draggable&&w.draggable({handle:".ui-dialog-titlebar",cancel:"li"}),et=v&&(!n.support.boxModel||n("object,embed",p?null:s).length>0),o||et){if(p&&h.allowBodyStretch&&n.support.boxModel&&n("html,body").css("height","100%"),(o||!n.support.boxModel)&&!p)var ot=r(s,"borderTopWidth"),st=r(s,"borderLeftWidth"),ht=ot?"(0 - "+ot+")":0,ct=st?"(0 - "+st+")":0;n.each(it,function(n,t){var i=t[0].style,r,u;i.position="absolute";n<2?(p?i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+h.quirksmodeOffsetHack+') + "px"'):i.setExpression("height",'this.parentNode.offsetHeight + "px"'),p?i.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):i.setExpression("width",'this.parentNode.offsetWidth + "px"'),ct&&i.setExpression("left",ct),ht&&i.setExpression("top",ht)):h.centerY?(p&&i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),i.marginTop=0):!h.centerY&&p&&(r=h.css&&h.css.top?parseInt(h.css.top,10):0,u="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+r+') + "px"',i.setExpression("top",u))})}if(l&&(h.theme?w.find(".ui-widget-content").append(l):w.append(l),(l.jquery||l.nodeType)&&n(l).show()),(f||h.forceIframe)&&h.showOverlay&&tt.show(),h.fadeIn){var lt=h.onBlock?h.onBlock:u,vt=h.showOverlay&&!l?lt:u,yt=l?lt:u;h.showOverlay&&nt._fadeIn(h.fadeIn,vt);l&&w._fadeIn(h.fadeIn,yt)}else h.showOverlay&&nt.show(),l&&w.show(),h.onBlock&&h.onBlock();c(1,s,h);p?(t=w[0],i=n(":input:enabled:visible",t),h.focusInput&&setTimeout(a,20)):y(w[0],h.centerX,h.centerY);h.timeout&&(at=setTimeout(function(){p?n.unblockUI(h):n(s).unblock(h)},h.timeout),n(s).data("blockUI.timeout",at))}}function e(r,u){var o=r==window,e=n(r),s=e.data("blockUI.history"),l=e.data("blockUI.timeout"),f;l&&(clearTimeout(l),e.removeData("blockUI.timeout"));u=n.extend({},n.blockUI.defaults,u||{});c(0,r,u);u.onUnblock===null&&(u.onUnblock=e.data("blockUI.onUnblock"),e.removeData("blockUI.onUnblock"));f=o?n("body").children().filter(".blockUI").add("body > .blockUI"):e.find(">.blockUI");u.cursorReset&&(f.length>1&&(f[1].style.cursor=u.cursorReset),f.length>2&&(f[2].style.cursor=u.cursorReset));o&&(t=i=null);u.fadeOut?(f.fadeOut(u.fadeOut),setTimeout(function(){h(f,s,u,r)},u.fadeOut)):h(f,s,u,r)}function h(t,i,r,u){var e=n(u);if(t.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),i&&i.el&&(i.el.style.display=i.display,i.el.style.position=i.position,i.parent&&i.parent.appendChild(i.el),e.removeData("blockUI.history")),e.data("blockUI.static")&&e.css("position","static"),typeof r.onUnblock=="function")r.onUnblock(u,r);var f=n(document.body),o=f.width(),s=f[0].style.width;f.width(o-1).width(o);f[0].style.width=s}function c(i,r,u){var e=r==window,o=n(r),f;(i||(!e||t)&&(e||o.data("blockUI.isBlocked")))&&(o.data("blockUI.isBlocked",i),u.bindEvents&&(!i||u.showOverlay))&&(f="mousedown mouseup keydown keypress keyup touchstart touchend touchmove",i?n(document).bind(f,u,l):n(document).unbind(f,l))}function l(r){var u,f;if(r.keyCode&&r.keyCode==9&&t&&r.data.constrainTabKey){var e=i,s=!r.shiftKey&&r.target===e[e.length-1],o=r.shiftKey&&r.target===e[0];if(s||o)return setTimeout(function(){a(o)},10),!1}return(u=r.data,f=n(r.target),f.hasClass("blockOverlay")&&u.onOverlayClick&&u.onOverlayClick(),f.parents("div."+u.blockMsgClass).length>0)?!0:f.parents().children().filter("div.blockUI").length===0}function a(n){if(i){var t=i[n===!0?i.length-1:0];t&&t.focus()}}function y(n,t,i){var u=n.parentNode,f=n.style,e=(u.offsetWidth-n.offsetWidth)/2-r(u,"borderLeftWidth"),o=(u.offsetHeight-n.offsetHeight)/2-r(u,"borderTopWidth");t&&(f.left=e>0?e+"px":"0");i&&(f.top=o>0?o+"px":"0")}function r(t,i){return parseInt(n.css(t,i),10)||0}var t,i;n.fn._fadeIn=n.fn.fadeIn;var u=n.noop||function(){},f=/MSIE/.test(navigator.userAgent),o=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),p=document.documentMode||0,v=n.isFunction(document.createElement("div").style.setExpression);n.blockUI=function(n){s(window,n)};n.unblockUI=function(n){e(window,n)};n.growlUI=function(t,i,r,u){var f=n('<div class="growlUI"><\/div>');t&&f.append("<h1>"+t+"<\/h1>");i&&f.append("<h2>"+i+"<\/h2>");r===undefined&&(r=3e3);n.blockUI({message:f,fadeIn:700,fadeOut:1e3,centerY:!1,timeout:r,showOverlay:!1,onUnblock:u,css:n.blockUI.defaults.growlCSS})};n.fn.block=function(t){var i=n.extend({},n.blockUI.defaults,t||{});return this.each(function(){var t=n(this);i.ignoreIfBlocked&&t.data("blockUI.isBlocked")||t.unblock({fadeOut:0})}),this.each(function(){n.css(this,"position")=="static"&&(this.style.position="relative",n(this).data("blockUI.static",!0));this.style.zoom=1;s(this,t)})};n.fn.unblock=function(n){return this.each(function(){e(this,n)})};n.blockUI.version=2.56;n.blockUI.defaults={message:"<h1>Please wait...<\/h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};t=null;i=[]}typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],n):n(jQuery)}(),function(n){function i(t){var i=t||window.event,e=[].slice.call(arguments,1),r=0,f=0,u=0;return t=n.event.fix(i),t.type="mousewheel",t.wheelDelta&&(r=t.wheelDelta/120),t.detail&&(r=-t.detail/3),u=r,i.axis!==undefined&&i.axis===i.HORIZONTAL_AXIS&&(u=0,f=-1*r),i.wheelDeltaY!==undefined&&(u=i.wheelDeltaY/120),i.wheelDeltaX!==undefined&&(f=i.wheelDeltaX/-120),e.unshift(t,r,f,u),n.event.handle.apply(this,e)}var t=["DOMMouseScroll","mousewheel"];n.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var n=t.length;n;)this.addEventListener(t[--n],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var n=t.length;n;)this.removeEventListener(t[--n],i,!1);else this.onmousewheel=null}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}(jQuery),function(n,t,i){n.fn.jScrollPane=function(t){function u(t,r){function ci(r){var h,v,y,nt,tt,k,d,g;if(u=r,e===i)d=t.scrollTop(),g=t.scrollLeft(),t.css({overflow:"hidden",padding:0}),s=t.innerWidth()+et,o=t.innerHeight(),t.width(s),e=n('<div class="jspPane" />').css("padding",vi).append(t.children()),f=n('<div class="jspContainer" />').css({width:s+"px",height:o+"px"}).append(e).appendTo(t);else{if(t.css("width",""),k=t.innerWidth()+et!=s||t.outerHeight()!=o,k&&(s=t.innerWidth()+et,o=t.innerHeight(),f.css({width:s+"px",height:o+"px"})),!k&&yi==p&&e.outerHeight()==a){t.width(s);return}yi=p;e.css("width","");t.width(s);f.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}h=e.clone(!1,!1).css("position","absolute");v=n('<div style="width:1px; position: relative;" />').append(h);n("body").append(v);p=Math.max(e.outerWidth(),h.outerWidth());v.remove();a=e.outerHeight();ui=p/s;dt=a/o;b=dt>1;w=ui>1;w||b?(t.addClass("jspScrollable"),y=u.maintainPosition&&(c||l),y&&(nt=st(),tt=ht()),tr(),ir(),rr(),y&&(at(nt,!1),ut(tt,!1)),cr(),sr(),pr(),u.enableKeyboardNavigation&&ar(),u.clickOnTrack&&fr(),yr(),u.hijackInternalLinks&&nr()):(t.removeClass("jspScrollable"),e.css({top:0,width:f.width()-et}),hr(),lr(),vr(),ki(),gi());u.autoReinitialise&&!gt?gt=setInterval(function(){ci(u)},u.autoReinitialiseDelay):!u.autoReinitialise&&gt&&clearInterval(gt);d&&t.scrollTop(0)&&ut(d,!1);g&&t.scrollLeft(0)&&at(g,!1);t.trigger("jsp-initialised",[w||b])}function tr(){b&&(f.append(n('<div class="jspVerticalBar" />').append(n('<div class="jspCap jspCapTop" />'),n('<div class="jspTrack" />').append(n('<div class="jspDrag" />').append(n('<div class="jspDragTop" />'),n('<div class="jspDragBottom" />'))),n('<div class="jspCap jspCapBottom" />'))),fi=f.find(">.jspVerticalBar"),d=fi.find(">.jspTrack"),v=d.find(">.jspDrag"),u.showArrows&&(yt=n('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",rt(0,-1)).bind("click.jsp",vt),pt=n('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",rt(0,1)).bind("click.jsp",vt),u.arrowScrollOnHover&&(yt.bind("mouseover.jsp",rt(0,-1,yt)),pt.bind("mouseover.jsp",rt(0,1,pt))),bi(d,u.verticalArrowPositions,yt,pt)),ct=o,f.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ct-=n(this).outerHeight()}),v.hover(function(){v.addClass("jspHover")},function(){v.removeClass("jspHover")}).bind("mousedown.jsp",function(t){n("html").bind("dragstart.jsp selectstart.jsp",vt);v.addClass("jspActive");var i=t.pageY-v.position().top;return n("html").bind("mousemove.jsp",function(n){lt(n.pageY-i,!1)}).bind("mouseup.jsp mouseleave.jsp",di),!1}),pi())}function pi(){d.height(ct+"px");c=0;ei=u.verticalGutter+d.outerWidth();e.width(s-ei-et);fi.position().left===0&&e.css("margin-left",ei+"px")}function ir(){w&&(f.append(n('<div class="jspHorizontalBar" />').append(n('<div class="jspCap jspCapLeft" />'),n('<div class="jspTrack" />').append(n('<div class="jspDrag" />').append(n('<div class="jspDragLeft" />'),n('<div class="jspDragRight" />'))),n('<div class="jspCap jspCapRight" />'))),oi=f.find(">.jspHorizontalBar"),g=oi.find(">.jspTrack"),y=g.find(">.jspDrag"),u.showArrows&&(wt=n('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",rt(-1,0)).bind("click.jsp",vt),bt=n('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",rt(1,0)).bind("click.jsp",vt),u.arrowScrollOnHover&&(wt.bind("mouseover.jsp",rt(-1,0,wt)),bt.bind("mouseover.jsp",rt(1,0,bt))),bi(g,u.horizontalArrowPositions,wt,bt)),y.hover(function(){y.addClass("jspHover")},function(){y.removeClass("jspHover")}).bind("mousedown.jsp",function(t){n("html").bind("dragstart.jsp selectstart.jsp",vt);y.addClass("jspActive");var i=t.pageX-y.position().left;return n("html").bind("mousemove.jsp",function(n){ot(n.pageX-i,!1)}).bind("mouseup.jsp mouseleave.jsp",di),!1}),ft=f.innerWidth(),wi())}function wi(){f.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ft-=n(this).outerWidth()});g.width(ft+"px");l=0}function rr(){if(w&&b){var t=g.outerHeight(),i=d.outerWidth();ct-=t;n(oi).find(">.jspCap:visible,>.jspArrow").each(function(){ft+=n(this).outerWidth()});ft-=i;o-=i;s-=t;g.parent().append(n('<div class="jspCorner" />').css("width",t+"px"));pi();wi()}w&&e.width(f.outerWidth()-et+"px");a=e.outerHeight();dt=a/o;w&&(it=Math.ceil(1/ui*ft),it>u.horizontalDragMaxWidth?it=u.horizontalDragMaxWidth:it<u.horizontalDragMinWidth&&(it=u.horizontalDragMinWidth),y.width(it+"px"),nt=ft-it,ai(l));b&&(tt=Math.ceil(1/dt*ct),tt>u.verticalDragMaxHeight?tt=u.verticalDragMaxHeight:tt<u.verticalDragMinHeight&&(tt=u.verticalDragMinHeight),v.height(tt+"px"),k=ct-tt,li(c))}function bi(n,t,i,r){var u="before",f="after",e;t=="os"&&(t=/Mac/.test(navigator.platform)?"after":"split");t==u?f=t:t==f&&(u=t,e=i,i=r,r=e);n[u](i)[f](r)}function rt(n,t,i){return function(){return ur(n,t,this,i),this.blur(),!1}}function ur(t,i,r,f){r=n(r).addClass("jspActive");var o,e,s=!0,c=function(){t!==0&&h.scrollByX(t*u.arrowButtonSpeed);i!==0&&h.scrollByY(i*u.arrowButtonSpeed);e=setTimeout(c,s?u.initialDelay:u.arrowRepeatFreq);s=!1};c();o=f?"mouseout.jsp":"mouseup.jsp";f=f||n("html");f.bind(o,function(){r.removeClass("jspActive");e&&clearTimeout(e);e=null;f.unbind(o)})}function fr(){ki();b&&d.bind("mousedown.jsp",function(t){if(t.originalTarget===i||t.originalTarget==t.currentTarget){var e=n(this),y=e.offset(),s=t.pageY-y.top-c,r,l=!0,v=function(){var p=e.offset(),n=t.pageY-p.top-tt/2,i=o*u.scrollPagePercent,y=k*i/(a-o);if(s<0)c-y>n?h.scrollByY(-i):lt(n);else if(s>0)c+y<n?h.scrollByY(i):lt(n);else{f();return}r=setTimeout(v,l?u.initialDelay:u.trackClickRepeatFreq);l=!1},f=function(){r&&clearTimeout(r);r=null;n(document).unbind("mouseup.jsp",f)};return v(),n(document).bind("mouseup.jsp",f),!1}});w&&g.bind("mousedown.jsp",function(t){if(t.originalTarget===i||t.originalTarget==t.currentTarget){var e=n(this),v=e.offset(),o=t.pageX-v.left-l,r,c=!0,a=function(){var y=e.offset(),n=t.pageX-y.left-it/2,i=s*u.scrollPagePercent,v=nt*i/(p-s);if(o<0)l-v>n?h.scrollByX(-i):ot(n);else if(o>0)l+v<n?h.scrollByX(i):ot(n);else{f();return}r=setTimeout(a,c?u.initialDelay:u.trackClickRepeatFreq);c=!1},f=function(){r&&clearTimeout(r);r=null;n(document).unbind("mouseup.jsp",f)};return a(),n(document).bind("mouseup.jsp",f),!1}})}function ki(){g&&g.unbind("mousedown.jsp");d&&d.unbind("mousedown.jsp")}function di(){n("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");v&&v.removeClass("jspActive");y&&y.removeClass("jspActive")}function lt(n,t){b&&(n<0?n=0:n>k&&(n=k),t===i&&(t=u.animateScroll),t?h.animate(v,"top",n,li):(v.css("top",n),li(n)))}function li(n){n===i&&(n=v.position().top);f.scrollTop(0);c=n;var r=c===0,u=c==k,h=n/k,s=-h*(a-o);(ni!=r||ii!=u)&&(ni=r,ii=u,t.trigger("jsp-arrow-change",[ni,ii,ti,ri]));er(r,u);e.css("top",s);t.trigger("jsp-scroll-y",[-s,r,u]).trigger("scroll")}function ot(n,t){w&&(n<0?n=0:n>nt&&(n=nt),t===i&&(t=u.animateScroll),t?h.animate(y,"left",n,ai):(y.css("left",n),ai(n)))}function ai(n){n===i&&(n=y.position().left);f.scrollTop(0);l=n;var r=l===0,u=l==nt,h=n/nt,o=-h*(p-s);(ti!=r||ri!=u)&&(ti=r,ri=u,t.trigger("jsp-arrow-change",[ni,ii,ti,ri]));or(r,u);e.css("left",o);t.trigger("jsp-scroll-x",[-o,r,u]).trigger("scroll")}function er(n,t){u.showArrows&&(yt[n?"addClass":"removeClass"]("jspDisabled"),pt[t?"addClass":"removeClass"]("jspDisabled"))}function or(n,t){u.showArrows&&(wt[n?"addClass":"removeClass"]("jspDisabled"),bt[t?"addClass":"removeClass"]("jspDisabled"))}function ut(n,t){var i=n/(a-o);lt(i*k,t)}function at(n,t){var i=n/(p-s);ot(i*nt,t)}function kt(t,i,r){var e,v,y,h=0,c=0,p,w,b,l,a;try{e=n(t)}catch(k){return}for(v=e.outerHeight(),y=e.outerWidth(),f.scrollTop(0),f.scrollLeft(0);!e.is(".jspPane");)if(h+=e.position().top,c+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;p=ht();w=p+o;h<p||i?l=h-u.verticalGutter:h+v>w&&(l=h-o+v+u.verticalGutter);l&&ut(l,r);viewportLeft=st();b=viewportLeft+s;c<viewportLeft||i?a=c-u.horizontalGutter:c+y>b&&(a=c-s+y+u.horizontalGutter);a&&at(a,r)}function st(){return-e.position().left}function ht(){return-e.position().top}function sr(){f.unbind(hi).bind(hi,function(n,t,i,r){var f=l,e=c;return h.scrollBy(i*u.mouseWheelSpeed,-r*u.mouseWheelSpeed,!1),f==l&&e==c})}function hr(){f.unbind(hi)}function vt(){return!1}function cr(){e.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(n){kt(n.target,!1)})}function lr(){e.find(":input,a").unbind("focus.jsp")}function ar(){function r(){var t=l,r=c;switch(n){case 40:h.scrollByY(u.keyboardSpeed,!1);break;case 38:h.scrollByY(-u.keyboardSpeed,!1);break;case 34:case 32:h.scrollByY(o*u.scrollPagePercent,!1);break;case 33:h.scrollByY(-o*u.scrollPagePercent,!1);break;case 39:h.scrollByX(u.keyboardSpeed,!1);break;case 37:h.scrollByX(-u.keyboardSpeed,!1)}return i=t!=l||r!=c}var n,i;e.focus(function(){t.focus()});t.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target===this){var u=l,f=c;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:n=t.keyCode;r();break;case 35:ut(a-o);n=null;break;case 36:ut(0);n=null}return i=t.keyCode==n&&u!=l||f!=c,!i}}).bind("keypress.jsp",function(t){return t.keyCode==n&&r(),!i});u.hideFocus?(t.css("outline","none"),"hideFocus"in f[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in f[0]&&t.attr("hideFocus",!1))}function vr(){t.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function yr(){if(location.hash&&location.hash.length>1){var t,i;try{t=n(location.hash)}catch(r){return}t.length&&e.find(location.hash)&&(f.scrollTop()===0?i=setInterval(function(){f.scrollTop()>0&&(kt(location.hash,!0),n(document).scrollTop(f.position().top),clearInterval(i))},50):(kt(location.hash,!0),n(document).scrollTop(f.position().top)))}}function gi(){n("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function nr(){gi();n("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var t=this.href.split("#"),n;if(t.length>1&&(n=t[1],n.length>0&&e.find("#"+n).length>0))return kt("#"+n,!0),!1})}function pr(){var u,e,t,i,n,r=!1;f.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(f){var o=f.originalEvent.touches[0];u=st();e=ht();t=o.pageX;i=o.pageY;n=!1;r=!0}).bind("touchmove.jsp",function(f){if(r){var o=f.originalEvent.touches[0],s=l,a=c;return h.scrollTo(u+t-o.pageX,e+i-o.pageY),n=n||Math.abs(t-o.pageX)>5||Math.abs(i-o.pageY)>5,s==l&&a==c}}).bind("touchend.jsp",function(){r=!1}).bind("click.jsp-touchclick",function(){if(n)return n=!1,!1})}function wr(){var n=ht(),i=st();t.removeClass("jspScrollable").unbind(".jsp");t.replaceWith(si.append(e.children()));si.scrollTop(n);si.scrollLeft(i)}var u,h=this,e,s,o,f,p,a,ui,dt,b,w,v,k,c,y,nt,l,fi,d,ei,ct,tt,yt,pt,oi,g,ft,it,wt,bt,gt,vi,et,yi,ni=!0,ti=!0,ii=!1,ri=!1,si=t.clone(!1,!1).empty(),hi=n.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";vi=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft");et=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0);n.extend(h,{reinitialise:function(t){t=n.extend({},u,t);ci(t)},scrollToElement:function(n,t,i){kt(n,t,i)},scrollTo:function(n,t,i){at(n,i);ut(t,i)},scrollToX:function(n,t){at(n,t)},scrollToY:function(n,t){ut(n,t)},scrollToPercentX:function(n,t){at(n*(p-s),t)},scrollToPercentY:function(n,t){ut(n*(a-o),t)},scrollBy:function(n,t,i){h.scrollByX(n,i);h.scrollByY(t,i)},scrollByX:function(n,t){var i=st()+n,r=i/(p-s);ot(r*nt,t)},scrollByY:function(n,t){var i=ht()+n,r=i/(a-o);lt(r*k,t)},positionDragX:function(n,t){ot(n,t)},positionDragY:function(n,t){ot(n,t)},animate:function(n,t,i,r){var f={};f[t]=i;n.animate(f,{duration:u.animateDuration,ease:u.animateEase,queue:!1,step:r})},getContentPositionX:function(){return st()},getContentPositionY:function(){return ht()},getContentWidth:function(){return p()},getContentHeight:function(){return a()},getPercentScrolledX:function(){return st()/(p-s)},getPercentScrolledY:function(){return ht()/(a-o)},getIsScrollableH:function(){return w},getIsScrollableV:function(){return b},getContentPane:function(){return e},scrollToBottom:function(n){lt(k,n)},hijackInternalLinks:function(){nr()},destroy:function(){wr()}});ci(r)}t=n.extend({},n.fn.jScrollPane.defaults,t);n.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed});var r;return this.each(function(){var i=n(this),f=i.data("jsp");f?f.reinitialise(t):(f=new u(i,t),i.data("jsp",f));r=r?r.add(i):i}),r};n.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),function(n){n.fn.editable=function(t,i){if("disable"==t){n(this).data("disabled.editable",!0);return}if("enable"==t){n(this).data("disabled.editable",!1);return}if("destroy"==t){n(this).unbind(n(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var r=n.extend({},n.fn.editable.defaults,{target:t},i),o=n.editable.types[r.type].plugin||function(){},s=n.editable.types[r.type].submit||function(){},h=n.editable.types[r.type].buttons||n.editable.types.defaults.buttons,f=n.editable.types[r.type].content||n.editable.types.defaults.content,c=n.editable.types[r.type].element||n.editable.types.defaults.element,u=n.editable.types[r.type].reset||n.editable.types.defaults.reset,e=r.callback||function(){},l=r.onedit||function(){},a=r.onsubmit||function(){},v=r.onreset||function(){},y=r.onerror||u;return r.tooltip&&n(this).attr("title",r.tooltip),r.autowidth="auto"==r.width,r.autoheight="auto"==r.height,this.each(function(){var t=this,i=n(t).width(),p=n(t).height();n(this).data("event.editable",r.event);n.trim(n(this).html())||n(this).html(r.placeholder);n(this).bind(r.event,function(v){var w,b,d,g,k;!0!==n(this).data("disabled.editable")&&(t.editing||!1!==l.apply(this,[r,t])&&(v.preventDefault(),v.stopPropagation(),r.tooltip&&n(t).removeAttr("title"),0==n(t).width()?(r.width=i,r.height=p):(r.width!="none"&&(r.width=r.autowidth?n(t).width():r.width),r.height!="none"&&(r.height=r.autoheight?n(t).height():r.height)),n(this).html().toLowerCase().replace(/(;|")/g,"")==r.placeholder.toLowerCase().replace(/(;|")/g,"")&&n(this).html(""),t.editing=!0,t.revert=n(t).html(),n(t).html(""),w=n("<form />"),r.cssclass&&("inherit"==r.cssclass?w.attr("class",n(t).attr("class")):w.attr("class",r.cssclass)),r.style&&("inherit"==r.style?(w.attr("style",n(t).attr("style")),w.css("display",n(t).css("display"))):w.attr("style",r.style)),b=c.apply(w,[r,t]),r.loadurl?(k=setTimeout(function(){b.disabled=!0;f.apply(w,[r.loadtext,r,t])},100),g={},g[r.id]=t.id,n.isFunction(r.loaddata)?n.extend(g,r.loaddata.apply(t,[t.revert,r])):n.extend(g,r.loaddata),n.ajax({type:r.loadtype,url:r.loadurl,data:g,async:!1,success:function(n){window.clearTimeout(k);d=n;b.disabled=!1}})):r.data?(d=r.data,n.isFunction(r.data)&&(d=r.data.apply(t,[t.revert,r]))):d=t.revert,f.apply(w,[d,r,t]),b.attr("name",r.name),h.apply(w,[r,t]),n(t).append(w),o.apply(w,[r,t]),n(":input:visible:enabled:first",w).focus(),r.select&&b.select(),b.keydown(function(n){n.keyCode==27&&(n.preventDefault(),u.apply(w,[r,t]))}),"cancel"==r.onblur?b.blur(function(){k=setTimeout(function(){u.apply(w,[r,t])},500)}):"submit"==r.onblur?b.blur(function(){k=setTimeout(function(){w.submit()},200)}):n.isFunction(r.onblur)?b.blur(function(){r.onblur.apply(t,[b.val(),r])}):b.blur(function(){}),w.submit(function(i){var o,u,f;return k&&clearTimeout(k),i.preventDefault(),!1!==a.apply(w,[r,t])&&!1!==s.apply(w,[r,t])&&(n.isFunction(r.target)?(o=r.target.apply(t,[b.val(),r]),n(t).html(o),t.editing=!1,e.apply(t,[t.innerHTML,r]),n.trim(n(t).html())||n(t).html(r.placeholder)):(u={},u[r.name]=b.val(),u[r.id]=t.id,n.isFunction(r.submitdata)?n.extend(u,r.submitdata.apply(t,[t.revert,r])):n.extend(u,r.submitdata),"PUT"==r.method&&(u._method="put"),n(t).html(r.indicator),f={type:"POST",data:u,dataType:"html",url:r.target,success:function(i){f.dataType=="html"&&n(t).html(i);t.editing=!1;e.apply(t,[i,r]);n.trim(n(t).html())||n(t).html(r.placeholder)},error:function(n){y.apply(w,[r,t,n])}},n.extend(f,r.ajaxoptions),n.ajax(f))),n(t).attr("title",r.tooltip),!1})))});this.reset=function(i){this.editing&&!1!==v.apply(i,[r,t])&&(n(t).html(t.revert),t.editing=!1,n.trim(n(t).html())||n(t).html(r.placeholder),r.tooltip&&n(t).attr("title",r.tooltip))}})};n.editable={types:{defaults:{element:function(){var t=n('<input type="hidden"><\/input>');return n(this).append(t),t},content:function(t){n(":input:first",this).val(t)},reset:function(n,t){t.reset(this)},buttons:function(t,i){var f=this,r,u;t.submit&&(t.submit.match(/>$/)?r=n(t.submit).click(function(){r.attr("type")!="submit"&&f.submit()}):(r=n('<button type="submit" />'),r.html(t.submit)),n(this).append(r));t.cancel&&(t.cancel.match(/>$/)?u=n(t.cancel):(u=n('<button type="cancel" />'),u.html(t.cancel)),n(this).append(u),n(u).click(function(){var r;return r=n.isFunction(n.editable.types[t.type].reset)?n.editable.types[t.type].reset:n.editable.types.defaults.reset,r.apply(f,[t,i]),!1}))}},text:{element:function(t){var i=n("<input />");return t.width!="none"&&i.width(t.width),t.height!="none"&&i.height(t.height),i.attr("autocomplete","off"),n(this).append(i),i}},textarea:{element:function(t){var i=n("<textarea />");return t.rows?i.attr("rows",t.rows):t.height!="none"&&i.height(t.height),t.cols?i.attr("cols",t.cols):t.width!="none"&&i.width(t.width),n(this).append(i),i}},select:{element:function(){var t=n("<select />");return n(this).append(t),t},content:function(data,settings,original){var json,key,option;String==data.constructor?eval("var json = "+data):json=data;for(key in json)json.hasOwnProperty(key)&&"selected"!=key&&(option=n("<option />").val(key).append(json[key]),n("select",this).append(option));n("select",this).children().each(function(){(n(this).val()==json.selected||n(this).text()==n.trim(original.revert))&&n(this).attr("selected","selected")})}}},addInputType:function(t,i){n.editable.types[t]=i}};n.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}}(jQuery),function(n){n.extend(n.fn,{validate:function(t){if(!this.length){t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.");return}var i=n.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new n.validator(t,this[0]),n.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target);n(t.target).hasClass("cancel")&&(i.cancelSubmit=!0);n(t.target).attr("formnovalidate")!==undefined&&(i.cancelSubmit=!0)}),this.submit(function(t){function r(){var r;return i.settings.submitHandler?(i.submitButton&&(r=n("<input type='hidden'/>").attr("name",i.submitButton.name).val(n(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&r.remove(),!1):!0}return(i.settings.debug&&t.preventDefault(),i.cancelSubmit)?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})),i)},valid:function(){if(n(this[0]).is("form"))return this.validate().form();var t=!0,i=n(this[0].form).validate();return this.each(function(){t=t&&i.element(this)}),t},removeAttrs:function(t){var i={},r=this;return n.each(t.split(/\s/),function(n,t){i[t]=r.attr(t);r.removeAttr(t)}),i},rules:function(t,i){var r=this[0],o,u,h;if(t){var e=n.data(r.form,"validator").settings,s=e.rules,f=n.validator.staticRules(r);switch(t){case"add":n.extend(f,n.validator.normalizeRule(i));delete f.messages;s[r.name]=f;i.messages&&(e.messages[r.name]=n.extend(e.messages[r.name],i.messages));break;case"remove":return i?(o={},n.each(i.split(/\s/),function(n,t){o[t]=f[t];delete f[t]}),o):(delete s[r.name],f)}}return u=n.validator.normalizeRules(n.extend({},n.validator.classRules(r),n.validator.attributeRules(r),n.validator.dataRules(r),n.validator.staticRules(r)),r),u.required&&(h=u.required,delete u.required,u=n.extend({required:h},u)),u}});n.extend(n.expr[":"],{blank:function(t){return!n.trim(""+n(t).val())},filled:function(t){return!!n.trim(""+n(t).val())},unchecked:function(t){return!n(t).prop("checked")}});n.validator=function(t,i){this.settings=n.extend(!0,{},n.validator.defaults,t);this.currentForm=i;this.init()};n.validator.format=function(t,i){return arguments.length===1?function(){var i=n.makeArray(arguments);return i.unshift(t),n.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(new RegExp("\\{"+n+"\\}","g"),function(){return i})}),t)};n.extend(n.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(n)).hide())},onfocusout:function(n){!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(n,t){(t.which!==9||this.elementValue(n)!=="")&&(n.name in this.submitted||n===this.lastElement)&&this.element(n)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(t,i,r){t.type==="radio"?this.findByName(t.name).addClass(i).removeClass(r):n(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){t.type==="radio"?this.findByName(t.name).removeClass(i).addClass(r):n(t).removeClass(i).addClass(r)}},setDefaults:function(t){n.extend(n.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function r(t){var i=n.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");i.settings[r]&&i.settings[r].call(i,this[0],t)}var i,t;this.labelContainer=n(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm);this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();i=this.groups={};n.each(this.settings.groups,function(t,r){typeof r=="string"&&(r=r.split(/\s/));n.each(r,function(n,r){i[r]=t})});t=this.settings.rules;n.each(t,function(i,r){t[i]=n.validator.normalizeRule(r)});n(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",r).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",r);this.settings.invalidHandler&&n(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t));this.lastElement=t;this.prepareElement(t);this.currentElements=n(t);var i=this.check(t)!==!1;return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){n.extend(this.errorMap,t);this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=n.grep(this.successList,function(n){return!(n.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var t=0;for(var i in n)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&n.grep(this.errorList,function(n){return n.element.name===t.name}).length===1&&t},elements:function(){var t=this,i={};return n(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return(!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(n(this).rules()))?!1:(i[this.name]=!0,!0)})},clean:function(t){return n(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return n(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=n([]);this.toHide=n([]);this.currentElements=n([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},elementValue:function(t){var r=n(t).attr("type"),i=n(t).val();return r==="radio"||r==="checkbox"?n("input[name='"+n(t).attr("name")+"']:checked").val():typeof i=="string"?i.replace(/\r/g,""):i},check:function(t){var r,u;t=this.validationTargetFor(this.clean(t));var f=n(t).rules(),e=!1,s=this.elementValue(t),i;for(r in f){u={method:r,parameters:f[r]};try{if(i=n.validator.methods[r].call(this,s,t,u.parameters),i==="dependency-mismatch"){e=!0;continue}if(e=!1,i==="pending"){this.toHide=this.toHide.not(this.errorsFor(t));return}if(!i)return this.formatAndAdd(t,u),!1}catch(o){this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+u.method+"' method.",o);throw o;}}if(!e)return this.objectLength(f)&&this.successList.push(t),!0},customDataMessage:function(t,i){return n(t).data("msg-"+i.toLowerCase())||t.attributes&&n(t).attr("data-msg-"+i.toLowerCase())},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var n=0;n<arguments.length;n++)if(arguments[n]!==undefined)return arguments[n];return undefined},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||undefined,n.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"<\/strong>")},formatAndAdd:function(t,i){var r=this.defaultMessage(t,i.method),u=/\$?\{(\d+)\}/g;typeof r=="function"?r=r.call(this,i.parameters,t):u.test(r)&&(r=n.validator.format(r.replace(u,"{$1}"),i.parameters));this.errorList.push({message:r,element:t});this.errorMap[t.name]=r;this.submitted[t.name]=r},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var i,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var r=this.errorsFor(t);r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(r=n("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,n(t)):r.insertAfter(t)));!i&&this.settings.success&&(r.text(""),typeof this.settings.success=="string"?r.addClass(this.settings.success):this.settings.success(r,t));this.toShow=this.toShow.add(r)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return n(this).attr("for")===i})},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},validationTargetFor:function(n){return this.checkable(n)&&(n=this.findByName(n.name).not(this.settings.ignore)[0]),n},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(t){return n(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return n("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(n,t){return this.dependTypes[typeof n]?this.dependTypes[typeof n](n,t):!0},dependTypes:{boolean:function(n){return n},string:function(t,i){return!!n(t,i.form).length},"function":function(n,t){return n(t)}},optional:function(t){var i=this.elementValue(t);return!n.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(n){this.pending[n.name]||(this.pendingRequest++,this.pending[n.name]=!0)},stopRequest:function(t,i){this.pendingRequest--;this.pendingRequest<0&&(this.pendingRequest=0);delete this.pending[t.name];i&&this.pendingRequest===0&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.formSubmitted=!1):!i&&this.pendingRequest===0&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return n.data(t,"previousValue")||n.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:n.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=n(t).attr("class");return r&&n.each(r.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(i,n.validator.classRuleSettings[this])}),i},attributeRules:function(t){var u={},e=n(t),f=e[0].getAttribute("type"),r,i;for(r in n.validator.methods)r==="required"?(i=e.get(0).getAttribute(r),i===""&&(i=!0),i=!!i):i=e.attr(r),/min|max/.test(r)&&(f===null||/number|range|text/.test(f))&&(i=Number(i)),i?u[r]=i:f===r&&f!=="range"&&(u[r]=!0);return u.maxlength&&/-1|2147483647|524288/.test(u.maxlength)&&delete u.maxlength,u},dataRules:function(t){var i,r,u={},f=n(t);for(i in n.validator.methods)r=f.data("rule-"+i.toLowerCase()),r!==undefined&&(u[i]=r);return u},staticRules:function(t){var i={},r=n.data(t.form,"validator");return r.settings.rules&&(i=n.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return n.each(t,function(r,u){if(u===!1){delete t[r];return}if(u.param||u.depends){var f=!0;switch(typeof u.depends){case"string":f=!!n(u.depends,i.form).length;break;case"function":f=u.depends.call(i,i)}f?t[r]=u.param!==undefined?u.param:!0:delete t[r]}}),n.each(t,function(r,u){t[r]=n.isFunction(u)?u(i):u}),n.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),n.each(["rangelength","range"],function(){var i;t[this]&&(n.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:typeof t[this]=="string"&&(i=t[this].split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),n.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if(typeof t=="string"){var i={};n.each(t.split(/\s/),function(){i[this]=!0});t=i}return t},addMethod:function(t,i,r){n.validator.methods[t]=i;n.validator.messages[t]=r!==undefined?r:n.validator.messages[t];i.length<3&&n.validator.addClassRules(t,n.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";if(i.nodeName.toLowerCase()==="select"){var u=n(i).val();return u&&u.length>0}return this.checkable(i)?this.getLength(t,i)>0:n.trim(t).length>0},email:function(n,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(n)},url:function(n,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n)},date:function(n,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(n).toString())},dateISO:function(n,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(n)},number:function(n,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},creditcard:function(n,t){var r,e;if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(n))return!1;var f=0,i=0,u=!1;for(n=n.replace(/\D/g,""),r=n.length-1;r>=0;r--)e=n.charAt(r),i=parseInt(e,10),u&&(i*=2)>9&&(i-=9),f+=i,u=!u;return f%10==0},minlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||u>=r},maxlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||u<=r},rangelength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||u>=r[0]&&u<=r[1]},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||n<=i},range:function(n,t,i){return this.optional(t)||n>=i[0]&&n<=i[1]},equalTo:function(t,i,r){var u=n(r);return this.settings.onfocusout&&u.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){n(i).valid()}),t===u.val()},remote:function(t,i,r){var f,u,e;return this.optional(i)?"dependency-mismatch":(f=this.previousValue(i),this.settings.messages[i.name]||(this.settings.messages[i.name]={}),f.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=f.message,r=typeof r=="string"&&{url:r}||r,f.old===t)?f.valid:(f.old=t,u=this,this.startRequest(i),e={},e[i.name]=t,n.ajax(n.extend(!0,{url:r,mode:"abort",port:"validate"+i.name,dataType:"json",data:e,success:function(r){var e,h,s,o;u.settings.messages[i.name].remote=f.originalMessage;e=r===!0||r==="true";e?(h=u.formSubmitted,u.prepareElement(i),u.formSubmitted=h,u.successList.push(i),delete u.invalid[i.name],u.showErrors()):(s={},o=r||u.defaultMessage(i,"remote"),s[i.name]=f.message=n.isFunction(o)?o(t):o,u.invalid[i.name]=!0,u.showErrors(s));f.valid=e;u.stopRequest(i,e)}},r)),"pending")}}});n.format=n.validator.format}(jQuery),function(n){var t={},i;n.ajaxPrefilter?n.ajaxPrefilter(function(n,i,r){var u=n.port;n.mode==="abort"&&(t[u]&&t[u].abort(),t[u]=r)}):(i=n.ajax,n.ajax=function(r){var f=("mode"in r?r:n.ajaxSettings).mode,u=("port"in r?r:n.ajaxSettings).port;return f==="abort"?(t[u]&&t[u].abort(),t[u]=i.apply(this,arguments),t[u]):i.apply(this,arguments)})}(jQuery),function(n){n.extend(n.fn,{validateDelegate:function(t,i,r){return this.bind(i,function(i){var u=n(i.target);if(u.is(t))return r.apply(u,arguments)})}})}(jQuery),function(n){var t=0,i=n(document);n.widget("ech.multiselect",{options:{header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:!1,multiple:!0,position:{},appendTo:"body"},_create:function(){var r=this.element.hide(),i=this.options;this.speed=n.fx.speeds._default;this._isOpen=!1;this._namespaceID=this.eventNamespace||"multiselect"+t;var f=(this.button=n('<button type="button"><span class="ui-icon ui-icon-triangle-1-s"><\/span><\/button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(i.classes).attr({title:r.attr("title"),"aria-haspopup":!0,tabIndex:r.attr("tabIndex")}).insertAfter(r),o=(this.buttonlabel=n("<span />")).html(i.noneSelectedText).appendTo(f),u=(this.menu=n("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(i.classes).appendTo(n(i.appendTo)),e=(this.header=n("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(u),s=(this.headerLinkContainer=n("<ul />")).addClass("ui-helper-reset").html(function(){return i.header===!0?'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"><\/span><span>'+i.checkAllText+'<\/span><\/a><\/li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"><\/span><span>'+i.uncheckAllText+"<\/span><\/a><\/li>":typeof i.header=="string"?"<li>"+i.header+"<\/li>":""}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"><\/span><\/a><\/li>').appendTo(e),h=(this.checkboxContainer=n("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(u);this._bindEvents();this.refresh(!0);i.multiple||u.addClass("ui-multiselect-single");t++},_init:function(){this.options.header===!1&&this.header.hide();this.options.multiple||this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide();this.options.autoOpen&&this.open();this.element.is(":disabled")&&this.disable()},refresh:function(i){var u=this.element,f=this.options,s=this.menu,h=this.checkboxContainer,e=[],r="",o=u.attr("id")||t++;u.find("option").each(function(t){var w=n(this),u=this.parentNode,v=this.innerHTML,c=this.title,y=this.value,l="ui-multiselect-"+(this.id||o+"-option-"+t),s=this.disabled,a=this.selected,h=["ui-corner-all"],p=(s?"ui-multiselect-disabled ":" ")+this.className,i;u.tagName==="OPTGROUP"&&(i=u.getAttribute("label"),n.inArray(i,e)===-1&&(r+='<li class="ui-multiselect-optgroup-label '+u.className+'"><a href="#">'+i+"<\/a><\/li>",e.push(i)));s&&h.push("ui-state-disabled");a&&!f.multiple&&h.push("ui-state-active");r+='<li class="'+p+'">';r+='<label for="'+l+'" title="'+c+'" class="'+h.join(" ")+'">';r+='<input id="'+l+'" name="multiselect_'+o+'" type="'+(f.multiple?"checkbox":"radio")+'" value="'+y+'" title="'+c+'"';a&&(r+=' checked="checked"',r+=' aria-selected="true"');s&&(r+=' disabled="disabled"',r+=' aria-disabled="true"');r+=" /><span>"+v+"<\/span><\/label><\/li>"});h.html(r);this.labels=s.find("label");this.inputs=this.labels.children("input");this._setButtonWidth();this._setMenuWidth();this.button[0].defaultValue=this.update();i||this._trigger("refresh")},update:function(){var t=this.options,r=this.inputs,u=r.filter(":checked"),i=u.length,f;return f=i===0?t.noneSelectedText:n.isFunction(t.selectedText)?t.selectedText.call(this,i,r.length,u.get()):/\d/.test(t.selectedList)&&t.selectedList>0&&i<=t.selectedList?u.map(function(){return n(this).next().html()}).get().join(", "):t.selectedText.replace("#",i).replace("#",r.length),this._setButtonValue(f),f},_setButtonValue:function(n){this.buttonlabel.text(n)},_bindEvents:function(){function u(){return t[t._isOpen?"close":"open"](),!1}var t=this,r=this.button;r.find("span").bind("click.multiselect",u);r.bind({click:u,keypress:function(n){switch(n.which){case 27:case 38:case 37:t.close();break;case 39:case 40:t.open()}},mouseenter:function(){r.hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},mouseleave:function(){n(this).removeClass("ui-state-hover")},focus:function(){r.hasClass("ui-state-disabled")||n(this).addClass("ui-state-focus")},blur:function(){n(this).removeClass("ui-state-focus")}});this.header.delegate("a","click.multiselect",function(i){n(this).hasClass("ui-multiselect-close")?t.close():t[n(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]();i.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(i){i.preventDefault();var f=n(this),r=f.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),u=r.get(),e=f.parent().text();t._trigger("beforeoptgrouptoggle",i,{inputs:u,label:e})!==!1&&(t._toggleChecked(r.filter(":checked").length!==r.length,r),t._trigger("optgrouptoggle",i,{inputs:u,label:e,checked:u[0].checked}))}).delegate("label","mouseenter.multiselect",function(){n(this).hasClass("ui-state-disabled")||(t.labels.removeClass("ui-state-hover"),n(this).addClass("ui-state-hover").find("input").focus())}).delegate("label","keydown.multiselect",function(i){i.preventDefault();switch(i.which){case 9:case 27:t.close();break;case 38:case 40:case 37:case 39:t._traverse(i.which,this);break;case 13:n(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(i){var u=n(this),f=this.value,r=this.checked,e=t.element.find("option");if(this.disabled||t._trigger("click",i,{value:f,text:this.title,checked:r})===!1){i.preventDefault();return}u.focus();u.attr("aria-selected",r);e.each(function(){this.value===f?this.selected=r:t.options.multiple||(this.selected=!1)});t.options.multiple||(t.labels.removeClass("ui-state-active"),u.closest("label").toggleClass("ui-state-active",r),t.close());t.element.trigger("change");setTimeout(n.proxy(t.update,t),10)});i.bind("mousedown."+this._namespaceID,function(i){var r=i.target;!t._isOpen||r===t.button[0]||r===t.menu[0]||n.contains(t.menu[0],r)||n.contains(t.button[0],r)||t.close()});n(this.element[0].form).bind("reset.multiselect",function(){setTimeout(n.proxy(t.refresh,t),10)})},_setButtonWidth:function(){var n=this.element.outerWidth(),t=this.options;/\d/.test(t.minWidth)&&n<t.minWidth&&(n=t.minWidth);this.button.outerWidth(n)},_setMenuWidth:function(){var n=this.menu;n.outerWidth(this.button.outerWidth())},_traverse:function(t,i){var e=n(i),r=t===38||t===37,f=e.parent()[r?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)").first(),u;f.length?f.find("label").trigger("mouseover"):(u=this.menu.find("ul").last(),this.menu.find("label")[r?"last":"first"]().trigger("mouseover"),u.scrollTop(r?u.height():0))},_toggleState:function(n,t){return function(){this.disabled||(this[n]=t);t?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(t,i){var r=i&&i.length?i:this.inputs,f=this,u;r.each(this._toggleState("checked",t));r.eq(0).focus();this.update();u=r.map(function(){return this.value}).get();this.element.find("option").each(function(){!this.disabled&&n.inArray(this.value,u)>-1&&f._toggleState("selected",t).call(this)});r.length&&this.element.trigger("change")},_toggleDisabled:function(t){this.button.attr({disabled:t,"aria-disabled":t})[t?"addClass":"removeClass"]("ui-state-disabled");var i=this.menu.find("input"),r="ech-multiselect-disabled";i=t?i.filter(":enabled").data(r,!0):i.filter(function(){return n.data(this,r)===!0}).removeData(r);i.attr({disabled:t,"arial-disabled":t}).parent()[t?"addClass":"removeClass"]("ui-state-disabled");this.element.attr({disabled:t,"aria-disabled":t})},open:function(){var s=this,r=this.button,u=this.menu,f=this.speed,t=this.options,e=[],o,i;this._trigger("beforeopen")===!1||r.hasClass("ui-state-disabled")||this._isOpen||(o=u.find("ul").last(),i=t.show,n.isArray(t.show)&&(i=t.show[0],f=t.show[1]||s.speed),i&&(e=[i,f]),o.scrollTop(0).height(t.height),this.position(),n.fn.show.apply(u,e),this.labels.filter(":not(.ui-state-disabled)").eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus"),r.addClass("ui-state-active"),this._isOpen=!0,this._trigger("open"))},close:function(){if(this._trigger("beforeclose")!==!1){var t=this.options,i=t.hide,r=this.speed,u=[];n.isArray(t.hide)&&(i=t.hide[0],r=t.hide[1]||this.speed);i&&(u=[i,r]);n.fn.hide.apply(this.menu,u);this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");this._isOpen=!1;this._trigger("close")}},enable:function(){this._toggleDisabled(!1)},disable:function(){this._toggleDisabled(!0)},checkAll:function(){this._toggleChecked(!0);this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(!1);this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){return n.Widget.prototype.destroy.call(this),i.unbind(this._namespaceID),this.button.remove(),this.menu.remove(),this.element.show(),this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},position:function(){var t=this.options,i;n.ui.position&&!n.isEmptyObject(t.position)?(t.position.of=t.position.of||this.button,this.menu.show().position(t.position).hide()):(i=this.button.offset(),this.menu.css({top:i.top+this.button.outerHeight(),left:i.left}))},_setOption:function(t,i){var r=this.menu;switch(t){case"header":r.find("div.ui-multiselect-header")[i?"show":"hide"]();break;case"checkAllText":r.find("a.ui-multiselect-all span").eq(-1).text(i);break;case"uncheckAllText":r.find("a.ui-multiselect-none span").eq(-1).text(i);break;case"height":r.find("ul").last().height(parseInt(i,10));break;case"minWidth":this.options[t]=parseInt(i,10);this._setButtonWidth();this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[t]=i;this.update();break;case"classes":r.add(this.button).removeClass(this.options.classes).addClass(i);break;case"multiple":r.toggleClass("ui-multiselect-single",!i);this.options.multiple=i;this.element[0].multiple=i;this.refresh();break;case"position":this.position()}n.Widget.prototype._setOption.apply(this,arguments)}})}(jQuery);jQuery.fn.sortElements=function(){var n=[].sort;return function(t,i){i=i||function(){return this};var r=this.map(function(){var t=i.call(this),n=t.parentNode,r=n.insertBefore(document.createTextNode(""),t.nextSibling);return function(){if(n===this)throw new Error("You can't sort elements if any one is a descendant of another.");n.insertBefore(this,r);n.removeChild(r)}});return n.call(this,t).each(function(n){r[n].call(i.call(this))})}}(),function(n){function t(n,t,u){var f=n.scrollTop;n.setSelectionRange?i(n,t,u):document.selection&&r(n,t,u);n.scrollTop=f}function i(n,t,i){var r=n.selectionStart,s=n.selectionEnd,u,h,f,a,v;if(r==s)t?"\t"==n.value.substring(r-i.tabString.length,r)?(n.value=n.value.substring(0,r-i.tabString.length)+n.value.substring(r),n.focus(),n.setSelectionRange(r-i.tabString.length,r-i.tabString.length)):"\t"==n.value.substring(r,r+i.tabString.length)&&(n.value=n.value.substring(0,r)+n.value.substring(r+i.tabString.length),n.focus(),n.setSelectionRange(r,r)):(n.value=n.value.substring(0,r)+i.tabString+n.value.substring(r),n.focus(),n.setSelectionRange(r+i.tabString.length,r+i.tabString.length));else{var l=n.value.split("\n"),c=[],e=0,o=0;for(h in l)o=e+l[h].length,c.push({start:e,end:o,selected:e<=r&&o>r||o>=s&&e<s||e>r&&o<s}),e=o+1;u=0;for(h in c)c[h].selected&&(f=c[h].start+u,t&&i.tabString==n.value.substring(f,f+i.tabString.length)?(n.value=n.value.substring(0,f)+n.value.substring(f+i.tabString.length),u-=i.tabString.length):t||(n.value=n.value.substring(0,f)+i.tabString+n.value.substring(f),u+=i.tabString.length));n.focus();a=r+(u>0?i.tabString.length:u<0?-i.tabString.length:0);v=s+u;n.setSelectionRange(a,v)}}function r(t,i,r){var u=document.selection.createRange(),w,p,l,d,a,o,c;if(t==u.parentElement())if(""==u.text)i?(w=u.getBookmark(),u.moveStart("character",-r.tabString.length),r.tabString==u.text?u.text="":(u.moveToBookmark(w),u.moveEnd("character",r.tabString.length),r.tabString==u.text&&(u.text="")),u.collapse(!0),u.select()):(u.text=r.tabString,u.collapse(!1),u.select());else{var b=u.text,v=b.length,f=b.split("\r\n"),s=document.body.createTextRange();s.moveToElementText(t);s.setEndPoint("EndToStart",u);var k=s.text,e=k.split("\r\n"),h=k.length,y=document.body.createTextRange();for(y.moveToElementText(t),y.setEndPoint("StartToEnd",u),p=y.text,l=document.body.createTextRange(),l.moveToElementText(t),l.setEndPoint("StartToEnd",s),d=l.text,a=n(t).html(),n("#r3").text(h+" + "+v+" + "+p.length+" = "+a.length),h+d.length<a.length?(e.push(""),h+=2,i&&r.tabString==f[0].substring(0,r.tabString.length)?f[0]=f[0].substring(r.tabString.length):i||(f[0]=r.tabString+f[0])):i&&r.tabString==e[e.length-1].substring(0,r.tabString.length)?e[e.length-1]=e[e.length-1].substring(r.tabString.length):i||(e[e.length-1]=r.tabString+e[e.length-1]),o=1;o<f.length;o++)i&&r.tabString==f[o].substring(0,r.tabString.length)?f[o]=f[o].substring(r.tabString.length):i||(f[o]=r.tabString+f[o]);1==e.length&&0==h&&(i&&r.tabString==f[0].substring(0,r.tabString.length)?f[0]=f[0].substring(r.tabString.length):i||(f[0]=r.tabString+f[0]));h+v+p.length<a.length&&(f.push(""),v+=2);s.text=e.join("\r\n");u.text=f.join("\r\n");c=document.body.createTextRange();c.moveToElementText(t);0<h?c.setEndPoint("StartToEnd",s):c.setEndPoint("StartToStart",s);c.setEndPoint("EndToEnd",u);c.select()}}n.fn.tabby=function(i){var u=n.extend({},n.fn.tabby.defaults,i),r=n.fn.tabby.pressed;return this.each(function(){$this=n(this);var i=n.meta?n.extend({},u,$this.data()):u;$this.bind("keydown",function(u){var f=n.fn.tabby.catch_kc(u);return 16==f&&(r.shft=!0),17==f&&(r.ctrl=!0,setTimeout("$.fn.tabby.pressed.ctrl = false;",1e3)),18==f&&(r.alt=!0,setTimeout("$.fn.tabby.pressed.alt = false;",1e3)),9==f&&!r.ctrl&&!r.alt?(u.preventDefault,r.last=f,setTimeout("$.fn.tabby.pressed.last = null;",0),t(n(u.target).get(0),r.shft,i),!1):void 0}).bind("keyup",function(t){16==n.fn.tabby.catch_kc(t)&&(r.shft=!1)}).bind("blur",function(t){9==r.last&&n(t.target).one("focus",function(){r.last=null}).get(0).focus()})})};n.fn.tabby.catch_kc=function(n){return n.keyCode?n.keyCode:n.charCode?n.charCode:n.which};n.fn.tabby.pressed={shft:!1,ctrl:!1,alt:!1,last:null};n.fn.tabby.defaults={tabString:String.fromCharCode(9)}}(jQuery),function(n){function l(i){t.parent||(t.parent=n('<div id="'+i.id+'"><h3><\/h3><div class="body"><\/div><div class="url"><\/div><\/div>').appendTo(document.body).hide(),n.fn.bgiframe&&t.parent.bgiframe(),t.title=n("h3",t.parent),t.body=n("div.body",t.parent),t.url=n("div.url",t.parent))}function i(t){return n.data(t,"tooltip")}function a(t){i(this).delay?f=setTimeout(h,i(this).delay):h();s=!!i(this).track;n(document.body).bind("mousemove",u);u(t)}function v(){var u,e,f,s;if(!n.tooltip.blocked&&this!=r&&(this.tooltipText||i(this).bodyHandler)){if(r=this,o=this.tooltipText,i(this).bodyHandler)t.title.hide(),u=i(this).bodyHandler.call(this),u.nodeType||u.jquery?t.body.empty().append(u):t.body.html(u),t.body.show();else if(i(this).showBody){for(e=o.split(i(this).showBody),t.title.html(e.shift()).show(),t.body.empty(),f=0;s=e[f];f++)f>0&&t.body.append("<br/>"),t.body.append(s);t.body.hideWhenEmpty()}else t.title.html(o).show(),t.body.hide();i(this).showURL&&n(this).url()?t.url.html(n(this).url().replace("http://","")).show():t.url.hide();t.parent.addClass(i(this).extraClass);i(this).fixPNG&&t.parent.fixPNG();a.apply(this,arguments)}}function h(){f=null;var o=i(r);(!e||!n.fn.bgiframe)&&o&&o.fade?t.parent.is(":animated")?t.parent.stop().show().fadeTo(i(r).fade,r.tOpacity):t.parent.is(":visible")?t.parent.fadeTo(i(r).fade,r.tOpacity):t.parent.fadeIn(i(r).fade):t.parent.show();u()}function u(f){var e,h,v,l,a,c,o;if(!n.tooltip.blocked&&(!f||f.target.tagName!="OPTION")){if(!s&&t.parent.is(":visible")&&n(document.body).unbind("mousemove",u),r==null){n(document.body).unbind("mousemove",u);return}t.parent.removeClass("viewport-right").removeClass("viewport-bottom");e=t.parent[0].offsetLeft;h=t.parent[0].offsetTop;f&&(v=i(r),v==null?(e=0,h=0):(e=f.pageX+i(r).left,h=f.pageY+i(r).top),l="auto",a=i(r),a&&a.positionLeft&&(l=n(window).width()-e,e="auto"),t.parent.css({left:e,right:l,top:h}));c=y();o=t.parent[0];c.x+c.cx<o.offsetLeft+o.offsetWidth&&(e-=o.offsetWidth+20+i(r).left,t.parent.css({left:e+"px"}).addClass("viewport-right"));c.y+c.cy<o.offsetTop+o.offsetHeight&&(h-=o.offsetHeight+20+i(r).top,t.parent.css({top:h+"px"}).addClass("viewport-bottom"))}}function y(){return{x:n(window).scrollLeft(),y:n(window).scrollTop(),cx:n(window).width(),cy:n(window).height()}}function c(){function o(){t.parent.removeClass(u.extraClass).hide().css("opacity","")}if(!n.tooltip.blocked){f&&clearTimeout(f);r=null;var u=i(this);e&&n.fn.bgiframe||!u.fade?o():t.parent.is(":animated")?t.parent.stop().fadeTo(u.fade,0,o):t.parent.stop().fadeOut(u.fade,o);i(this).fixPNG&&t.parent.unfixPNG()}}var t={},r,o,f,e=n.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),s=!1;n.tooltip={blocked:!1,defaults:{delay:200,fade:!1,showURL:!0,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){n.tooltip.blocked=!n.tooltip.blocked}};n.fn.extend({tooltip:function(i){return i=n.extend({},n.tooltip.defaults,i),l(i),this.each(function(){n.data(this,"tooltip",i);this.tOpacity=t.parent.css("opacity");this.tooltipText=this.title;n(this).removeAttr("title");this.alt=""}).mouseover(v).mouseout(c).click(c)},fixPNG:e?function(){return this.each(function(){var t=n(this).css("backgroundImage");t.match(/^url\(["']?(.*\.png)["']?\)$/i)&&(t=RegExp.$1,n(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+t+"')"}).each(function(){var t=n(this).css("position");t!="absolute"&&t!="relative"&&n(this).css("position","relative")}))})}:function(){return this},unfixPNG:e?function(){return this.each(function(){n(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){n(this)[n(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}})}(jQuery),function(n){var t={containerKey:"transposed",itemKey:"pre-transpose-index"};n.fn.extend({transpose:function(){if(this.length>2){var i=this,r=this.parent();r.each(function(){var v=this,h=n(this),o,u,s,r,l,a,c,e,f;if(typeof h.data(t.containerKey)=="undefined"&&(h.data(t.containerKey,!0),o=i.filter(function(){return this.parentNode==v}),u=o.length,u>2)){for(l=o.eq(0).position().top,r=1;r<u&&l==o.eq(r).position().top;r++);if(a=parseInt(u/r)+1,u>r&&r>1){for(c=[],f=0;f<r;f++)c.push(a-(f%r<u%r?0:1));for(s=n(),e=0,f=0;f<u;f++)s=s.add(o.eq(e).detach().data(t.itemKey,e)),e+=c[f%r],e>=u&&e++,e=e%u;s.appendTo(h).after("\n")}}})}return this}})}(jQuery),function(){var n,i,r,t,u,f={}.hasOwnProperty,e=function(n,t){function r(){this.constructor=n}for(var i in t)f.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};t=function(){function n(){this.options_index=0;this.parsed=[]}return n.prototype.add_node=function(n){return n.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(n):this.add_option(n)},n.prototype.add_group=function(n){var i,f,t,e,r,u;for(i=this.parsed.length,this.parsed.push({array_index:i,group:!0,label:this.escapeExpression(n.label),children:0,disabled:n.disabled}),r=n.childNodes,u=[],t=0,e=r.length;t<e;t++)f=r[t],u.push(this.add_option(f,i,n.disabled));return u},n.prototype.add_option=function(n,t,i){if(n.nodeName.toUpperCase()==="OPTION")return n.text!==""?(t!=null&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:n.value,text:n.text,html:n.innerHTML,selected:n.selected,disabled:i===!0?i:n.disabled,group_array_index:t,classes:n.className,style:n.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},n.prototype.escapeExpression=function(n){var t,i;return n==null||n===!1?"":/[\&\<\>\"\'\`]/.test(n)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,n.replace(i,function(n){return t[n]||"&amp;"})):n},n}();t.select_to_array=function(n){var f,r,i,e,u;for(r=new t,u=n.childNodes,i=0,e=u.length;i<e;i++)f=u[i],r.add_node(f);return r.parsed};i=function(){function n(t,i){(this.form_field=t,this.options=i!=null?i:{},n.browser_is_supported())&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return n.prototype.set_default_values=function(){var n=this;return this.click_test_action=function(t){return n.test_active_click(t)},this.activate_action=function(t){return n.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0,this.group_search=this.options.group_search!=null?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||Infinity,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:!0,this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:!0},n.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||n.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||n.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||n.default_no_result_text},n.prototype.mouse_enter=function(){return this.mouse_on_container=!0},n.prototype.mouse_leave=function(){return this.mouse_on_container=!1},n.prototype.input_focus=function(){var n=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return n.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},n.prototype.input_blur=function(){var n=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return n.blur_test()},100)},n.prototype.results_option_build=function(n){var r,t,i,f,u;for(r="",u=this.results_data,i=0,f=u.length;i<f;i++)t=u[i],r+=t.group?this.result_add_group(t):this.result_add_option(t),(n!=null?n.first:void 0)&&(t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&this.single_set_selected_text(t.text));return r},n.prototype.result_add_option=function(n){var t,i;return n.search_match?this.include_option_in_results(n)?(t=[],n.disabled||n.selected&&this.is_multiple||t.push("active-result"),!n.disabled||n.selected&&this.is_multiple||t.push("disabled-result"),n.selected&&t.push("result-selected"),n.group_array_index!=null&&t.push("group-option"),n.classes!==""&&t.push(n.classes),i=n.style.cssText!==""?' style="'+n.style+'"':"",'<li class="'+t.join(" ")+'"'+i+' data-option-array-index="'+n.array_index+'">'+n.search_text+"<\/li>"):"":""},n.prototype.result_add_group=function(n){return(n.search_match||n.group_match)?(n.active_options>0)?'<li class="group-result">'+n.search_text+"<\/li>":"":""},n.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing?this.winnow_results():void 0},n.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},n.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},n.prototype.winnow_results=function(){var e,n,h,c,u,t,i,r,o,l,f,a,s;for(this.no_results_clear(),u=0,i=this.get_search_text(),e=i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),c=this.search_contains?"":"^",h=new RegExp(c+e,"i"),l=new RegExp(e,"i"),s=this.results_data,f=0,a=s.length;f<a;f++)n=s[f],n.search_match=!1,t=null,this.include_option_in_results(n)&&(n.group&&(n.group_match=!1,n.active_options=0),n.group_array_index!=null&&this.results_data[n.group_array_index]&&(t=this.results_data[n.group_array_index],t.active_options===0&&t.search_match&&(u+=1),t.active_options+=1),n.group&&!this.group_search||(n.search_text=n.group?n.label:n.html,n.search_match=this.search_string_match(n.search_text,h),n.search_match&&!n.group&&(u+=1),n.search_match?(i.length&&(r=n.search_text.search(l),o=n.search_text.substr(0,r+i.length)+"<\/em>"+n.search_text.substr(r+i.length),n.search_text=o.substr(0,r)+"<em>"+o.substr(r)),t!=null&&(t.group_match=!0)):n.group_array_index!=null&&this.results_data[n.group_array_index].search_match&&(n.search_match=!0)));return this.result_clear_highlight(),u<1&&i.length?(this.update_results_content(""),this.no_results(i)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},n.prototype.search_string_match=function(n,t){var u,i,r,f;if(t.test(n))return!0;if(this.enable_split_word_search&&(n.indexOf(" ")>=0||n.indexOf("[")===0)&&(i=n.replace(/\[|\]/g,"").split(" "),i.length))for(r=0,f=i.length;r<f;r++)if(u=i[r],t.test(u))return!0},n.prototype.choices_count=function(){var i,n,r,t;if(this.selected_option_count!=null)return this.selected_option_count;for(this.selected_option_count=0,t=this.form_field.options,n=0,r=t.length;n<r;n++)i=t[n],i.selected&&(this.selected_option_count+=1);return this.selected_option_count},n.prototype.choices_click=function(n){return n.preventDefault(),(this.results_showing||this.is_disabled)?void 0:this.results_show()},n.prototype.keyup_checker=function(n){var t,i;t=(i=n.which)!=null?i:n.keyCode;this.search_field_scale();switch(t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(n.preventDefault(),this.results_showing)return this.result_select(n);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},n.prototype.container_width=function(){return this.options.width!=null?this.options.width:""+this.form_field.offsetWidth+"px"},n.prototype.include_option_in_results=function(n){return this.is_multiple&&!this.display_selected_options&&n.selected?!1:!this.display_disabled_options&&n.disabled?!1:n.empty?!1:!0},n.browser_is_supported=function(){return window.navigator.appName==="Microsoft Internet Explorer"?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},n.default_multiple_text="Select Some Options",n.default_single_text="Select an Option",n.default_no_result_text="No results match",n}();n=jQuery;n.fn.extend({chosen:function(t){return i.browser_is_supported()?this.each(function(){var u,i;u=n(this);i=u.data("chosen");t==="destroy"&&i?i.destroy():i||u.data("chosen",new r(this,t))}):this}});r=function(i){function r(){return u=r.__super__.constructor.apply(this,arguments)}return e(r,i),r.prototype.setup=function(){return this.form_field_jq=n(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},r.prototype.set_up_html=function(){var t,i;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),i={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=n("<div />",i),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /><\/li><\/ul><div class="chosen-drop"><ul class="chosen-results"><\/ul><\/div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'<\/span><div><b><\/b><\/div><\/a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /><\/div><ul class="chosen-results"><\/ul><\/div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},r.prototype.register_observers=function(){var n=this;return this.container.bind("mousedown.chosen",function(t){n.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){n.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){n.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){n.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){n.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){n.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){n.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){n.search_results_mousewheel(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){n.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){n.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){n.container_mousedown(t)}),this.search_field.bind("blur.chosen",function(t){n.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){n.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){n.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){n.input_focus(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){n.choices_click(t)}):this.container.bind("click.chosen",function(n){n.preventDefault()})},r.prototype.destroy=function(){return n(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},r.prototype.search_field_disabled=function(){return(this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled)?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,!this.is_multiple)?this.selected_item.bind("focus.chosen",this.activate_action):void 0},r.prototype.container_mousedown=function(t){if(!this.is_disabled&&(t&&t.type==="mousedown"&&!this.results_showing&&t.preventDefault(),!(t!=null&&n(t.target).hasClass("search-choice-close"))))return this.active_field?!this.is_multiple&&t&&(n(t.target)[0]===this.selected_item[0]||n(t.target).parents("a.chosen-single").length)&&(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),n(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},r.prototype.container_mouseup=function(n){if(n.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(n)},r.prototype.search_results_mousewheel=function(n){var t,i,r;return t=-((i=n.originalEvent)!=null?i.wheelDelta:void 0)||((r=n.originialEvent)!=null?r.detail:void 0),t!=null?(n.preventDefault(),n.type==="DOMMouseScroll"&&(t=t*40),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},r.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},r.prototype.close_field=function(){return n(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},r.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},r.prototype.test_active_click=function(t){return this.container.is(n(t.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},r.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=t.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},r.prototype.result_do_highlight=function(n){var t,i,r,f,u;if(n.length){if(this.result_clear_highlight(),this.result_highlight=n,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),u=this.search_results.scrollTop(),f=r+u,i=this.result_highlight.position().top+this.search_results.scrollTop(),t=i+this.result_highlight.outerHeight(),t>=f)return this.search_results.scrollTop(t-r>0?t-r:0);if(i<u)return this.search_results.scrollTop(i)}},r.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},r.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},r.prototype.update_results_content=function(n){return this.search_results.html(n)},r.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},r.prototype.set_tab_index=function(){var n;if(this.form_field.tabIndex)return n=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=n},r.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=n("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(n){return t.is_multiple?t.container_mousedown(n):t.activate_field()}):void 0},r.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},r.prototype.search_results_mouseup=function(t){var i;return i=n(t.target).hasClass("active-result")?n(t.target):n(t.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(t),this.search_field.focus()):void 0},r.prototype.search_results_mouseover=function(t){var i;return i=n(t.target).hasClass("active-result")?n(t.target):n(t.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},r.prototype.search_results_mouseout=function(t){if(n(t.target).hasClass("active-result"||n(t.target).parents(".active-result").first()))return this.result_clear_highlight()},r.prototype.choice_build=function(t){var i,r,u=this;return i=n("<li />",{"class":"search-choice"}).html("<span>"+t.html+"<\/span>"),t.disabled?i.addClass("search-choice-disabled"):(r=n("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),r.bind("click.chosen",function(n){return u.choice_destroy_link_click(n)}),i.append(r)),this.search_container.before(i)},r.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(n(t.target))},r.prototype.choice_destroy=function(n){if(this.result_deselect(n[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),n.parents("li").first().remove(),this.search_field_scale()},r.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},r.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},r.prototype.result_select=function(n){var i,t,r;if(this.result_highlight)return(i=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count())?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?i.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),r=this.result_single_selected[0].getAttribute("data-option-array-index"),this.results_data[r].selected=!1),this.result_single_selected=i),i.addClass("result-selected"),t=this.results_data[i[0].getAttribute("data-option-array-index")],t.selected=!0,this.form_field.options[t.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(t):this.single_set_selected_text(t.text),(n.metaKey||n.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[t.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},r.prototype.single_set_selected_text=function(n){return n==null&&(n=this.default_text),n===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(n)},r.prototype.result_deselect=function(n){var t;return t=this.results_data[n],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},r.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"><\/abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},r.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":n("<div/>").text(n.trim(this.search_field.val())).html()},r.prototype.winnow_results_set_highlight=function(){var n,t;return t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),n=t.length?t.first():this.search_results.find(".active-result").first(),n!=null?this.result_do_highlight(n):void 0},r.prototype.no_results=function(t){var i;return i=n('<li class="no-results">'+this.results_none_found+' "<span><\/span>"<\/li>'),i.find("span").first().html(t),this.search_results.append(i)},r.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},r.prototype.keydown_arrow=function(){var n;if(this.results_showing&&this.result_highlight){if(n=this.result_highlight.nextAll("li.active-result").first(),n)return this.result_do_highlight(n)}else return this.results_show()},r.prototype.keyup_arrow=function(){var n;if(this.results_showing||this.is_multiple){if(this.result_highlight)return n=this.result_highlight.prevAll("li.active-result"),n.length?this.result_do_highlight(n.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())}else return this.results_show()},r.prototype.keydown_backstroke=function(){var n;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(n=this.search_container.siblings("li.search-choice").last(),n.length&&!n.hasClass("search-choice-disabled"))?(this.pending_backstroke=n,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},r.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},r.prototype.keydown_checker=function(n){var t,i;t=(i=n.which)!=null?i:n.keyCode;this.search_field_scale();t!==8&&this.pending_backstroke&&this.clear_backstroke();switch(t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(n);this.mouse_on_container=!1;break;case 13:n.preventDefault();break;case 38:n.preventDefault();this.keyup_arrow();break;case 40:n.preventDefault();this.keydown_arrow()}},r.prototype.search_field_scale=function(){var t,u,h,f,e,o,i,r,s;if(this.is_multiple){for(h=0,i=0,e="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],r=0,s=o.length;r<s;r++)f=o[r],e+=f+":"+this.search_field.css(f)+";";return t=n("<div />",{style:e}),t.text(this.search_field.val()),n("body").append(t),i=t.width()+25,t.remove(),u=this.container.outerWidth(),i>u-10&&(i=u-10),this.search_field.css({width:i+"px"})}},r}(i)}.call(this);$(function(){$.fn.dropdown2=function(){return this.each(function(){$(this).click(function(n){n.preventDefault();var t=$(this),i=$($(this).next(".dropdown2-menu")),r=t.hasClass("dropdown-open");return($("div.dropdown2-menu").hide(),$(".trigger-dropdown").removeClass("dropdown-open"),r)?!1:(i.show(),i.css({left:i.hasClass("anchor-right")?t.position().left-(i.outerWidth()-t.outerWidth()):t.position().left,top:t.position().top+22}),t.addClass("dropdown-open"),!1)})})};$.fn.dropdownFocus=function(){return this.each(function(){$(this).focus(function(n){n.preventDefault();var t=$(this),i=$($(this).next(".dropdown2-menu")),r=t.hasClass("dropdown-open");return($("div.dropdown2-menu").hide(),$(".trigger-dropdown").removeClass("dropdown-open"),r)?!1:(i.show(),i.css({left:i.hasClass("anchor-right")?t.position().left-(i.outerWidth()-t.outerWidth()):t.position().left}),t.addClass("dropdown-open"),!1)});$(this).click(function(){var n=$(this),t=n.hasClass("dropdown-open");return t?!1:!0})})};$(function(){$("HTML").on("click.dropdown",hideDropdowns);$(window).on("resize.dropdown",hideDropdowns);$(document).keydown(function(n){n.keyCode==17&&$("a.trigger-dropdown").hasClass("dropdown-open")&&$("li.hideAlt").toggle()});$("li.hideAlt").hide()})});$(document).ready(function(){$.gotoPage=function(n,t){var i=$(n).closest("form");return $("#Page",i).val(t),$.getTable(i)};$.setPageSize=function(n){var t=$(n).closest("form");return $("#Page",t).val(1),$("#PageSize",t).val($(n).val()),$.getTable(t)};$.getTable=function(n){var t;return n&&(t=n.serialize()),$.post(n.attr("action"),t,function(t){$(n).html(t).ready(function(){$("a.trigger-dropdown",n).dropdown();$(".bt").button();$(".datepicker").datepicker()})}),!1};$("table.grid2 > thead a.sortable").live("click",function(){var n=$(this).closest("form"),i=$(this).text(),r=$("#Sort",n),t=$("#Direction",n);return $(r).val()==i&&$(t).val()=="asc"?$(t).val("desc"):$(t).val("asc"),$(r).val(i),$.getTable(n),!1});$.showTable=function(n){return $("table.grid2",n).size()==0&&$.getTable(n),!1};$.updateTable=function(n){return $("table.grid2",n).size()>0&&$.getTable(n),!1};$("body").on("click","input[name='toggletarget']",function(){$('a.target[target="people"]').length==0?($("a.target").attr("target","people"),$("input[name='toggletarget']").attr("checked",!0)):($("a.target").removeAttr("target"),$("input[name='toggletarget']").removeAttr("checked"))})});$(document).ready(function(){$("#ChooseFormat").dialog({overlay:{background:"#000",opacity:.3},bgiframe:!0,modal:!0,autoOpen:!1,closeOnEscape:!0,width:400});$("#TagAllDialog").dialog({overlay:{background:"#000",opacity:.3},bgiframe:!0,modal:!0,autoOpen:!1,closeOnEscape:!0});$(".ChooseFormat").live("click",function(n){var t,i;return n.preventDefault(),$("div.dropdown2-menu").hide(),t=$("#ChooseFormat"),t.dialog("open"),i=n.target.href.search(/\?/)==-1?"?":"&",$("#cmdOK").unbind("click").click(function(t){t.preventDefault();var r=n.target.href+i+"titles="+$("#UseTitle")[0].checked+"&format="+$("input[name=format]:checked").val()+"&usephone="+$("#UsePhone")[0].checked+"&sortzip="+$("#SortZip")[0].checked+"&skipNum="+$("#SkipNum").val();return $("#ChooseFormat").dialog("close"),window.open(r),!1}),!1});$("#TagAll").live("click",function(n){var t,i;return n.preventDefault(),t=this.href,$("div.dropdown2-menu").hide(),i=$("#TagAllDialog").dialog("open"),$("#TagAllRun").click(function(n){if($("#tagalltagname").val().length===0)return alert("need tagname"),!1;n.preventDefault();i.dialog("close");var r=$(this).closest("form").serialize();return $.block(),$.post(t,r,function(n){n==="Manage"?window.location="/Tags":($(".taguntag:visible").text(n),$.unblock())}),!1}),!1});$("#UnTagAll").live("click",function(n){return n.preventDefault(),$("div.dropdown2-menu").hide(),$.block(),$.post(this.href,null,function(n){$(".taguntag:visible").text(n);$.unblock()}),!1});$("body").on("click","#AddContact",function(n){return($("div.dropdown2-menu").hide(),n.preventDefault(),!confirm("Are you sure you want to add a contact for all these people?"))?!1:($.block(),$.post(this.href,null,function(n){$.unblock();n<0?$.growlUI("error","too many people to add to a contact (max 100)"):n==0?$.growlUI("error","no results"):window.location=n}),!1)});$("body").on("click","#AddTasks",function(n){return(n.preventDefault(),$("div.dropdown2-menu").hide(),!confirm("Are you sure you want to add a task for each of these people?"))?!1:($.block(),$.post(this.href,null,function(n){$.unblock();n<0?$.growlUI("error","too many people to add tasks for (max 100)"):n==0?$.growlUI("error","no results"):window.location="/Task"}),!1)});$.QueryString=function(n,t){var i={};return $.each(n.split("&"),function(){var n=this.split("=");i[n[0]]=n[1]}),i[t]};$.block=function(n){n||(n="<h1>working on it...<\/h1>");$.blockUI({message:n,overlayCSS:{opacity:0},css:{border:"3px",padding:"15px",backgroundColor:"#aaa","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.9,color:"#000",width:"500px"}})};$.unblock=function(){$.unblockUI()};$.navigate=function(n,t){n+=(n.match(/\?/)?"&":"?")+t;window.location=n};var n={overlay:{background:"#000",opacity:.3},bgiframe:!0,modal:!0,autoOpen:!1,closeOnEscape:!0};$("#ExportStartEnd").dialog(n);$("#SetExtraValues").dialog(n);$("body").on("click",".ChooseStartEnd",function(n){n.preventDefault();var t=$("#ExportStartEnd");return t.dialog("open"),$("#ExportStartEndRun").unbind("click").click(function(i){i.preventDefault();var r=n.target.href;return r=r.appendQuery("start="+$("#startdt",t).val()),r=r.appendQuery("end="+$("#enddt",t).val()),$("#ExportStartEnd").dialog("close"),window.open(r),!1}),!1});$("body").on("click","a.ChooseExtraValues",function(n){n.preventDefault();hideDropdowns();var t=$("#SetExtraValues");return t.dialog("option","title",$(this).text().trim()),t.dialog("open"),$("#SetExtraValuesRun").unbind("click").click(function(i){i.preventDefault();var r={field:$("#field",t).val(),value:$("#value",t).val()};return $.block(),$.post(n.target.href,r,function(n){$.unblock();alert(n);$("#SetExtraValues").dialog("close")}),!1}),!1});$.DateValid=function(n,t){var r=/^(0?[1-9]|1[012])[\/-](0?[1-9]|[12][0-9]|3[01])[\/-]((19|20)?[0-9]{2})$/i,i;return $.dateFormat.startsWith("d")&&(r=/^(0?[1-9]|[12][0-9]|3[01])[\/-](0?[1-9]|1[012])[\/-]((19|20)?[0-9]{2})$/i),i=!0,r.test(n)||(t==!0&&$.growlUI("error","enter valid date"),i=!1),i};$.SortableDate=function(n){var t;return t=$.dateFormat.startsWith("d")?new Date(n.split("/")[2],n.split("/")[1]-1,n.split("/")[0]):new Date(n.split("/")[2],n.split("/")[0]-1,n.split("/")[1]),t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()};jQuery.fn.center=function(n){return n=n?this.parent():window,this.css({position:"absolute",top:($(n).height()-this.outerHeight())/2+$(n).scrollTop()+"px",left:($(n).width()-this.outerWidth())/2+$(n).scrollLeft()+"px"}),this}});typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(n){return this.slice(0,n.length)==n});String.prototype.appendQuery=function(n){return this&&this.length>0?this.contains("&")||this.contains("?")?this+"&"+n:this+"?"+n:n};String.prototype.contains=function(n){return this.indexOf(n)!=-1};String.prototype.endsWith=function(n){return n==this.substring(this.length-n.length)};String.prototype.addCommas=function(){for(var t=this.split("."),n=t[0],r=t.length>1?"."+t[1]:"",i=/(\d+)(\d{3})/;i.test(n);)n=n.replace(i,"$1,$2");return n+r};$(document).ready(function(){$("a.trigger-dropdown").dropdown2();$("#SearchText").each(function(){var n="";$(this).autocomplete({appendTo:"#SearchResults",position:{my:"right top",at:"right bottom",of:$("#SearchText")},minLength:3,autoFocus:!0,open:function(){$("#SearchResults > ul").css("z-index",1002)},close:function(){var t=$(this).val();if(n!==t&&t!=="")return $("#SearchText").autocomplete("search");$("#SearchText").val("")},source:function(t,i){t.term==="---"?i([{id:-1,line1:"People Search"},{id:-2,line1:"Search Builder"},{id:-3,line1:"Organization Search"}]):(n=t.term,$.post("/Home/Names",t,function(n){i(n.slice(0,15))},"json"))},select:function(t,i){var r=$(this).val();return n!==r&&r!==""?!1:(window.location=i.item.id===-1?"/PeopleSearch?name="+n:i.item.id===-2?"/QueryBuilder/Main":i.item.id===-3?"/OrgSearch":(i.item.isOrg?"/Organization/Index/":"/Person/Index/")+i.item.id,!0)},focus:function(n){n.preventDefault()}}).data("uiAutocomplete")._renderItem=function(n,t){if(t.id===0)return $("<li>").append("<hr/>").appendTo(n);var i="<a><b>"+(t.isOrg?"Org: ":"")+t.line1+"<\/b>";return t.id>0&&(i+="<br>"+(t.isOrg?"Div: ":"")+t.line2),i+="<\/a>",$("<li>").append(i).appendTo(n)}});$("a.tutorial").click(function(n){n.preventDefault();startTutorial($(this).attr("href"))});$("#AddDialog").dialog({bgiframe:!0,autoOpen:!1,width:750,height:700,modal:!0,overlay:{opacity:.5,background:"black"},close:function(){$("iframe",this).attr("src","")}});$("#addpeople").click(function(n){n.preventDefault();var t=$("#AddDialog");$("iframe",t).attr("src","/SearchAdd?type=addpeople");t.dialog("option","title","Add People");t.dialog("open")});$("#addorg").click(function(n){n.preventDefault();var t=$("#AddDialog");$("iframe",t).attr("src","/AddOrganization");t.dialog("option","title","Add Organization");t.dialog("open")});$("#cleartag").click(function(n){n.preventDefault();confirm("are you sure you want to empty the active tag?")&&$.post("/Tags/ClearTag",{},function(){window.location.reload()})});$(".warntip").tooltip({delay:150,showBody:"|",showURL:!1});$("#SearchText").each(function(){$(this).addClass("text-label");$(this).focus(function(){(this.value===""||this.value===$(this).attr("default"))&&(this.value="",$(this).removeClass("text-label"),$(this).autocomplete("search","---"))});$(this).blur(function(){this.value===""&&$(this).attr("default")&&(this.value=$(this).attr("default"),$(this).addClass("text-label"))})})});var mustSearch=1;$(function(){$(document).on("click","#supportfeedback,#emailsupport",null,supportOpen);$(document).on("keyup","#gsc-i-id1",null,searchRequested);$(document).on("click",".gsc-search-button",null,searchDone);$(document).on("click","#showSupportForm",null,supportShowForm);$(document).on("click","#sendSupport",null,supportSend);$(document).on("click","#cancelSupport",null,supportClose);$(document).on("click","[supportHelp]",null,supportHelpOpen);$(document).on("click","[supportCancelHelp]",null,supportHelpClose);$("#supportDialog").dialog({autoOpen:!1,resizable:!1,width:800,height:500,modal:!0,dialogClass:"no-title"});$("#supportHelp").dialog({autoOpen:!1,resizable:!1,width:500,height:"auto",modal:!0,dialogClass:"no-title"})});
/*
//# sourceMappingURL=main.min.js.map
*/