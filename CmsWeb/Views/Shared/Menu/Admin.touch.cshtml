@{
    var admin = User.IsInRole("Admin");
    var developer = User.IsInRole("Developer");
    var manageemails = User.IsInRole("ManageEmails");
    var managetrans = User.IsInRole("ManageTransactions");
    var edit = User.IsInRole("Edit");
    var design = User.IsInRole("Design");
    var finance = User.IsInRole("Finance") && ((string)Session["testnofinance"]) != "true";
    var quickbooks = ViewExtensions2.DbSetting("ShowQuickBooksMenu", "false") == "true";
}
@if (admin || manageemails || managetrans || edit || design || finance)
{
    <li class="dropdown dropdown-large">
        @if (finance)
        {
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="visible-xs-inline"><i class="fa fa-cogs"></i>&nbsp;&nbsp;</span><span class="hidden-lg hidden-xs">Admin</span><span class="visible-lg-inline visible-xs-inline">Administration</span> <b class="caret"></b></a>
            <ul class="dropdown-menu dropdown-menu-large row">
                <li class="col-sm-4">
                    <ul>
                        <li class="dropdown-header">Contributions</li>
                        @Helper.LiAnchorLink("Bundles", "/Bundles/")
                        @Helper.LiAnchorLink("Search", "/Contributions/")
                        <li class="divider"></li>
                        @Helper.LiAnchorLink("Statements (All)", "/Statements/", true, "_blank")
                        @Helper.LiAnchorLink("Totals by Fund", "/FinanceReports/TotalsByFund/")
                        <li><a href='/FinanceReports/DonorTotalSummary' class="dialog-options" data-target="/FinanceReports/DonorTotalSummaryOptions">Donor Total Summary Export</a></li>
                        @Helper.LiAnchorLink("Donor Totals by Range", "/FinanceReports/DonorTotalsByRange/")
                        @Helper.LiAnchorLink("Totals by Fund Age Range", "/ContributionReports/TotalsByFundAgeRange.aspx", true, "_blank")
                        @Helper.LiAnchorLink("Totals by Fund Range", "/ContributionReports/TotalsByFundRange.aspx", true, "_blank")
                        @Helper.LiAnchorLink("Pledge Totals by Fund Range", "/ContributionReports/TotalsByFundRange.aspx?pledged=true", true, "_blank")
                        @Helper.LiAnchorLink("Pledge Report", "/FinanceReports/PledgeReport/")
                        @Helper.LiAnchorLink("Managed Giving", "/FinanceReports/ManagedGiving/")
                        <li class="divider"></li>
                        @Helper.LiAnchorLink("Fund Management", "/Funds/")
                        @Helper.LiAnchorLink("Batch Upload Contributions", "/PostBundle/Batch/")
                        @Helper.LiAnchorLink("QuickBooks", "/QuickBooks/", quickbooks)
                    </ul>
                </li>
                <li class="col-sm-4">
                    <ul>
                        @AdminList2(admin, design, managetrans, edit, manageemails, true, developer)
                    </ul>
                </li>
                <li class="col-sm-4">
                    <ul>
                        @AdminList1(admin, design, managetrans, edit, manageemails, true)
                    </ul>
                </li>
            </ul>
        }
        else
        {
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="hidden-lg hidden-xs">Admin</span><span class="visible-lg-inline visible-xs-inline">Administration</span> <b class="caret"></b></a>
            <ul class="dropdown-menu dropdown-menu-large row hidden-xs" style="margin-left: 150px;">
                <li class="col-sm-6">
                    <ul>
                        @AdminList2(admin, design, managetrans, edit, manageemails, finance: false, developer: developer)
                    </ul>
                </li>
                <li class="col-sm-6">
                    <ul>
                        @AdminList1(admin, design, managetrans, edit, manageemails, finance: false)
                    </ul>
                </li>
            </ul>
            <ul class="dropdown-menu dropdown-menu-large row visible-xs-block">
                <li class="col-sm-6">
                    <ul>
                        @AdminList2(admin, design, managetrans, edit, manageemails, finance: false, developer: developer)
                    </ul>
                </li>
                <li class="col-sm-6">
                    <ul>
                        @AdminList1(admin, design, managetrans, edit, manageemails, finance: false)
                    </ul>
                </li>
            </ul>
        }
    </li>
}
@helper AdminList1(bool admin, bool design, bool managetrans, bool edit, bool manageemails, bool finance)
{
    if (admin || finance || design)
    {
        <li class="dropdown-header">Setup</li>
    }
    @Helper.LiAnchorLink("Lookups", "/Lookups/", admin || finance)
    @Helper.LiAnchorLink("Metro Zips", "/MetroZips/", admin)
    @Helper.LiAnchorLink("Promotion", "/PromotionSetup/", admin)
    @Helper.LiAnchorLink("Settings", "/Settings/", admin)
    @Helper.LiAnchorLink("Special Content", "/Display/", admin || design)
    @Helper.LiAnchorLink("Twilio", "/Twilio/", admin)
    if (admin)
    {
        <li class="divider"></li>
        <li class="dropdown-header">Reports</li>
    }
    @Helper.LiAnchorLink("Registration History", "/RegistrationSearch", admin)
    @Helper.LiAnchorLink("Registration Summary", "/Reports/RegistrationSummary?days=90", admin)
    @Helper.LiAnchorLink("Duplicates Find Result", "/Duplicates", admin)
}

@helper AdminList2(bool admin, bool design, bool managetrans, bool edit, bool manageemails, bool finance, bool developer)
{
    if (admin || manageemails || edit || managetrans)
    {
        <li class="dropdown-header">Manage</li>
    }
    @Helper.LiAnchorLink("Activity Log", "/Users/LastActivity/", admin)
    @Helper.LiAnchorLink("Check-in Activity", "/CheckinTimes/", admin || edit)
    @Helper.LiAnchorLink("Check-in Labels", "/CheckinLabels", admin)
    @Helper.LiAnchorLink("Divisions", "/Divisions/", admin)
    @Helper.LiAnchorLink("Emails", "/Emails/", admin || manageemails)
    @Helper.LiAnchorLink("Programs", "/Programs/", admin)
    @Helper.LiAnchorLink("Promotion", "/Promotion/", admin)
    @Helper.LiAnchorLink("SMS Messages", "/SMS/List/", admin)
    @Helper.LiAnchorLink("Transactions", "/Transactions/", admin || managetrans)
    @Helper.LiAnchorLink("Users", "/Users/", admin)
    @Helper.LiAnchorLink("User Can Email For", "/UsersCanEmailFor/", admin || manageemails)
    if (admin)
    {
        <li class="divider"></li>
        <li class="dropdown-header">Batch Actions</li>
    }
    @Helper.LiAnchorLink("Find Duplicates", "/Duplicates/Find", admin)
    @Helper.LiAnchorLink("Update Organizations", "/Batch/UpdateOrg", admin)
    @Helper.LiAnchorLink("Update Fields from a Tag/Query", "/Batch/UpdateFields", admin)
    @Helper.LiAnchorLink("Update Status Flags", "/Batch/UpdateStatusFlags", admin)
    @Helper.LiAnchorLink("Tag PeopleIds", "/Batch/TagPeopleIds", admin)
}