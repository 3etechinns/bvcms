@using UtilityExtensions
@model DateTime?
@{
    var fmt = "{0:d}";
    var s = "";
    if (Model != null)
    {
        if (Model.Value.TimeOfDay.Ticks > 0)
        {
            s = Model.Value.FormatDateTm();
            fmt = "{0:g}";

        }
        else
        {
            s = Model.FormatDate();
        }
    }
}
<div class="control-group @ViewBag.height33 @ViewBag.hide">
    @Html.LabelFor(m => m, new { @class = "control-label" })
    <div class="controls">
        <div class="input-append date" data-date="@s" data-date-format="@Util.jQueryDateFormat2" data-date-orientation="top">
            @Html.TextBoxFor2(m => m, 
                useNativeUnobtrusiveAttributes:true, 
                format: @fmt, 
                htmlAttributes:new { size="16" })<span class="add-on"><i class="fa fa-calendar"></i></span>
        </div>
        @Html.ValidationMessageLabelFor(m => m)
    </div>
</div>
