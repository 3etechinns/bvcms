jQuery.fn.pagination=function(n,t){return t=jQuery.extend({items_per_page:10,num_display_entries:5,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,num_edge_entries:1,callback:function(){return!1}},t||{}),this.each(function(){function f(){return Math.ceil(n/t.items_per_page)}function o(){var n=Math.ceil(t.num_display_entries/2),r=f(),o=r-t.num_display_entries,e=i>n?Math.max(Math.min(i-n,o),0):0,u=i>n?Math.min(i+n,r):Math.min(t.num_display_entries,r);return[e,u]}function u(n,u){i=n,e();var f=t.callback(n,r);return f||(u.stopPropagation?u.stopPropagation():u.cancelBubble=!0),f}function e(){var l,c,n;r.empty();var e=o(),s=f(),a=function(n){return function(t){return u(n,t)}},h=function(n,u){var f;n=n<0?0:n<s?n:s-1,u=jQuery.extend({text:n+1,classes:""},u||{}),f=n==i?jQuery("<span class='current'>"+u.text+"</span>"):jQuery("<a>"+u.text+"</a>").bind("click",a(n)).attr("href",t.link_to.replace(/__id__/,n)),u.classes&&f.addClass(u.classes),r.append(f)};if(t.prev_text&&(i>0||t.prev_show_always)&&h(i-1,{text:t.prev_text,classes:"prev"}),e[0]>0&&t.num_edge_entries>0){for(l=Math.min(t.num_edge_entries,e[0]),n=0;n<l;n++)h(n);t.num_edge_entries<e[0]&&t.ellipse_text&&jQuery("<span>"+t.ellipse_text+"</span>").appendTo(r)}for(n=e[0];n<e[1];n++)h(n);if(e[1]<s&&t.num_edge_entries>0)for(s-t.num_edge_entries>e[1]&&t.ellipse_text&&jQuery("<span>"+t.ellipse_text+"</span>").appendTo(r),c=Math.max(s-t.num_edge_entries,e[1]),n=c;n<s;n++)h(n);t.next_text&&(i<s-1||t.next_show_always)&&h(i+1,{text:t.next_text,classes:"next"})}var i=t.current_page,r;n=!n||n<0?1:n,t.items_per_page=!t.items_per_page||t.items_per_page<0?1:t.items_per_page,r=jQuery(this),this.selectPage=function(n){u(n)},this.prevPage=function(){return i>0?(u(i-1),!0):!1},this.nextPage=function(){return i<f()-1?(u(i+1),!0):!1},e()})};(function(n){var i=0;n.widget("ech.multiselect",{options:{header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:"",hide:"",autoOpen:!1,multiple:!0,position:{}},_create:function(){var r=this.element.hide(),t=this.options;this.speed=n.fx.speeds._default,this._isOpen=!1;var f=(this.button=n('<button type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(t.classes).attr({title:r.attr("title"),"aria-haspopup":!0,tabIndex:r.attr("tabIndex")}).insertAfter(r),s=(this.buttonlabel=n("<span />")).html(t.noneSelectedText).appendTo(f),i=(this.menu=n("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(t.classes).appendTo(document.body),u=(this.header=n("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(i),o=(this.headerLinkContainer=n("<ul />")).addClass("ui-helper-reset").html(function(){return t.header===!0?'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+t.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+t.uncheckAllText+"</span></a></li>":typeof t.header=="string"?"<li>"+t.header+"</li>":""}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(u),e=(this.checkboxContainer=n("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(i);this._bindEvents(),this.refresh(!0),t.multiple||i.addClass("ui-multiselect-single")},_init:function(){this.options.header===!1&&this.header.hide(),this.options.multiple||this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide(),this.options.autoOpen&&this.open(),this.element.is(":disabled")&&this.disable()},refresh:function(t){var e=this.element,o=this.options,s=this.menu,h=this.checkboxContainer,u=[],r=[],f=e.attr("id")||i++;e.find("option").each(function(t){var p=n(this),l=this.parentNode,a=this.innerHTML,y=this.title,v=this.value,h=this.id||"ui-multiselect-"+f+"-option-"+t,e=this.disabled,c=this.selected,s=["ui-corner-all"],i;l.tagName.toLowerCase()==="optgroup"&&(i=l.getAttribute("label"),n.inArray(i,u)===-1&&(r.push('<li class="ui-multiselect-optgroup-label"><a href="#">'+i+"</a></li>"),u.push(i))),e&&s.push("ui-state-disabled"),c&&!o.multiple&&s.push("ui-state-active"),r.push('<li class="'+(e?"ui-multiselect-disabled":"")+'">'),r.push('<label for="'+h+'" title="'+y+'" class="'+s.join(" ")+'">'),r.push('<input id="'+h+'" name="multiselect_'+f+'" type="'+(o.multiple?"checkbox":"radio")+'" value="'+v+'" title="'+a+'"'),c&&(r.push(' checked="checked"'),r.push(' aria-selected="true"')),e&&(r.push(' disabled="disabled"'),r.push(' aria-disabled="true"')),r.push(" /><span>"+a+"</span></label></li>")}),h.html(r.join("")),this.labels=s.find("label"),this._setButtonWidth(),this._setMenuWidth(),this.button[0].defaultValue=this.update(),t||this._trigger("refresh")},update:function(){var t=this.options,f=this.labels.find("input"),u=f.filter("[checked]"),r=u.length,i;return i=r===0?t.noneSelectedText:n.isFunction(t.selectedText)?t.selectedText.call(this,r,f.length,u.get()):/\d/.test(t.selectedList)&&t.selectedList>0&&r<=t.selectedList?u.map(function(){return n(this).next().text()}).get().join(", "):t.selectedText.replace("#",r).replace("#",f.length),this.buttonlabel.html(i),i},_bindEvents:function(){function r(){return t[t._isOpen?"close":"open"](),!1}var t=this,i=this.button;i.find("span").bind("click.multiselect",r),i.bind({click:r,keypress:function(n){switch(n.which){case 27:case 38:case 37:t.close();break;case 39:case 40:t.open()}},mouseenter:function(){i.hasClass("ui-state-disabled")||n(this).addClass("ui-state-hover")},mouseleave:function(){n(this).removeClass("ui-state-hover")},focus:function(){i.hasClass("ui-state-disabled")||n(this).addClass("ui-state-focus")},blur:function(){n(this).removeClass("ui-state-focus")}}),this.header.delegate("a","click.multiselect",function(i){n(this).hasClass("ui-multiselect-close")?t.close():t[n(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"](),i.preventDefault()}),this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(i){i.preventDefault();var e=n(this),r=e.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),u=r.get(),f=e.parent().text();t._trigger("beforeoptgrouptoggle",i,{inputs:u,label:f})!==!1&&(t._toggleChecked(r.filter("[checked]").length!==r.length,r),t._trigger("optgrouptoggle",i,{inputs:u,label:f,checked:u[0].checked}))}).delegate("label","mouseenter.multiselect",function(){n(this).hasClass("ui-state-disabled")||(t.labels.removeClass("ui-state-hover"),n(this).addClass("ui-state-hover").find("input").focus())}).delegate("label","keydown.multiselect",function(i){i.preventDefault();switch(i.which){case 9:case 27:t.close();break;case 38:case 40:case 37:case 39:t._traverse(i.which,this);break;case 13:n(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(i){var u=n(this),f=this.value,r=this.checked,e=t.element.find("option");if(this.disabled||t._trigger("click",i,{value:f,text:this.title,checked:r})===!1){i.preventDefault();return}u.focus(),u.attr("aria-selected",r),e.each(function(){this.value===f?this.selected=r:t.options.multiple||(this.selected=!1)}),t.options.multiple||(t.labels.removeClass("ui-state-active"),u.closest("label").toggleClass("ui-state-active",r),t.close()),t.element.trigger("change"),setTimeout(n.proxy(t.update,t),10)}),n(document).bind("mousedown.multiselect",function(i){!t._isOpen||n.contains(t.menu[0],i.target)||n.contains(t.button[0],i.target)||i.target===t.button[0]||t.close()}),n(this.element[0].form).bind("reset.multiselect",function(){setTimeout(n.proxy(t.refresh,t),10)})},_setButtonWidth:function(){var t=this.element.outerWidth(),n=this.options;/\d/.test(n.minWidth)&&t<n.minWidth&&(t=n.minWidth),this.button.width(t)},_setMenuWidth:function(){var n=this.menu,t=this.button.outerWidth()-parseInt(n.css("padding-left"),10)-parseInt(n.css("padding-right"),10)-parseInt(n.css("border-right-width"),10)-parseInt(n.css("border-left-width"),10);n.width(t||this.button.outerWidth())},_traverse:function(t,i){var e=n(i),r=t===38||t===37,f=e.parent()[r?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[r?"last":"first"](),u;f.length?f.find("label").trigger("mouseover"):(u=this.menu.find("ul").last(),this.menu.find("label")[r?"last":"first"]().trigger("mouseover"),u.scrollTop(r?u.height():0))},_toggleState:function(n,t){return function(){this.disabled||(this[n]=t),t?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(t,i){var r=i&&i.length?i:this.labels.find("input"),f=this,u;r.each(this._toggleState("checked",t)),r.eq(0).focus(),this.update(),u=r.map(function(){return this.value}).get(),this.element.find("option").each(function(){!this.disabled&&n.inArray(this.value,u)>-1&&f._toggleState("selected",t).call(this)}),r.length&&this.element.trigger("change")},_toggleDisabled:function(n){this.button.attr({disabled:n,"aria-disabled":n})[n?"addClass":"removeClass"]("ui-state-disabled"),this.menu.find("input").attr({disabled:n,"aria-disabled":n}).parent()[n?"addClass":"removeClass"]("ui-state-disabled"),this.element.attr({disabled:n,"aria-disabled":n})},open:function(){var h=this,r=this.button,e=this.menu,f=this.speed,i=this.options;if(this._trigger("beforeopen")!==!1&&!r.hasClass("ui-state-disabled")&&!this._isOpen){var s=e.find("ul").last(),u=i.show,o=r.offset();n.isArray(i.show)&&(u=i.show[0],f=i.show[1]||h.speed),s.scrollTop(0).height(i.height),n.ui.position&&!n.isEmptyObject(i.position)?(i.position.of=i.position.of||r,e.show().position(i.position).hide().show(u,f)):e.css({top:o.top+r.outerHeight(),left:o.left}).show(u,f),this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus"),r.addClass("ui-state-active"),this._isOpen=!0,this._trigger("open")}},close:function(){if(this._trigger("beforeclose")!==!1){var t=this.options,r=t.hide,i=this.speed;n.isArray(t.hide)&&(r=t.hide[0],i=t.hide[1]||this.speed),this.menu.hide(r,i),this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave"),this._isOpen=!1,this._trigger("close")}},enable:function(){this._toggleDisabled(!1)},disable:function(){this._toggleDisabled(!0)},checkAll:function(){this._toggleChecked(!0),this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(!1),this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter("[checked]")},destroy:function(){return n.Widget.prototype.destroy.call(this),this.button.remove(),this.menu.remove(),this.element.show(),this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},_setOption:function(t,i){var r=this.menu;switch(t){case"header":r.find("div.ui-multiselect-header")[i?"show":"hide"]();break;case"checkAllText":r.find("a.ui-multiselect-all span").eq(-1).text(i);break;case"uncheckAllText":r.find("a.ui-multiselect-none span").eq(-1).text(i);break;case"height":r.find("ul").last().height(parseInt(i,10));break;case"minWidth":this.options[t]=parseInt(i,10),this._setButtonWidth(),this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[t]=i,this.update();break;case"classes":r.add(this.button).removeClass(this.options.classes).addClass(i)}n.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);(function(n){n(".bt").button();var t;n.fn.SearchPeople=function(i,r,u){return t=n.extend({multi:!1},u||{}),t.Target=i.target,t.Select=r,t.SearchClicked=function(){return t.qs=n("#searchform",t.$this).serialize(),n.post("/SearchPeople/Rows/0",t.qs,t.LoadRows),!1},t.SortClicked=function(i){return n("#people #Sort",t.$this).val(n(i.target).text()),t.SearchClicked()},t.LoadRows=function(i){n("#people > tbody",t.$this).html(i).ready(function(){n("#people",t.$this).SearchPeoplePager(),t.BindSelect()})},t.LoadRowsPage=function(i){n("#people > tbody",t.$this).html(i).ready(function(){t.BindSelect()})},t.AddNew=function(i){return confirm("Are you sure you want to add a new person?")?(t.qs=n("#searchform",t.$this).serialize(),i.target.id!="AddNew"&&(t.qs=t.qs.appendQuery("ExistingFamilyMember="+i.target.id.substring(1))),n.post("/SearchPeople/AddNew",t.qs,function(i){i.err?n.growlUI("error",i.err):(t.Select(t.Target.id,i.PeopleId),t.$this.dialog("close"))}),!1):!1},t.ClearForm=function(){return n("#searchform .clearable").clearFields(),!1},t.DisplaySelect=function(){n("#AddToExisting").attr("checked")?(n(".select",t.$this).hide(),n(".add",t.$this).show()):(n(".add",t.$this).hide(),n(".select",t.$this).show())},t.BindSelect=function(){n(".select",t.$this).click(function(n){t.Select(t.Target.id,n.target.id.substring(1)),t.$this.dialog("close")}),n(".add",t.$this).click(t.AddNew),t.DisplaySelect()},t.$this=n(this[0]),t.qs="",t.entrypoint&&(t.qs=t.qs.appendQuery("entrypoint="+t.entrypoint)),t.origin&&(t.qs=t.qs.appendQuery("origin="+t.origin)),t.multi&&(t.qs=t.qs.appendQuery("select=2")),this.load("/SearchPeople/",t.qs,function(){t.qs=n("#searchform",t.$this).serialize(),n("#people",t.$this).SearchPeoplePager(),t.BindSelect(),n("#AddNew",t.$this).click(t.AddNew),n("#ClearForm",t.$this).click(t.ClearForm),n("#AddToExisting",t.$this).click(t.DisplaySelect),n("a.sortable",t.$this).click(t.SortClicked),n("#Search",t.$this).click(t.SearchClicked)}),this.dialog("open"),this},n.fn.SearchPeoplePager=function(){return this.each(function(){n("#PageSize",t.$this).change(t.SearchClicked),n(".pagination",t.$this).pagination(n("#Count",t.$this).val(),{items_per_page:n("#PageSize",t.$this).val(),num_display_entries:5,num_edge_entries:1,current_page:0,callback:function(i){return n.post("/SearchPeople/Rows/"+i,t.qs,t.LoadRowsPage),!1}}),n("#NumItems",this).text(n("#Count",t.$this).val().addCommas()+" items")})},n.fn.SearchPeopleInit=function(t){var i=n.extend({overlay:{background:"#000",opacity:.8},bgiframe:!0,modal:!0,autoOpen:!1,title:"Search People",closeOnEscape:!0,width:700,height:525,position:"top",close:function(){n(this).empty()}},t||{});return this.each(function(){n(this).dialog(i)})}})(jQuery);function RebindMemberGrids(){$.updateTable($("#current-tab form")),$.updateTable($("#pending-tab form")),$("#memberDialog").dialog("close")}function RebindUserInfoGrid(){$.updateTable($("#user-tab form")),$("#memberDialog").dialog("close")}$(function(){var t=$("#address-tab").tabs(),n;$("#enrollment-tab").tabs(),$("#member-tab").tabs(),$("#growth-tab").tabs(),$("#system-tab").tabs(),n=$("#main-tab").tabs(),$(".submitbutton,.bt").button(),t.tabs("select",$("#addrtab").val()),$("#dialogbox").SearchPeopleInit({overlay:{background:"#000",opacity:.3}}),$("#clipaddr").live("click",function(){var t=$("#addrhidden")[0],n;return t.createTextRange&&(n=t.createTextRange(),n&&n.execCommand("Copy")),!1}),$("#deleteperson").click(function(){var n=$(this).attr("href");return confirm("Are you sure you want to delete?")&&$.post(n,null,function(n){n!="ok"?($.blockUI({message:"delete Failed: "+n}),$(".blockOverlay").attr("title","Click to unblock").click($.unblockUI)):($.blockUI({message:"person deleted"}),$(".blockOverlay").attr("title","Click to unblock").click(function(){$.unblockUI(),window.location="/"}))}),!1}),$("a.deloptout").live("click",function(n){n.preventDefault();var t=$(this).attr("href");confirm("Are you sure you want to delete?")&&$.post(t,{},function(n){n!="ok"?$.growlUI("failed",n):($.updateTable($("#user-tab form")),$.growlUI("Success","OptOut deleted"))})}),$("#moveperson").click(function(n){return $("#dialogbox").SearchPeople(n,function(n,t){window.location="/Merge?PeopleId1="+$("#PeopleId").val()+"&PeopleId2="+t}),!1}),$.editable.addInputType("datepicker",{element:function(n){var i=$("<input>");return n.width!="none"&&i.width(n.width),n.height!="none"&&i.height(n.height),i.attr("autocomplete","off"),$(this).append(i),i},plugin:function(n){var i=this;n.onblur="ignore",$(this).find("input").datepicker().bind("click",function(){return $(this).datepicker("show"),!1}).bind("dateSelected",function(){$(i).submit()})}}),$.editable.addInputType("multiselect",{element:function(n){var i=$('<select multiple="multiple" />');return n.width!="none"&&i.width(n.width),n.size&&i.attr("size",n.size),$(this).append(i),i},content:function(n){var r,u;for(r in n)u=$("<option />").val(r).text(r),n[r]==!0&&u.attr("selected",!0),$("select",this).append(u);$("select",this).multiselect({close:function(){var i=$("select").val()},position:{my:"left bottom",at:"left top"}})}}),$.extraEditable=function(n){$(".editarea",n).editable("/Person/EditExtra/",{type:"textarea",submit:"OK",rows:10,width:600,indicator:'<img src="/images/loading.gif">',tooltip:"Click to edit..."}),$(".clickEdit",n).editable("/Person/EditExtra/",{indicator:"<img src='/images/loading.gif'>",tooltip:"Click to edit...",style:"display: inline",width:"300px",height:25,submit:"OK"}),$(".clickDatepicker").editable("/Person/EditExtra/",{type:"datepicker",tooltip:"Click to edit...",style:"display: inline",width:"300px",submit:"OK"}),$(".clickSelect",n).editable("/Person/EditExtra/",{indicator:'<img src="/images/loading.gif">',loadurl:"/Person/ExtraValues/",loadtype:"POST",type:"select",submit:"OK",style:"display: inline"}),$(".clickCheckbox",n).editable("/Person/EditExtra",{type:"checkbox",onblur:"ignore",submit:"OK"}),$(".clickMultiselect",n).editable("/Person/EditExtra",{indicator:'<img src="/images/loading.gif">',loadurl:"/Person/ExtraValues2/",loadtype:"POST",type:"multiselect",submit:"OK",onblur:"ignore",style:"display: inline"})},$.getTable=function(n,t){return t=t||n.serialize(),$.post(n.attr("action"),t,function(t){$(n).html(t).ready(function(){$("table.grid > tbody > tr:even",n).addClass("alt"),$(".bt").button(),$(".datepicker").datepicker(),$.extraEditable("#extravalues"),$(".tooltip",n).tooltip({showURL:!1,showBody:"|"})})}),!1},$("#memberDialog").dialog({title:"Member Dialog",bgiframe:!0,autoOpen:!1,width:600,height:550,modal:!0,overlay:{opacity:.5,background:"black"},close:function(){$("iframe",this).attr("src","")}}),$("form a.membertype").live("click",function(n){n.preventDefault();var t=$("#memberDialog");$("iframe",t).attr("src",this.href),t.dialog("open")}),$("#previous-tab form a.membertype").live("click",function(n){n.preventDefault();var t=$("#memberDialog");$("iframe",t).attr("src",this.href),t.dialog("open")}),$(".CreateAndGo").click(function(){return confirm($(this).attr("confirm"))&&$.post($(this).attr("href"),null,function(n){window.location=n}),!1}),$("#enrollment-link").click(function(){$.showTable($("#current-tab form"))}),$("#previous-link").click(function(){$.showTable($("#previous-tab form"))}),$("#pending-link").click(function(){$.showTable($("#pending-tab form"))}),$("#attendance-link").click(function(){$.showTable($("#attendance-tab form"))}),$("#contacts-link").click(function(){$("#contacts-tab form").each(function(){$.showTable($(this))})}),$("#member-link").click(function(){var n=$("#memberdisplay");$("table",n).size()==0&&($.post(n.attr("action"),null,function(t){$(n).html(t).ready(function(){$.UpdateForSection(n),ShowMemberExtras()})}),$.showTable($("#extras-tab form")),$.extraEditable("#extravalues"))}),$("#system-link").click(function(){$.showTable($("#user-tab form"))}),$("#changes-link").click(function(){$.showTable($("#changes-tab form"))}),$("#volunteer-link").click(function(){$.showTable($("#volunteer-tab form"))}),$("#duplicates-link").click(function(){$.showTable($("#duplicates-tab form"))}),$("#optouts-link").click(function(){$.showTable($("#optouts-tab form"))}),$("#family table.grid > tbody > tr:even").addClass("alt"),$("#recreg-link").click(function(n){var t,i;return(n.preventDefault(),t=$("#recreg-tab form"),$("table",t).size()>0)?!1:(i=t.serialize(),$.post(t.attr("action"),i,function(n){$(t).html(n)}),!1)}),$("a.displayedit").live("click",function(n){n.preventDefault();var t=$(this).closest("form");return $.post($(this).attr("href"),null,function(n){$(t).html(n).ready(function(){$.UpdateForSection(t)})}),!1}),$.UpdateForSection=function(n){var t={minChars:3,matchContains:1};return $("#Employer",n).autocomplete("/Person/Employers",t),$("#School",n).autocomplete("/Person/Schools",t),$("#Occupation",n).autocomplete("/Person/Occupations",t),$("#NewChurch,#PrevChurch",n).autocomplete("/Person/Churches",t),$(".datepicker").datepicker(),$(".submitbutton,.bt").button(),$(".dropdown",n).hoverIntent(dropdownshow,dropdownhide),$("#verifyaddress").click(function(){var n=$(this).closest("form"),t=n.serialize();return $.post($(this).attr("href"),t,function(t){confirm(t.address+"\nUse this Address?")&&($("#Address1",n).val(t.Line1),$("#Address2",n).val(t.Line2),$("#City",n).val(t.City),$("#State",n).val(t.State),$("#Zip",n).val(t.Zip))}),!1}),!1},$("form.DisplayEdit a.submitbutton").live("click",function(n){var t,i;if(n.preventDefault(),t=$(this).closest("form"),$(t).valid())return i=t.serialize(),$.post($(this).attr("href"),i,function(n){$(t).html(n).ready(function(){var n=$("#businesscard");$.post($(n).attr("href"),null,function(t){$(n).html(t)}),$(".dropdown",t).hoverIntent(dropdownshow,dropdownhide),$(".submitbutton,.bt").button()})}),!1}),$("#future").live("click",function(n){n.preventDefault();var t=$(this).closest("form"),i=t.serialize();$.post($(t).attr("action"),i,function(n){$(t).html(n)})}),$("form.DisplayEdit").submit(function(){return $("#submitit").val()?!0:!1}),$.validator.setDefaults({highlight:function(n){$(n).addClass("ui-state-highlight")},unhighlight:function(n){$(n).removeClass("ui-state-highlight")},rules:{NickName:{maxlength:15},Title:{maxlength:10},First:{maxlength:25,required:!0},Middle:{maxlength:15},Last:{maxlength:100,required:!0},Suffix:{maxlength:10},AltName:{maxlength:100},Maiden:{maxlength:20},HomePhone:{maxlength:20},CellPhone:{maxlength:20},WorkPhone:{maxlength:20},EmailAddress:{maxlength:150},School:{maxlength:60},Employer:{maxlength:60},Occupation:{maxlength:60},WeddingDate:{date:!0},DeceasedDate:{date:!0},Grade:{number:!0},Address1:{maxlength:40},Address2:{maxlength:40},City:{maxlength:30},Zip:{maxlength:15},FromDt:{date:!0},ToDt:{date:!0}}}),$("#addrf").validate(),$("#addrp").validate(),$("#basic").validate(),$(".atck").live("change",function(){var t=$(this);$.post("/Meeting/MarkAttendance/",{MeetingId:$(this).attr("mid"),PeopleId:$(this).attr("pid"),Present:t.is(":checked")},function(n){if(n.error)t.attr("checked",!t.is(":checked")),alert(n.error);else{var i=t.closest("form"),r=i.serialize();$.post($(i).attr("action"),r,function(n){$(i).html(n)})}})}),$("#newvalueform").dialog({autoOpen:!1,buttons:{Ok:function(){var i=$("input[name='typeval']:checked").val(),n=$("#fieldname").val(),t=$("#fieldvalue").val();n&&$.post("/Person/NewExtraValue/"+$("#PeopleId").val(),{field:n,type:i,value:t},function(n){n.startsWith("error")?alert(n):($.getTable($("#extras-tab form")),$.extraEditable("#extravalues")),$("#fieldname").val(""),$("#fieldvalue").val("")}),$(this).dialog("close")}}}),$("#newextravalue").live("click",function(n){n.preventDefault();var t=$("#newvalueform");t.dialog("open")}),$("a.deleteextra").live("click",function(n){return n.preventDefault(),confirm("are you sure?")&&$.post("/Person/DeleteExtra/"+$("#PeopleId").val(),{field:$(this).attr("field")},function(n){n.startsWith("error")?alert(n):($.getTable($("#extras-tab form")),$.extraEditable("#extravalues"))}),!1}),$("a.reverse").live("click",function(n){n.preventDefault();var t=$(this).closest("form");$.post("/Person/Reverse",{id:$("#PeopleId").val(),field:$(this).attr("field"),value:$(this).attr("value"),pf:$(this).attr("pf")},function(n){$(t).html(n)})}),$.editable.addInputType("checkbox",{element:function(){var i=$('<input type="checkbox">');return $(this).append(i),$(i).click(function(){var n=$(i).attr("checked")?"True":"False";$(i).val(n)}),i},content:function(n){var f=n=="True"?!0:!1,r=$(":input:first",this),u;$(r).attr("checked",f),u=$(r).attr("checked")?"True":"False",$(r).val(u)}})})