jQuery&&function(){$.extend($.fn,{contextMenu:function(n,t){return n.menu==undefined?!1:(n.inSpeed==undefined&&(n.inSpeed=150),n.outSpeed==undefined&&(n.outSpeed=75),n.inSpeed==0&&(n.inSpeed=-1),n.outSpeed==0&&(n.outSpeed=-1),$(this).each(function(){var i=$(this),r=$(i).offset();$("#"+n.menu).addClass("contextMenu"),$(this).mousedown(function(u){var f=u;$(this).mouseup(function(u){var c=$(this),e,o,s,h;if($(this).unbind("mouseup"),f.button==2){if($(".contextMenu").hide(),e=$("#"+n.menu),$(i).hasClass("disabled"))return!1;o={},self.innerHeight?(o.pageYOffset=self.pageYOffset,o.pageXOffset=self.pageXOffset,o.innerHeight=self.innerHeight,o.innerWidth=self.innerWidth):document.documentElement&&document.documentElement.clientHeight?(o.pageYOffset=document.documentElement.scrollTop,o.pageXOffset=document.documentElement.scrollLeft,o.innerHeight=document.documentElement.clientHeight,o.innerWidth=document.documentElement.clientWidth):document.body&&(o.pageYOffset=document.body.scrollTop,o.pageXOffset=document.body.scrollLeft,o.innerHeight=document.body.clientHeight,o.innerWidth=document.body.clientWidth),s=u.pageX?u.pageX:u.clientX+o.scrollLeft,u.pageY?h=u.pageY:s=u.clientY+o.scrollTop,$(document).unbind("click"),$(e).css({top:h,left:s}).fadeIn(n.inSpeed),$(e).find("A").mouseover(function(){$(e).find("LI.hover").removeClass("hover"),$(this).parent().addClass("hover")}).mouseout(function(){$(e).find("LI.hover").removeClass("hover")}),$(document).keypress(function(n){switch(n.keyCode){case 38:$(e).find("LI.hover").size()==0?$(e).find("LI:last").addClass("hover"):($(e).find("LI.hover").removeClass("hover").prevAll("LI:not(.disabled)").eq(0).addClass("hover"),$(e).find("LI.hover").size()==0&&$(e).find("LI:last").addClass("hover"));break;case 40:$(e).find("LI.hover").size()==0?$(e).find("LI:first").addClass("hover"):($(e).find("LI.hover").removeClass("hover").nextAll("LI:not(.disabled)").eq(0).addClass("hover"),$(e).find("LI.hover").size()==0&&$(e).find("LI:first").addClass("hover"));break;case 13:$(e).find("LI.hover A").trigger("click");break;case 27:$(document).trigger("click")}}),$("#"+n.menu).find("A").unbind("click"),$("#"+n.menu).find("LI:not(.disabled) A").click(function(){return $(document).unbind("click").unbind("keypress"),$(".contextMenu").hide(),t&&t($(this).attr("href").substr(1),$(c),{x:s-r.left,y:h-r.top,docX:s,docY:h}),!1}),setTimeout(function(){$(document).click(function(){return $(document).unbind("click").unbind("keypress"),$(e).fadeOut(n.outSpeed),!1})},0)}})}),$.browser.mozilla?$("#"+n.menu).each(function(){$(this).css({MozUserSelect:"none"})}):$.browser.msie?$("#"+n.menu).each(function(){$(this).bind("selectstart.disableTextSelect",function(){return!1})}):$("#"+n.menu).each(function(){$(this).bind("mousedown.disableTextSelect",function(){return!1})}),$(i).add("UL.contextMenu").bind("contextmenu",function(){return!1})}),$(this))},disableContextMenuItems:function(n){return n==undefined?($(this).find("LI").addClass("disabled"),$(this)):($(this).each(function(){var i,t;if(n!=undefined)for(i=n.split(","),t=0;t<i.length;t++)$(this).find('A[href="'+i[t]+'"]').parent().addClass("disabled")}),$(this))},enableContextMenuItems:function(n){return n==undefined?($(this).find("LI.disabled").removeClass("disabled"),$(this)):($(this).each(function(){var i,t;if(n!=undefined)for(i=n.split(","),t=0;t<i.length;t++)$(this).find('A[href="'+i[t]+'"]').parent().removeClass("disabled")}),$(this))},disableContextMenu:function(){return $(this).each(function(){$(this).addClass("disabled")}),$(this)},enableContextMenu:function(){return $(this).each(function(){$(this).removeClass("disabled")}),$(this)},destroyContextMenu:function(){return $(this).each(function(){$(this).unbind("mousedown").unbind("mouseup")}),$(this)}})}(jQuery)