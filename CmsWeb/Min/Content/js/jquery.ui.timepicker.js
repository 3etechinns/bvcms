(function(n,t){function u(){this.debug=!0,this._curInst=null,this._isInline=!1,this._disabledInputs=[],this._timepickerShowing=!1,this._inDialog=!1,this._dialogClass="ui-timepicker-dialog",this._mainDivId="ui-timepicker-div",this._inlineClass="ui-timepicker-inline",this._currentClass="ui-timepicker-current",this._dayOverClass="ui-timepicker-days-cell-over",this.regional=[],this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"]},this._defaults={showOn:"focus",button:null,showAnim:"fadeIn",showOptions:{},appendText:"",onSelect:null,onClose:null,timeSeparator:":",showPeriod:!1,showPeriodLabels:!0,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:"",onHourShow:null,onMinuteShow:null,zIndex:null,hours:{starts:0,ends:23},minutes:{starts:0,ends:55,interval:5},rows:4},n.extend(this._defaults,this.regional[""]),this.tpDiv=n('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function r(i,r){n.extend(i,r);for(var u in r)(r[u]==null||r[u]==t)&&(i[u]=r[u]);return i}n.extend(n.ui,{timepicker:{version:"0.2.2"}});var i="timepicker",f=+new Date;n.extend(u.prototype,{markerClassName:"hasTimepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(n){return r(this._defaults,n||{}),this},_attachTimepicker:function(t,i){var r=null,e,o,u,s,f;for(e in this._defaults)if(o=t.getAttribute("time:"+e),o){r=r||{};try{r[e]=eval(o)}catch(h){r[e]=o}}u=t.nodeName.toLowerCase(),s=u=="div"||u=="span",t.id||(this.uuid+=1,t.id="tp"+this.uuid),f=this._newInst(n(t),s),f.settings=n.extend({},i||{},r||{}),u=="input"?this._connectTimepicker(t,f):s&&this._inlineTimepicker(t,f)},_newInst:function(t,i){var r=t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:r,input:t,inline:i,tpDiv:i?n('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>'):this.tpDiv}},_connectTimepicker:function(t,r){var u=n(t);(r.append=n([]),r.trigger=n([]),u.hasClass(this.markerClassName))||(this._attachments(u,r),u.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",function(n,t,i){r.settings[t]=i}).bind("getData.timepicker",function(n,t){return this._get(r,t)}),n.data(t,i,r))},_doKeyDown:function(t){var r=n.timepicker._getInst(t.target),i=!0;if(r._keyEvent=!0,n.timepicker._timepickerShowing)switch(t.keyCode){case 9:n.timepicker._hideTimepicker(),i=!1;break;case 13:return n.timepicker._updateSelectedValue(r),n.timepicker._hideTimepicker(),!1;case 27:n.timepicker._hideTimepicker();break;default:i=!1}else t.keyCode==36&&t.ctrlKey?n.timepicker._showTimepicker(this):i=!1;i&&(t.preventDefault(),t.stopPropagation())},_doKeyUp:function(t){var i=n.timepicker._getInst(t.target);n.timepicker._setTimeFromField(i),n.timepicker._updateTimepicker(i)},_attachments:function(t,i){var f=this._get(i,"appendText"),e=this._get(i,"isRTL"),r,u;i.append&&i.append.remove(),f&&(i.append=n('<span class="'+this._appendClass+'">'+f+"</span>"),t[e?"before":"after"](i.append)),t.unbind("focus.timepicker",this._showTimepicker),i.trigger&&i.trigger.remove(),r=this._get(i,"showOn"),(r=="focus"||r=="both")&&t.bind("focus.timepicker",this._showTimepicker),(r=="button"||r=="both")&&(u=this._get(i,"button"),n(u).bind("click.timepicker",function(){return n.timepicker._timepickerShowing&&n.timepicker._lastInput==t[0]?n.timepicker._hideTimepicker():n.timepicker._showTimepicker(t[0]),!1}))},_inlineTimepicker:function(t,r){var u=n(t);u.hasClass(this.markerClassName)||(u.addClass(this.markerClassName).append(r.tpDiv).bind("setData.timepicker",function(n,t,i){r.settings[t]=i}).bind("getData.timepicker",function(n,t){return this._get(r,t)}),n.data(t,i,r),this._setTimeFromField(r),this._updateTimepicker(r),r.tpDiv.show())},_showTimepicker:function(t){var i,h,u,e;if((t=t.target||t,t.nodeName.toLowerCase()!="input"&&(t=n("input",t.parentNode)[0]),!n.timepicker._isDisabledTimepicker(t)&&n.timepicker._lastInput!=t)&&(n.timepicker._hideTimepicker(),i=n.timepicker._getInst(t),n.timepicker._curInst&&n.timepicker._curInst!=i&&n.timepicker._curInst.tpDiv.stop(!0,!0),h=n.timepicker._get(i,"beforeShow"),r(i.settings,h?h.apply(t,[t,i]):{}),i.lastVal=null,n.timepicker._lastInput=t,n.timepicker._setTimeFromField(i),n.timepicker._inDialog&&(t.value=""),n.timepicker._pos||(n.timepicker._pos=n.timepicker._findPos(t),n.timepicker._pos[1]+=t.offsetHeight),u=!1,n(t).parents().each(function(){return u|=n(this).css("position")=="fixed",!u}),u&&n.browser.opera&&(n.timepicker._pos[0]-=document.documentElement.scrollLeft,n.timepicker._pos[1]-=document.documentElement.scrollTop),e={left:n.timepicker._pos[0],top:n.timepicker._pos[1]},n.timepicker._pos=null,i.tpDiv.css({position:"absolute",display:"block",top:"-1000px"}),n.timepicker._updateTimepicker(i),i._hoursClicked=!1,i._minutesClicked=!1,e=n.timepicker._checkOffset(i,e,u),i.tpDiv.css({position:n.timepicker._inDialog&&n.blockUI?"static":u?"fixed":"absolute",display:"none",left:e.left+"px",top:e.top+"px"}),!i.inline)){var f=n.timepicker._get(i,"showAnim"),c=n.timepicker._get(i,"duration"),o=n.timepicker._get(i,"zIndex"),s=function(){n.timepicker._timepickerShowing=!0;var t=n.timepicker._getBorders(i.tpDiv);i.tpDiv.find("iframe.ui-timepicker-cover").css({left:-t[0],top:-t[1],width:i.tpDiv.outerWidth(),height:i.tpDiv.outerHeight()})};o||(o=n(t).zIndex()+1),i.tpDiv.zIndex(o),n.effects&&n.effects[f]?i.tpDiv.show(f,n.timepicker._get(i,"showOptions"),c,s):i.tpDiv[f||"show"](f?c:null,s),f&&c||s(),i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus(),n.timepicker._curInst=i}},_updateTimepicker:function(t){var r=this,i=n.timepicker._getBorders(t.tpDiv);t.tpDiv.empty().append(this._generateHTML(t)).find("iframe.ui-timepicker-cover").css({left:-i[0],top:-i[1],width:t.tpDiv.outerWidth(),height:t.tpDiv.outerHeight()}).end().find(".ui-timepicker-minute-cell").bind("click",{fromDoubleClick:!1},n.proxy(n.timepicker.selectMinutes,this)).bind("dblclick",{fromDoubleClick:!0},n.proxy(n.timepicker.selectMinutes,this)).end().find(".ui-timepicker-hour-cell").bind("click",{fromDoubleClick:!1},n.proxy(n.timepicker.selectHours,this)).bind("dblclick",{fromDoubleClick:!0},n.proxy(n.timepicker.selectHours,this)).end().find(".ui-timepicker td a").bind("mouseout",function(){n(this).removeClass("ui-state-hover"),this.className.indexOf("ui-timepicker-prev")!=-1&&n(this).removeClass("ui-timepicker-prev-hover"),this.className.indexOf("ui-timepicker-next")!=-1&&n(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",function(){r._isDisabledTimepicker(t.inline?t.tpDiv.parent()[0]:t.input[0])||(n(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),n(this).addClass("ui-state-hover"),this.className.indexOf("ui-timepicker-prev")!=-1&&n(this).addClass("ui-timepicker-prev-hover"),this.className.indexOf("ui-timepicker-next")!=-1&&n(this).addClass("ui-timepicker-next-hover"))}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end()},_generateHTML:function(t){for(var b,r,i="",v=this._get(t,"showPeriod")==!0,l=this._get(t,"showPeriodLabels")==!0,p=this._get(t,"showLeadingZero")==!0,a=this._get(t,"amPmText"),s=this._get(t,"rows"),e=s/2,w=e+1,f=Array(),c=this._get(t,"hours"),h=null,o=0,y=this._get(t,"hourText"),u=c.starts;u<=c.ends;u++)f.push(u);for(h=Math.round(f.length/s+.49),i='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr><td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+y+'</div><table class="ui-timepicker">',r=1;r<=s;r++){for(i+="<tr>",r==1&&l&&(i+='<th rowspan="'+e.toString()+'" class="periods">'+a[0]+"</th>"),r==w&&l&&(i+='<th rowspan="'+e.toString()+'" class="periods">'+a[1]+"</th>");o<h*r;)i+=this._generateHTMLHourCell(t,f[o],v,p),o++;i+="</tr>"}return i+='</tr></table></td><td class="ui-timepicker-minutes">',i+=this._generateHTMLMinutes(t),i+="</td></tr></table>",i+=n.browser.msie&&parseInt(n.browser.version,10)<7&&!t.inline?'<iframe src="javascript:false;" class="ui-timepicker-cover" frameborder="0"></iframe>':""},_updateMinuteDisplay:function(t){var i=this._generateHTMLMinutes(t);t.tpDiv.find("td.ui-timepicker-minutes").html(i).find(".ui-timepicker-minute-cell").bind("click",{fromDoubleClick:!1},n.proxy(n.timepicker.selectMinutes,this)).bind("dblclick",{fromDoubleClick:!0},n.proxy(n.timepicker.selectMinutes,this))},_generateHTMLMinutes:function(n){var t,e,u="",s=this._get(n,"rows"),f=Array(),r=this._get(n,"minutes"),h=null,i=0,l=this._get(n,"showMinutesLeadingZero")==!0,o=this._get(n,"onMinuteShow"),c=this._get(n,"minuteText");for(r.starts||(r.starts=0),r.ends||(r.ends=59),t=r.starts;t<=r.ends;t+=r.interval)f.push(t);if(h=Math.round(f.length/s+.49),o&&o.apply(n.input?n.input[0]:null,[n.hours,n.minutes])==!1)for(i=0;i<f.length;i+=1)if(t=f[i],o.apply(n.input?n.input[0]:null,[n.hours,t])){n.minutes=t;break}for(u+='<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+c+'</div><table class="ui-timepicker">',i=0,e=1;e<=s;e++){for(u+="<tr>";i<e*h;)t=f[i],u+=this._generateHTMLMinuteCell(n,t,t<10&&l?"0"+t.toString():t.toString()),i++;u+="</tr>"}return u+="</table>"},_generateHTMLHourCell:function(n,t,i,r){var u=t;t>12&&i&&(u=t-12),u==0&&i&&(u=12),u<10&&r&&(u="0"+u);var f="",o=!0,e=this._get(n,"onHourShow");return e&&(o=e.apply(n.input?n.input[0]:null,[t])),f=o?'<td class="ui-timepicker-hour-cell" data-timepicker-instance-id="#'+n.id.replace("\\\\","\\")+'" data-hour="'+t.toString()+'"><a class="ui-state-default '+(t==n.hours?"ui-state-active":"")+'">'+u.toString()+"</a></td>":'<td><span class="ui-state-default ui-state-disabled '+(t==n.hours?" ui-state-active ":" ")+'">'+u.toString()+"</span></td>"},_generateHTMLMinuteCell:function(n,t,i){var r="",f=!0,u=this._get(n,"onMinuteShow");return u&&(f=u.apply(n.input?n.input[0]:null,[n.hours,t])),r=f?'<td class="ui-timepicker-minute-cell" data-timepicker-instance-id="#'+n.id.replace("\\\\","\\")+'" data-minute="'+t.toString()+'" ><a class="ui-state-default '+(t==n.minutes?"ui-state-active":"")+'" >'+i+"</a></td>":'<td><span class="ui-state-default ui-state-disabled" >'+i+"</span></td>"},_isDisabledTimepicker:function(n){if(!n)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==n)return!0;return!1},_checkOffset:function(t,i,r){var u=t.tpDiv.outerWidth(),e=t.tpDiv.outerHeight(),h=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,f=document.documentElement.clientWidth+n(document).scrollLeft(),o=document.documentElement.clientHeight+n(document).scrollTop();return i.left-=this._get(t,"isRTL")?u-h:0,i.left-=r&&i.left==t.input.offset().left?n(document).scrollLeft():0,i.top-=r&&i.top==t.input.offset().top+s?n(document).scrollTop():0,i.left-=Math.min(i.left,i.left+u>f&&f>u?Math.abs(i.left+u-f):0),i.top-=Math.min(i.top,i.top+e>o&&o>e?Math.abs(e+s):0),i},_findPos:function(t){for(var r=this._getInst(t),u=this._get(r,"isRTL"),i;t&&(t.type=="hidden"||t.nodeType!=1);)t=t[u?"previousSibling":"nextSibling"];return i=n(t).offset(),[i.left,i.top]},_getBorders:function(n){var t=function(n){return{thin:1,medium:2,thick:3}[n]||n};return[parseFloat(t(n.css("border-left-width"))),parseFloat(t(n.css("border-top-width")))]},_checkExternalClick:function(t){if(n.timepicker._curInst){var i=n(t.target);i[0].id==n.timepicker._mainDivId||i.parents("#"+n.timepicker._mainDivId).length!=0||i.hasClass(n.timepicker.markerClassName)||i.hasClass(n.timepicker._triggerClass)||!n.timepicker._timepickerShowing||n.timepicker._inDialog&&n.blockUI||n.timepicker._hideTimepicker()}},_hideTimepicker:function(t){var r=this._curInst,f;if(r&&(!t||r==n.data(t,i))&&this._timepickerShowing){var u=this._get(r,"showAnim"),o=this._get(r,"duration"),e=function(){n.timepicker._tidyDialog(r),this._curInst=null};n.effects&&n.effects[u]?r.tpDiv.hide(u,n.timepicker._get(r,"showOptions"),o,e):r.tpDiv[u=="slideDown"?"slideUp":u=="fadeIn"?"fadeOut":"hide"](u?o:null,e),u||e(),f=this._get(r,"onClose"),f&&f.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._timepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),n.blockUI&&(n.unblockUI(),n("body").append(this.tpDiv))),this._inDialog=!1}},_tidyDialog:function(n){n.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(t){try{return n.data(t,i)}catch(r){throw"Missing instance data for this timepicker";}},_get:function(n,i){return n.settings[i]!==t?n.settings[i]:this._defaults[i]},_setTimeFromField:function(t){var u,i,f,r;t.input.val()!=t.lastVal&&(u=this._get(t,"defaultTime"),i=this._getCurrentTimeRounded(t),u!=""&&(i=u),t.inline==!1&&t.input.val()!=""&&(i=t.input.val()),f=t.lastVal=i,r=this.parseTime(t,f),t.hours=r.hours,t.minutes=r.minutes,n.timepicker._updateTimepicker(t))},_setTimeTimepicker:function(n,t){var i=this._getInst(n);i&&(this._setTime(i,t),this._updateTimepicker(i),this._updateAlternate(i,t))},_setTime:function(n,t,i){var u=n.hours,r=n.minutes,t=this.parseTime(n,t);n.hours=t.hours,n.minutes=t.minutes,u==n.hours&&r==n.minuts||i||n.input.trigger("change"),this._updateTimepicker(n),this._updateSelectedValue(n)},_getCurrentTimeRounded:function(n){var i=new Date,r=this._get(n,"timeSeparator"),t=i.getMinutes();return t=Math.round(t/5)*5,i.getHours().toString()+r+t.toString()},parseTime:function(n,t){var i={},u,f;i.hours=-1,i.minutes=-1;var o=this._get(n,"timeSeparator"),e=this._get(n,"amPmText"),r=t.indexOf(o);return r==-1?i:(i.hours=parseInt(t.substr(0,r),10),i.minutes=parseInt(t.substr(r+1),10),u=this._get(n,"showPeriod")==!0,f=t.toUpperCase(),i.hours<12&&u&&f.indexOf(e[1].toUpperCase())!=-1&&(i.hours+=12),i.hours==12&&u&&f.indexOf(e[0].toUpperCase())!=-1&&(i.hours=0),i)},selectHours:function(t){var r=n(t.currentTarget),f=r.attr("data-timepicker-instance-id"),e=r.attr("data-hour"),o=t.data.fromDoubleClick,s=n(f),i=this._getInst(s[0]),u;return(r.parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active"),r.children("a").addClass("ui-state-active"),i.hours=e,this._updateSelectedValue(i),i._hoursClicked=!0,i._minutesClicked||o)?(n.timepicker._hideTimepicker(),!1):(u=this._get(i,"onMinuteShow"),u&&this._updateMinuteDisplay(i),!1)},selectMinutes:function(t){var r=n(t.currentTarget),e=r.attr("data-timepicker-instance-id"),f=r.attr("data-minute"),o=t.data.fromDoubleClick,u=n(e),i=this._getInst(u[0]);return(r.parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active"),r.children("a").addClass("ui-state-active"),i.minutes=f,this._updateSelectedValue(i),i._minutesClicked=!0,i._hoursClicked||o)?(n.timepicker._hideTimepicker(),!1):!1},_updateSelectedValue:function(n){var u,f,i,e;(n.hours<0||n.hours>23)&&(n.hours=12),(n.minutes<0||n.minutes>59)&&(n.minutes=0);var r="",c=this._get(n,"showPeriod")==!0,l=this._get(n,"showLeadingZero")==!0,o=this._get(n,"amPmText"),h=n.hours?n.hours:0,s=n.minutes?n.minutes:0,t=h;return t||(displayHoyrs=0),c&&(n.hours==0&&(t=12),n.hours<12?r=o[0]:(r=o[1],t>12&&(t-=12))),u=t.toString(),l&&t<10&&(u="0"+u),f=s.toString(),s<10&&(f="0"+f),i=u+this._get(n,"timeSeparator")+f,r.length>0&&(i+=" "+r),n.input&&(n.input.val(i),n.input.trigger("change")),e=this._get(n,"onSelect"),e&&e.apply(n.input?n.input[0]:null,[i,n]),this._updateAlternate(n,i),i},_updateAlternate:function(t,i){var r=this._get(t,"altField");r&&n(r).each(function(t,r){n(r).val(i)})}}),n.fn.timepicker=function(t){n.timepicker.initialized||(n(document).mousedown(n.timepicker._checkExternalClick).find("body").append(n.timepicker.tpDiv),n.timepicker.initialized=!0);var i=Array.prototype.slice.call(arguments,1);return typeof t=="string"&&(t=="isDisabled"||t=="getTime"||t=="widget")?n.timepicker["_"+t+"Timepicker"].apply(n.timepicker,[this[0]].concat(i)):t=="option"&&arguments.length==2&&typeof arguments[1]=="string"?n.timepicker["_"+t+"Timepicker"].apply(n.timepicker,[this[0]].concat(i)):this.each(function(){typeof t=="string"?n.timepicker["_"+t+"Timepicker"].apply(n.timepicker,[this].concat(i)):n.timepicker._attachTimepicker(this,t)})},n.timepicker=new u,n.timepicker.initialized=!1,n.timepicker.uuid=+new Date,n.timepicker.version="0.2.2",window["TP_jQuery_"+f]=n})(jQuery)