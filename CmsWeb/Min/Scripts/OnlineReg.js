$(function(){$.dpoptions={yearRange:"c-99:c+0",onSelect:function(n){var i=$(this).closest("form");$("#age",i).text($.dodate(n))}},$.dodate=function(n){var s=/^(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])((19|20)?[0-9]{2})$/i,o=/^(0?[1-9]|1[012])[\/-](0?[1-9]|[12][0-9]|3[01])[\/-]((19|20)?[0-9]{2})$/i,i=s.exec(n),t,r,u;if(i==null&&(i=o.exec(n)),i!=null){t=parseInt(i[3]),t<1e3&&(t=t<50?t+2e3:t+1900),r=new Date(t,i[1]-1,i[2]),u=new Date,r>u&&(r=new Date(t-100,i[1]-1,i[2]));for(var h=r.getFullYear(),e=r.getMonth(),n=r.getDate(),f=0;r<=u;)r=new Date(h+f,e,n),f++;return f-2}},$("form.DisplayEdit input.dob").live("blur",function(){var n=$(this).closest("form");$("#age",n).text($.dodate($(this).val()))}),$("a.submitbutton, a.submitlink, input.submitbutton.ajax","form.DisplayEdit").live("click",function(n){n.preventDefault();var t=$(this).closest("form"),i=t.serialize();return $.refreshenabled=!0,$.post($(this).attr("href"),i,function(n){if(n.charAt(0)==="/"){$("body").html("<p>Please wait...</p>"),window.location=n;return}$(t).html(n).ready(function(){$("#submitit").attr("onlyoneallowed")=="true"?($.InstructionsShow(),$("#submitit").click()):($.InstructionsShow(),$("#dob").datepicker($.dpoptions))})}),!1}),$.setButtons=function(){$(".submitbutton").button()},$.ShowPaymentInfo=function(){var n=$("input[name=Type]:checked").val();$("div.Card").hide(),$("div.Bank").hide(),n==="C"?$("div.Card").show():n==="B"&&$("div.Bank").show()},$.InstructionsShow=function(){$("div.instructions").hide(),$("#selectfamily").attr("id")?$("div.instructions.select").show():$("#personedit").attr("id")?($("#fillout").hide(),$("div.instructions.find").show()):$("#otheredit").attr("id")?$("div.instructions.options").show():$("#username").attr("id")?($("#username").focus(),$("div.instructions.login").show()):$("#submitit").attr("id")?$("div.instructions.submit").show():$("#sorry").attr("id")&&$("div.instructions.sorry").show(),$("#allowcc").val()&&$.ShowPaymentInfo()},$("form.DisplayEdit").submit(function(){return $("#submitit").val()?($("#submitit").attr("disabled","true"),!0):!1}),$("form.DisplayEdit a.cancel").live("click",function(n){n.preventDefault();var t=$(this).closest("form"),i=t.serialize();return $.post($(this).attr("href"),i,function(n){n=="refresh"&&location.reload(),$(t).html(n).ready(function(){setTimeout($.setButtons,15)})}),!1}),$("#copy").live("click",function(){return $("input:last[name$='.emcontact']").val($("input:hidden:last[name$='.emcontact']").val()),$("input:last[name$='.emphone']").val($("input:hidden:last[name$='.emphone']").val()),$("input:last[name$='.insurance']").val($("input:hidden:last[name$='.insurance']").val()),$("input:last[name$='.policy']").val($("input:hidden:last[name$='.policy']").val()),$("input:last[name$='.doctor']").val($("input:hidden:last[name$='.doctor']").val()),$("input:last[name$='.docphone']").val($("input:hidden:last[name$='.docphone']").val()),$("input:last[name$='.mname']").val($("input:hidden:last[name$='.mname']").val()),$("input:last[name$='.fname']").val($("input:hidden:last[name$='.fname']").val()),$("input:last[name$='.paydeposit']").val($("input:hidden:last[name$='.paydeposit']").val()),!1}),$.InstructionsShow(),$.validator.setDefaults({highlight:function(n){$(n).addClass("ui-state-highlight")},unhighlight:function(n){$(n).removeClass("ui-state-highlight")}}),$("form.DisplayEdit").validate({rules:{"m.donation":{number:!0}}}),$(".personheader a").live("click",function(n){return n.preventDefault(),$(this).closest("div").nextAll("table").slideToggle(),!1}),$("input.sum").live("change",function(){var n=0;$("input.sum").each(function(){isNaN(this.value)||this.value.length==0||(n+=parseFloat(this.value))}),$("#total").html(n.toFixed(2))}),$("input[name=Type]").live("change",$.ShowPaymentInfo),$("#password").live("keypress",function(n){return n.which&&n.which==13||n.keyCode&&n.keyCode==13?($("#loginbt").click(),!1):!0})})