function AddSelected(n){$("#searchDialog").dialog("close");var t=$("tr[cid="+n.cid+"]");$("a.pid",t).text(n.pid),$("td.name",t).text(n.name),$("a.edit",t).click()}$(function(){$("#pid").blur(function(){if($(this).val()!=""){var n=$("#pbform").serialize();$.post("/PostBundle/GetName/",n,function(n){n=="not found"?($.growlUI("PeopleId","Not Found"),$("#name").focus(),$("#pid").val("")):($("#name").val(n),$("#amt").focus())})}}),$(".bt").button(),$("td.name").tooltip({showBody:"|"}),$("#name").autocomplete("/PostBundle/Names",{minChars:3,matchContains:!1,mustMatch:!0,width:200,selectFirst:!1,autoFill:!1,formatItem:function(n){return n[0]+" ("+n[2]+")<br />"+n[3]},formatResult:function(n){return n[0]}}),$("#name").result(function(n,t){t&&$("#pid").val(t[1]),this.value===""&&($.growlUI("Name","Not Found"),$("#pid").val(""))}),$.Stripe=function(){$("#bundle tbody tr").removeClass("alt"),$("#bundle tbody tr:even").addClass("alt")},$.Stripe(),$("#notes").keydown(function(n){n.keyCode!=9&&n.keyCode!=13||n.shiftKey||(n.preventDefault(),$.PostRow())}),$("#pid").keydown(function(n){n.keyCode==13&&(n.preventDefault(),$.browser.msie||$("#pid").blur(),$("#name").focus())}),$("#name").keydown(function(n){n.keyCode==13&&(n.preventDefault(),$("#amt").focus())}),$("#amt").keydown(function(n){n.keyCode==13&&(n.preventDefault(),$("#fund").focus())}),$("#fund").keydown(function(n){n.keyCode==13&&(n.preventDefault(),$("#checkno").focus())}),$("#checkno").keydown(function(n){n.keyCode==13&&(n.preventDefault(),$("#notes").focus())}),$("a.update").click(function(n){n.preventDefault(),$.PostRow()}),$("a.edit").live("click",function(n){var t,i;n.preventDefault(),t=$(this).closest("tr"),$("#editid").val(t.attr("cid")),$("#pid").val($("a.pid",t).text()),$("#name").val($("td.name",t).text()),$("#fund").val($("td.fund",t).attr("val")),$("#pledge").attr("checked",$("td.fund",t).attr("pledge")=="true"),i=$("#amt"),i.val($("td.amt",t).attr("val")),$("#checkno").val($("td.checkno",t).text()),$("#notes").val($("td.notes",t).text()),t.hide(),i.val()=="0.00"&&i.val(""),i.focus(),$("a.edit").hide(),$("a.split").hide(),$("a.delete").hide(),$.Stripe()}),$("a.split").live("click",function(n){n.preventDefault();var t=$(this).closest("tr"),i={pid:$("a.pid",t).text(),name:$("td.name",t).text(),fund:$("td.fund",t).attr("val"),pledge:$("td.fund",t).attr("pledge"),amt:$("td.amt",t).attr("val"),checkno:$("td.checkno",t).text(),notes:$("td.notes",t).text(),id:$("#id").val()};$.PostRow(t.attr("cid"),i)}),$("a.delete").live("click",function(n){var t,i;n.preventDefault(),confirm("are you sure?")&&(t=$(this).closest("tr"),$("#editid").val(t.attr("cid")),i=$("#pbform").serialize(),$.post("/PostBundle/DeleteRow/",i,function(n){t.remove(),$("#totalitems").text(n.totalitems),$("#itemcount").text(n.itemcount),$("#editid").val(""),$.Stripe()}))}),$("a.pid").live("click",function(n){n.preventDefault();var t=$("#searchDialog");$("iframe",t).attr("src",this.href),t.dialog("open")}),$("#bundle").bind("mousedown",function(n){$(n.target).hasClass("clickEdit")?$(n.target).editable(function(t){return $.post("/PostBundle/Edit/",{id:n.target.id,value:t},function(n){$("#totalitems").text(n.totalitems),$("#itemcount").text(n.itemcount),$("#a"+n.cid).text(n.amt)}),t},{indicator:"<img src='/images/loading.gif'>",tooltip:"Click to edit...",style:"display: inline",width:"4em",height:25}):$(n.target).hasClass("clickSelect")&&$(n.target).editable("/PostBundle/Edit/",{indicator:'<img src="/images/loading.gif">',loadtype:"post",loadurl:"/PostBundle/Funds/",type:"select",submit:"OK",style:"display: inline"})}),$.PostRow=function(n,t){var u,r,i;if(!n){if(u=parseFloat($("#amt").val()),!u>0){$.growlUI("Contribution","Cannot post, No Amount");return}t=$("#pbform").serialize()}r="/PostBundle/PostRow/",i=$("#editid").val(),i&&(r="/PostBundle/UpdateRow/"),$.post(r,t,function(t){var f,r,u;t&&($("#totalitems").text(t.totalitems),$("#itemcount").text(t.itemcount),f=$("#pid").val(),i?(r=$('tr[cid="'+i+'"]'),r.replaceWith(t.row),r=$('tr[cid="'+i+'"]')):n?(r=$('tr[cid="'+n+'"]'),$(t.row).insertAfter(r),r=$('tr[cid="'+t.cid+'"]')):($("#bundle tbody").prepend(t.row),r=$("#bundle tbody tr:first")),$("td.name",r).tooltip({showBody:"|"}),$("a.edit").show(),$("a.split").show(),$("a.delete").show(),$(".bt",r).button(),$("#editid").val(""),$("#entry input").val(""),$("#fund").val($("#fundid").val()),$.Stripe(),u=r.offset().top,n||($("#pid").focus(),$("html,body").animate({scrollTop:u},1e3)),r.effect("highlight",{},3e3))})},$("#searchDialog").dialog({title:"Search/Add Contributor",bgiframe:!0,autoOpen:!1,width:712,height:630,modal:!0,overlay:{opacity:.5,background:"black"},close:function(){$("iframe",this).attr("src","")}}),$("#totalitems").text($("#titems").val()),$("#totalcount").text($("#tcount").val())})