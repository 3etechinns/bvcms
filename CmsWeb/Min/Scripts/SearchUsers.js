(function(n){function t(n){window.console&&window.console.log&&window.console.log("SearchUsers selection count: "+n.size())}n.fn.SearchUsers=function(i){t(this);var r=n.extend({},{},i);return this.each(function(){var t=n(this);t.click(function(t){t.preventDefault();var i=n(this).attr("href");return n("<div class='dialog' style='margin: 5px'>Loading...<\/div>").dialog({closeOnEscape:!0,title:r.title||"Select Users",width:"auto",autoSize:!0}).bind("dialogclose",function(){n(this).dialog("destroy")}).load(i,function(){var t=n(this);t.dialog("option","position",["center","center"]),t.dialog("option","width",t.offsetWidth+10),n("table.results > tbody > tr:even",t).addClass("alt"),n(".bt").button(),n(".UpdateSelected",n(this)).click(function(i){i.preventDefault();var u=n("table.results tbody tr:first ",t).find("input[type=checkbox]").attr("value");return r.UpdateShared&&r.UpdateShared(u),t.dialog("close"),!1}),n("a.search",t).click(function(t){t.preventDefault();var i=n(this).closest("form"),r=i.serialize();return n.post(n(this).attr("href"),r,function(t){n("table.results",i).replaceWith(t),n("table.results > tbody > tr:even",i).addClass("alt")}),!1}),n("a.close",t).click(function(n){return n.preventDefault(),t.dialog("close"),!1}),n("input[type=checkbox]",t).die("click").live("change",function(){var t=n(this).parents("tr:eq(0)").find("span.move"),i=n(this).is(":checked"),r=n(this).attr("value");n.post("/SearchUsers/TagUntag/"+r,{ischecked:!i},function(){i?t.html("<a href='#' class='move' value='"+r+"'>move to top<\/a>"):t.empty()})}),n("a.move",t).die("click").live("click",function(t){var i,r;t.preventDefault(),i=n(this).closest("form"),n("#topid").val(n(this).attr("value")),r=i.serialize(),n.post("/SearchUsers/MoveToTop",r,function(t){n("table.results",i).replaceWith(t).ready(function(){n("table.results > tbody > tr:even",i).addClass("alt")})})})}),!1})})}})(jQuery)